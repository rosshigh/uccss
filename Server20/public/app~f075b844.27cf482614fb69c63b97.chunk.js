(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"+bNA":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(){this.BASE_URL=this.HOST+"/api/",this.IMG_DOWNLOAD_URL=this.HOST+"/img/",this.INSTITUTIONS_ACTIVE="01",this.ACTIVE_PERSON="01",this.INACTIVE_PERSON="02",this.ROLES=[{role:"USER",label:"User",UCConly:!1,authLevel:2},{role:"FACU",label:"Faculty",UCConly:!1,authLevel:3},{role:"LEGL",label:"Legal",UCConly:!1,authLevel:2},{role:"BUSI",label:"Billing",UCConly:!1,authLevel:2},{role:"PRIM",label:"Primary",UCConly:!1,authLevel:4},{role:"TECH",label:"Technical",UCConly:!1,authLevel:2},{role:"ACCT",label:"ACC",UCConly:!1,authLevel:5},{role:"UCCT",label:"UCC Technical Staff",UCConly:!0,authLevel:8},{role:"UCCA",label:"UCC Admin Staff",UCConly:!0,authLevel:6},{role:"UCSA",label:"UCCSS Admin",UCConly:!0,authLevel:11},{role:"TMAN",label:"Director",UCConly:!0,authLevel:11},{role:"EDIR",label:"Executive Director",UCConly:!0,authLevel:11},{role:"TDIR",label:"Technical Director",UCConly:!0,authLevel:11},{role:"TMGR",label:"Technical Manager",UCConly:!0,authLevel:11},{role:"STUT",label:"Student Worker",UCConly:!0,authLevel:8},{role:"UAST",label:"UA Staff",UCConly:!1,authLevel:7}],this.UCC_ROLE=6,this.UCC_TECH_ROLE=8,this.UA_ROLE=7,this.ACC_ROLE=5,this.USER_ROLE=4,this.d=void 0,this.PROV_USER=1,this.USER_STATUS=[{code:"01",description:"Active"},{code:"02",description:"Inactive"}],this.PHONE_MASKS=[{country:"US",mask:"999-999-9999"},{country:"CA",mask:"999-999-9999"},{country:"CANADA",mask:"999-999-9999"},{country:"BR",mask:"99 99999 9999"},{country:"CO",mask:"9999999999999"}],this.SESSION_STATUSES=["Closed","Active","Requests","Next"],this.SYSTEM_TYPES=["ERP","HANA","BO"],this.SANDBOX_ID="a1a1a1a1a1a1a1a1a1a1a1a1",this.SANDBOX_NAME="Trial Client",this.ASSIGNED_CLIENT_CODE=4,this.UNASSIGNED_CLIENT_CODE=1,this.SHARED_CLIENT_CODE=2,this.REFRESHED_CLIENT_CODE=3,this.SANDBOX_CLIENT_CODE=5,this.RETIRED_CLIENT_CODE=6,this.CLIENT_STATUSES=[{code:this.ASSIGNED_CLIENT_CODE,description:"Assigned",OKToDelete:!1,lock:!0},{code:this.REFRESHED_CLIENT_CODE,description:"Refresh",OKToDelete:!0,lock:!0},{code:this.RETIRED_CLIENT_CODE,description:"Retired",OKToDelete:!1,lock:!1},{code:this.SHARED_CLIENT_CODE,description:"Shared",OKToDelete:!1,lock:!1},{code:this.UNASSIGNED_CLIENT_CODE,description:"Unassigned",OKToDelete:!0,lock:!1},{code:this.SANDBOX_CLIENT_CODE,description:this.SANDBOX_NAME,OKToDelete:!1,lock:!1}]}},0:function(e,t,r){r("GAND"),r("GmYv"),e.exports=r("b9nV")},BEPO:function(e){e.exports=JSON.parse('{"a":false,"b":false}')},app:function(e,t,r){"use strict";r.r(t),r.d(t,"App",(function(){return l}));var n,i=r("aurelia-event-aggregator"),a=r("/T8m"),o=r("3U8n"),s=r("B6RA"),l=Object(o.s)(a.a,i.a,s.a)(n=function(){function e(e,t,r){this.config=e,this.eventAggregator=t,this.store=r,this.validateUser(),this.subscribe()}var t=e.prototype;return t.validateUser=function(){this.userObj=this.store.getUser("user"),this.isAuthenticated=this.userObj,console.log(this.isAuthenticated)},t.subscribe=function(){var e=this;this.subscriber=this.eventAggregator.subscribe("auth:login",(function(t){e.isAuthenticated="login"==t,console.log(e.isAuthenticated)}))},t.configureRouter=function(e,t){this.router=t,e.title="UCCSS",e.map([{route:["","user"],moduleId:"./modules/user/user",name:"User",settings:{auth:!1,roles:[]}},{route:"customers",moduleId:"./modules/admin/Customers/customers",name:"customers",settings:{auth:!1,roles:[]}},{route:"systems",moduleId:"./modules/admin/systems/systems",name:"systems",settings:{auth:!1,roles:[]}}])},e}())||n},"app.html":function(e,t,r){e.exports='<template>\n  <require from="resources/css/material-dashboard.css"></require>\n  <require from="resources/css/styles.css"></require>\n  <div  class="wrapper ">\n    <side-bar></side-bar>\n    <div class="main-panel">\n      <router-view></router-view>\n    </div>\n  </div>\n</template>\n'},home:function(e,t,r){"use strict";r.r(t),r.d(t,"Home",(function(){return m}));var n,i=r("aurelia-framework"),a=r("4ysu"),o=r("G0rb"),s=r("+bNA"),l=r("nxgs"),d=r("B6RA"),c=r("/T8m");function u(e,t,r,n,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){u(a,n,i,o,s,"next",e)}function s(e){u(a,n,i,o,s,"throw",e)}o(void 0)}))}}var m=Object(i.inject)(o.a,s.a,a.c,l.a,i.Aurelia,d.a,c.a)(n=function(){function e(e,t,r,n,i,a,o){this.auth=e,this.router=r,this.aurelia=i,this.utils=n,this.appConfig=t,this.store=a,this.config=o}var t=e.prototype;return t.activate=function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.store.retrieveConfig();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.login=function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.login(this.email,this.password);case 2:e.sent.error?this.loginError="Invalid credentials.":(this.loginError="",this.loginSuccess(),this.isAuthenticated=this.auth.isAuthenticated());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.loginSuccess=function(){var e=p(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.userObj=this.store.getUser("user"),!this.userObj){e.next=16;break}if(this.userObj.institutionId.institutionStatus===this.appConfig.INSTITUTIONS_ACTIVE){e.next=7;break}this.utils.showNotification("You must belong to an active institution to access the web site"),this.logout(),e.next=14;break;case 7:if(this.userObj.personStatus===this.appConfig.ACTIVE_PERSON){e.next=11;break}return e.abrupt("return",this.dialog.showMessage("You must have an active account to access the web site.  Contact your faculty coordinator to activate your account.","Account Not Active",["OK"]).whenClosed((function(e){t.logout()})));case 11:this.userObj.userRole||this.logout(),this.store.setUserRole(this.userObj.userRole),this.aurelia.setRoot("app");case 14:e.next=18;break;case 16:this.utils.showNotification("There was a problem validating your account"),this.router.navigate("home");case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.requestPasswordReset=function(){var e=p(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.email){e.next=7;break}return e.next=3,this.people.requestPasswordReset({email:this.email});case 3:(t=e.sent)&&!t.error?this.utils.showNotification("An email has been sent to the provided email address with a link you can use to reset your password"):(t.status=404)?this.utils.showNotification("There is no registered user with that email address"):(t.status=401)&&this.utils.showNotification("The account with the provided address has been deactivated.  Please contact your faculty coordinator."),e.next=8;break;case 7:this.utils.showNotification("Please enter an email address");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}())||n},"home.html":function(e,t,r){e.exports='<template>\r\n  <require from="resources/css/material-dashboard.css"></require>\r\n  <require from="resources/css/styles.css"></require>\r\n    <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top text-white">\r\n        <div class="container">\r\n          <div class="navbar-wrapper">\r\n            <a class="navbar-brand" href="javascript:;">Login Page</a>\r\n          </div>\r\n          <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">\r\n            <span class="sr-only">Toggle navigation</span>\r\n            <span class="navbar-toggler-icon icon-bar"></span>\r\n            <span class="navbar-toggler-icon icon-bar"></span>\r\n            <span class="navbar-toggler-icon icon-bar"></span>\r\n          </button>\r\n          <div class="collapse navbar-collapse justify-content-end">\r\n            <ul class="navbar-nav">\r\n              <li class="nav-item ">\r\n                <a href="../pages/register.html" class="nav-link">\r\n                  <i class="material-icons">person_add</i>\r\n                  Register\r\n                </a>\r\n              </li>\r\n              <li class="nav-item ">\r\n                <a href="https://www.creative-tim.com/" class="nav-link">\r\n                  <i class="material-icons">info</i>\r\n                  About the UCC\r\n                </a>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n      \x3c!-- End Navbar --\x3e\r\n      <div class="wrapper wrapper-full-page">\r\n        <div class="page-header login-page header-filter" filter-color="black" style="background-image: url(\'http://localhost/img/Lubar-2019.gif\'); background-size: cover; background-position: top center;">\r\n          \x3c!--   you can change the color of the filter page using: data-color="blue | purple | green | orange | red | rose " --\x3e\r\n          <div class="container">\r\n            <div class="row">\r\n              <div class="col-lg-4 col-md-6 col-sm-8 ml-auto mr-auto">\r\n                <form class="form" method="" action="">\r\n                  <div class="card card-login">\r\n                    <div class="card-header card-header-rose text-center">\r\n                      <h4 class="card-title">Login</h4>\r\n                    </div>\r\n                    <div class="card-body ">\r\n                      <p class="card-description text-center">UWM UCCSS</p>\r\n                      <span class="bmd-form-group">\r\n                        <div class="input-group">\r\n                          <div class="input-group-prepend">\r\n                            <span class="input-group-text">\r\n                              <i class="material-icons">email</i>\r\n                            </span>\r\n                          </div>\r\n                          <input value.bind="email" type="email" class="form-control" placeholder="Email...">\r\n                        </div>\r\n                      </span>\r\n                      <span class="bmd-form-group">\r\n                        <div class="input-group">\r\n                          <div class="input-group-prepend">\r\n                            <span class="input-group-text">\r\n                              <i class="material-icons">lock_outline</i>\r\n                            </span>\r\n                          </div>\r\n                          <input value.bind="password" type="password" class="form-control" placeholder="Password...">\r\n                        </div>\r\n                      </span>\r\n                    </div>\r\n                    <div class="card-footer justify-content-center">\r\n                        <button class="btn btn-primary leftMargin" click.delegate=\'login()\'>Login</button>\r\n                        <button class="btn btn-link" click.delegate="requestPasswordReset()">Forgot password</button <label\r\n                          if.bind="loginError" style="color:white;">${loginError}</label>\r\n                    </div>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <footer class="footer">\r\n            <div class="container">\r\n              <nav class="float-left">\r\n                <ul>\r\n                 \r\n                </ul>\r\n              </nav>\r\n            </div>\r\n          </footer>\r\n        </div>\r\n      </div>\r\n</template>'},main:function(e,t,r){"use strict";r.d(t,"configure",(function(){return a}));r("ls82");var n=r("BEPO"),i=r("70NS");function a(e){e.use.standardConfiguration().globalResources("aurelia-mask/dist/masked-input").plugin("au-table").plugin("aurelia-validation").plugin("aurelia-validatejs").plugin("aurelia-dialog").feature("resources/index"),e.use.developmentLogging(n.a?"debug":"warn"),n.b&&e.use.plugin("aurelia-testing"),e.start().then((function(){var t=sessionStorage.getItem("user")?"app":"home";e.setRoot(i.PLATFORM.moduleName(t))}))}},"modules/admin/Customers/bulkEmails":function(e,t,r){"use strict";r.r(t),r.d(t,"BulkEmails",(function(){return m}));var n,i=r("aurelia-framework"),a=r("aurelia-validation"),o=r("+bNA"),s=r("nxgs"),l=r("JHVQ"),d=r("9hG6"),c=r("B6RA");function u(e,t,r,n,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){u(a,n,i,o,s,"next",e)}function s(e){u(a,n,i,o,s,"throw",e)}o(void 0)}))}}var m=Object(i.inject)(a.ValidationControllerFactory,o.a,l.a,s.a,d.a,c.a)(n=function(){function e(e,t,r,n,i,a){this.composeEmailPanel=!1,this.subject="",this.MESSAGE="",this.email=new Object,this.roleIncludeFilterValue=new Array,this.roleExcludeFilterValue=new Array,this.pageSize=200,this.toolbar=[["style",["style","bold","italic","underline","clear"]],["color",["color"]],["font",["strikethrough","superscript","subscript"]],["layout",["ul","ol","paragraph"]],["insert",["link","table","hello"]],["misc",["undo","redo","fullscreen","codeview"]]],this.controller=e.createForCurrentScope(),this.config=t,this.utils=n,this.people=r,this.is4ua=i,this.store=a,this.configParameters=this.store.getConfig(),this.userObj=JSON.parse(sessionStorage.getItem("user")),this.filters=[{value:"",keys:["fullName"]},{value:this.config.ACTIVE_PERSON,keys:["personStatus"]},{value:"",keys:["institutionId.region"]},{value:"",keys:["institutionId.country"]},{value:"",keys:["institutionId.name"]}]}var t=e.prototype;return t.activate=function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.people.getPeopleBulkEmailArray("?order=lastName&filter=personStatus|eq|01"),this.people.getInstitutionArray("?order=name",!0),this.is4ua.loadIs4ua()]);case 2:e.sent,this.filteredArray=this.utils.copyArray(this.people.peopleBulkEmailArray),this.initialLoaded=!1;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.filterActive=function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._clearFilters(),e.next=3,this.people.getPeopleBulkEmailArray("?order=lastName&filter=personStatus|eq|"+this.activeFilterValue,!0);case 3:this.dataTable.updateArray(this.people.peopleBulkEmailArray);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.attached=function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$('[data-toggle="tooltip"]').tooltip(),$("#loading").show(),$(".selectpicker").selectpicker();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.rolesFilter=function(){var e=this;0!==this.roleIncludeFilterValue.length||0!==this.roleExcludeFilterValue.length?this.filteredArray=this.people.peopleBulkEmailArray.filter((function(t){var r=!1;if(t.roles&&t.roles.length>0)for(var n=0;n<t.roles.length;n++)if((0===e.roleIncludeFilterValue.length||e.roleIncludeFilterValue.indexOf(t.roles[n].toUpperCase())>-1)&&(r=!0),e.roleExcludeFilterValue.length>0&&e.roleExcludeFilterValue.indexOf(t.roles[n].toUpperCase())>-1){r=!1;break}return r})):this.filteredArray=this.utils.copyArray(this.people.peopleBulkEmailArray)},e}())||n},"modules/admin/Customers/bulkEmails.html":function(e,t,r){e.exports='<template>\r\n    \x3c!-- <compose view="./components/emailTable.html"></compose> --\x3e\r\n    <compose view="./components/selectionForm.html"></compose>\r\n</template>'},"modules/admin/Customers/components/address.html":function(e,t){e.exports='<template>\r\n    <div class="card">\r\n        <div class="card-header">\r\n            <h4 class="card-title">Address</h4>\r\n        </div>\r\n        <div class="card-body">\r\n            <div class="bottomMargin leftMargin rightMargin">\r\n                <span click.delegate="copyInstAddress()" class="smallMarginRight" bootstrap-tooltip\r\n                    data-toggle="tooltip" data-placement="bottom" title=""\r\n                    data-original-title="Copy Instituion Address"><i class="fa fa-files-o fa-lg fa-border"\r\n                        aria-hidden="true"></i></span>\r\n            </div>\r\n            <div class="topMargin">\r\n                <div class="col-sm-12 col-lg-12">\r\n                    <label for="editAddress1" class="control-label hideOnPhone">Address 1</label>\r\n                    <input value.bind="people.selectedPerson.address1" id="editAddress1" class="form-control "\r\n                        type="text" />\r\n                </div>\r\n                <div class="col-sm-12 col-lg-12">\r\n                    <label for="editAddress2" class="control-label hideOnPhone">Address 2</label>\r\n                    <input value.bind="people.selectedPerson.address2" id="editAddress2" class="form-control "\r\n                        type="text" />\r\n                </div>\r\n            </div>\r\n            <div class="col-sm-12 col-lg-12">\r\n                <label for="editCity" class="control-label hideOnPhone">City</label>\r\n                <input value.bind="people.selectedPerson.city" id="editCity" class="form-control " \r\n                    type="text" />\r\n            </div>\r\n            <div class="col-sm-12 col-lg-12">\r\n                <label for="editRegion" class="control-label hideOnPhone">Region</label>\r\n                <input value.bind="people.selectedPerson.region" id="editRegion" class="form-control "\r\n                     type="text" />\r\n            </div>\r\n            <div class="col-sm-12 col-lg-12">\r\n                <label for="editPostalCode" class="control-label hideOnPhone">Postal Code</label>\r\n                <input value.bind="people.selectedPerson.postalCode" id="editPostalCode" class="form-control "\r\n                     type="text" />\r\n            </div>\r\n            <div class="col-sm-12 col-lg-12">\r\n                <label for="editCountry" class="control-label hideOnPhone">Country</label>\r\n                <input value.bind="people.selectedPerson.country" change.trigger="getPhoneMask()" id="editCountry"\r\n                    class="form-control" type="text" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>'},"modules/admin/Customers/components/bulkEmailTableToolbar.html":function(e,t){e.exports='<template>\r\n    <td colspan=\'7\'>\r\n        <span click.delegate="refresh()" class="smallMarginRight" bootstrap-tooltip\r\n            data-toggle="tooltip" data-placement="bottom" title=""\r\n            data-original-title="Refresh"><i class="fa fa-refresh"\r\n                aria-hidden="true"></i></span>\r\n        <span click.delegate="downloadInstExcel()" class="smallMarginRight" bootstrap-tooltip\r\n            data-toggle="tooltip" data-placement="bottom" title=""\r\n            data-original-title="Export to Excel"><i class="fa fa-download"\r\n                aria-hidden="true"></i></span>\r\n        <span click.delegate="clearFilters()" class="smallMarginRight" bootstrap-tooltip\r\n            data-toggle="tooltip" data-placement="bottom" title=""\r\n            data-original-title="Clear Filters"><i class="fa fa-filter"\r\n                aria-hidden="true"></i></span>\r\n    </td>\r\n</template>'},"modules/admin/Customers/components/composeEmail.html":function(e,t){e.exports='<template>\r\n    <div  class="panel panel-info leftMargin rightMargin topMargin bottomMargin">\r\n        <div class="panel-body">\r\n            <div class="list-group-item col-md-12 topMargin">\r\n                <span click.delegate="sendTheBulkEmail()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Send Email"><i class="fa fa-floppy-o fa-lg fa-border"\r\n                        aria-hidden="true"></i></span>\r\n                <span click.delegate="cancel()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Cancel"><i class="fa fa-ban fa-lg fa-border"\r\n                        aria-hidden="true"></i></span>\r\n            </div>\r\n            <div class="col-lg-10 col-lg-offset-1 topMargin">\r\n                <input value.bind="email.subject" class="form-control" placeholder="Subject" />\r\n                <div class="topMargin">\r\n                    <editor value.bind="email.MESSAGE" height="250" toolbar.bind="toolbar"></editor>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>'},"modules/admin/Customers/components/emailTable.html":function(e,t,r){e.exports='<template>\r\n    \x3c!-- <div class="card" >\r\n        <div class="card-body"> --\x3e\r\n            <div class=\'col-lg-10 offset-lg-1 bottomMargin\'>\r\n                <compose view="../../../../resources/elements/table-nav-bar.html"></compose>\r\n\r\n                <table class="table table-striped"\r\n                    aurelia-table="data.bind: filteredArray; display-data.bind: $displayData; filters.bind: filters; current-page.bind: currentPage; page-size.bind: pageSize; total-items.bind: totalItems;"> \r\n                    <thead class="cf">\r\n                        <tr>\r\n                            <compose view=\'./bulkEmailTableToolbar.html\'></compose>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan=\'7\'>\r\n                                <span click.delegate="downloadInstExcel()" class="smallMarginRight" bootstrap-tooltip\r\n                                    data-toggle="tooltip" data-placement="bottom" title=""\r\n                                    data-original-title="Export to Excel"><i class="fa fa-download"\r\n                                        aria-hidden="true"></i></span>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th style="width:15rem;" aut-sort="key: lastName">Name </th>\r\n                            <th style="width:15rem;" aut-sort="key: institutionId.name">Institution</th>\r\n                            <th style="width:10rem;">Institution<br>Status</th>\r\n                            <th style="width:10rem;">City</th>\r\n                            <th style="width:10rem;">Region</th>\r\n                            <th style="width:10rem;">Country</th>\r\n                            <th style="width:20rem;" aut-sort="key: email">Email</th>\r\n                            <th style="width:20rem;">Role</th>\r\n                            <th style="width:15rem;">Person Status</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr repeat.for="person of $displayData">\r\n                            <td style="width:20rem;">${person.fullName}</td>\r\n                            <td style="width:30rem;">${person.institutionId._id |\r\n                                lookupValue:people.institutionsArray:"_id":"name"}</td>\r\n                            <td style="width:15rem;">${person.institutionId.institutionStatus |\r\n                                lookupValue:is4ua.institutonStatusArray:"code":"description"}</td>\r\n                            <td style="width:15rem;">${person.institutionId.city}</td>\r\n                            <td style="width:15rem;">${person.institutionId.region}</td>\r\n                            <td style="width:15rem;">${person.institutionId.country}</td>\r\n                            <td style="width:20rem;">${person.email}</td>\r\n                            <td style="width:20rem;">${person.roles}</td>\r\n                            <td style="width:15rem;">${person.personStatus |\r\n                                lookupValue:is4ua.personStatusArray:"code":"description"}</td> \r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n</template>'},"modules/admin/Customers/components/institutionAddress.html":function(e,t){e.exports='<template>\r\n    <div class="card">\r\n        <div class="card-header">\r\n            <h4 class="card-title">Address</h4>\r\n        </div>\r\n        <div class="card-body">\r\n            <div class="row">\r\n                <div class="col">\r\n                    <div class="form-group">\r\n                        <label for="editAddress1" class="control-label hideOnPhone">Address 1</label>\r\n                        <input value.bind="people.selectedInstitution.address1" id="editAddress1" class="form-control "\r\n                           type="text" />\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label for="editAddress2" class="control-label hideOnPhone">Address 2</label>\r\n                        <input value.bind="people.selectedInstitution.address2" id="editAddress2" class="form-control "\r\n                           type="text" />\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label for="editCity" class="control-label hideOnPhone">City</label>\r\n                        <input value.bind="people.selectedInstitution.city" id="editCity" class="form-control "\r\n                            type="text" />\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label for="editRegion" class="control-label hideOnPhone">Region</label>\r\n                        <input value.bind="people.selectedInstitution.region" id="editRegion" class="form-control "\r\n                           type="text" />\r\n                    </div>\r\n                </div>\r\n                <div class="col">\r\n                    <div class="form-group">\r\n                        <label for="editPostalCode" class="control-label hideOnPhone">Postal Code</label>\r\n                        <input value.bind="people.selectedInstitution.postalCode" id="editPostalCode"\r\n                            class="form-control " type="text" />\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label for="editCountry" class="control-label hideOnPhone">Country *</label>\r\n                        <input value.bind="people.selectedInstitution.country & validateOnChange" id="editCountry"\r\n                            class="form-control" type="text" />\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="form-group">\r\n                            <div class="col-sm-10">\r\n                                <label>Time Zone</label>\r\n                                <input value.bind="people.selectedInstitution.timeZone" id="timeZone"\r\n                                    class="form-control " type="text" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="form-group">\r\n                            <div class="col-sm-10">\r\n                                <div class="checkbox">\r\n                                    <label>\r\n                                        <input checked.bind="people.selectedInstitution.apj" type="checkbox"> APJ\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n</template>'},"modules/admin/Customers/components/institutionInfo.html":function(e,t,r){e.exports='<template>\r\n    <form class="form-horizontal"></form>\r\n    <div class="card">\r\n        <div class="card-header">\r\n            <h4 class="card-title">Institution Information</h4>\r\n        </div>\r\n        <div class="card-body">\r\n            <div class="row">\r\n                <div class="col">\r\n                    <div class="form-group">\r\n                        <div class="col-sm-10">\r\n                            <label>Name *</label>\r\n                            <input value.bind="people.selectedInstitution.name & validateOnChange" id="editName"\r\n                                class="form-control" type="text" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="col">\r\n                    <div class="form-group">\r\n                        <div class="col-sm-10">\r\n                            <label class="left">Status *</label>\r\n                            <select value.bind="people.selectedInstitution.institutionStatus & validateOnChange"\r\n                                id="editInstitutonStatusArray" class="form-control">\r\n                                <option value="">Select an option</option>\r\n                                <option repeat.for="status of is4ua.institutonStatusArray" value="${status.code}">\r\n                                    ${status.description}</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="col">\r\n                    <div class="form-group">\r\n                        <label>Modifed Date</label>\r\n                        <flat-picker controlid="modifiedDate" config.bind="dateConfig"\r\n                            value.bind="people.selectedInstitution.dateModified"></flat-picker>\r\n                    </div>\r\n                </div>\r\n                <div class="col">\r\n                    <div class="form-group">\r\n                        <div class="col-sm-10">\r\n                            <label>Date Joined</label>\r\n                            <flat-picker controlid="joinDate" config.bind="dateConfig"\r\n                                value.bind="people.selectedInstitution.joinDate"></flat-picker>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="col">\r\n                    <div class="form-group">\r\n                        <div class="col-sm-10">\r\n                            <label>Date Dropped</label>\r\n                            <flat-picker controlid="dropDate" config.bind="dateConfig"\r\n                                value.bind="people.selectedInstitution.dropDate"></flat-picker>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col-3">\r\n                <div class="form-group">\r\n                    <div class="col-sm-10">\r\n                        <label>Institution Type *</label>\r\n                        <select value.bind="people.selectedInstitution.institutionType & validateOnChange"\r\n                            id="editInstitutionType" class="form-control topMargin">\r\n                            <option value="">Select an option</option>\r\n                            <option repeat.for="status of is4ua.institutionTypes" value="${status.code}">\r\n                                ${status.description}</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="topMargin">\r\n        <compose view="./institutionAddress.html"></compose>\r\n    </div>\r\n    </form>\r\n</template>'},"modules/admin/Customers/components/institutionPeople.html":function(e,t){e.exports='<template>\r\n    <div class="row">\r\n        <table id="personTable2" class="table table-striped table-hover"\r\n            aurelia-table="data.bind: people.institutionPeopleArray; display-data.bind: $displayDataPeople;">\r\n            <thead>\r\n                <tr>\r\n                    <th>Name</th>\r\n                    <th>Phone</th>\r\n                    <th>eMail</th>\r\n                    <th>Role</th>\r\n                    <th>Status</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr repeat.for="person of $displayDataPeople" class="blackText">\r\n                    <td>${person.fullName}</td>\r\n                    <td>\r\n                        ${person.phone | phoneNumber:config.PHONE_MASKS:person.country:person.ext}<br>\r\n                        ${person.mobile | phoneNumber:config.PHONE_MASKS:person.country}\r\n                    </td>\r\n                    <td>${person.email}</td>\r\n                    <td>${person.roles}</td>\r\n                    <td>${person.personStatus | lookupValue:is4ua.personStatusArray:"code":"description"}</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</template>'},"modules/admin/Customers/components/institutionTableToolbar.html":function(e,t){e.exports='<template>\r\n    <td colspan=\'7\'>\r\n        <span click.delegate="refresh()" class="smallMarginRight" bootstrap-tooltip\r\n            data-toggle="tooltip" data-placement="bottom" title=""\r\n            data-original-title="Refresh"><i class="fa fa-refresh"\r\n                aria-hidden="true"></i></span>\r\n        <span click.delegate="new()" class="smallMarginRight" bootstrap-tooltip\r\n            data-toggle="tooltip" data-placement="bottom" title="" data-original-title="New"><i\r\n                class="fa fa-plus" aria-hidden="true"></i></span>\r\n        <span click.delegate="downloadInstExcel()" class="smallMarginRight" bootstrap-tooltip\r\n            data-toggle="tooltip" data-placement="bottom" title=""\r\n            data-original-title="Export to Excel"><i class="fa fa-download"\r\n                aria-hidden="true"></i></span>\r\n        <span click.delegate="clearFilters()" class="smallMarginRight" bootstrap-tooltip\r\n            data-toggle="tooltip" data-placement="bottom" title=""\r\n            data-original-title="Clear Filters"><i class="fa fa-filter"\r\n                aria-hidden="true"></i></span>\r\n    </td>\r\n</template>'},"modules/admin/Customers/components/institutionsForm.html":function(e,t,r){e.exports='<template>\r\n    <div class="card positionUnderToolbar">\r\n        <div class="card-body">\r\n            <div class="list-group-item col-lg-10">\r\n                <span click.delegate="back()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Back"><i\r\n                        class="fa fa-arrow-left fa-lg fa-border" aria-hidden="true"></i></span>\r\n                <span disabled.bind="controller.errors.length > 0" click.delegate="save()" class="smallMarginRight"\r\n                    bootstrap-tooltip data-toggle="tooltip" data-placement="bottom" title=""\r\n                    data-original-title="Save"><i class="fa fa-floppy-o fa-lg fa-border" aria-hidden="true"></i></span>\r\n                <span click.delegate="cancel()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Cancel Changes"><i\r\n                        class="fa fa-ban fa-lg fa-border" aria-hidden="true"></i></span>\r\n                <span show.bind="!newPerson" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Delete"><i\r\n                        class="fa fa-trash fa-lg fa-border text-danger" aria-hidden="true" data-toggle="modal"\r\n                        data-target="#deleteObject"></i></span>\r\n            </div>\r\n            <div class=\'col-lg-10 bottomMargin topMargin\'>\r\n                <ul class="nav nav-pills bottomMargin">\r\n                    <li class="nav-item">\r\n                        <a class="nav-link active" data-toggle="tab" role="tab" href="#instiutioninfo">Institution\r\n                            Info</a>\r\n                    </li>\r\n                    <li class="nav-item">\r\n                        <a class="nav-link" data-toggle="tab" role="tab" href="#people">People</a>\r\n                    </li>\r\n                </ul>\r\n                <div class="tab-content" id="myTabContent">\r\n                    <div class="tab-pane fade show active" id="instiutioninfo" role="tabpanel"\r\n                        aria-labelledby="home-tab">\r\n                        <compose view="./institutionInfo.html"></compose>\r\n                    </div>\r\n                    <div class="tab-pane fade" id="people" role="tabpanel" aria-labelledby="home-tab">\r\n                        <compose view="./institutionPeople.html"></compose>\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col">\r\n                        <div if.bind="controller.errors.length > 0" class="alert alert-danger topMargin" role="alert">\r\n                            <ul  class="list-group">\r\n                                <li repeat.for="error of controller.errors" class="list-group-item" >\r\n                                    ${error}</li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>'},"modules/admin/Customers/components/institutionsTable.html":function(e,t,r){e.exports='<template>\r\n    <div class="card" style="top:-110px;">\r\n        <div class="card-body">\r\n            <div class=\'col-lg-10 offset-lg-1 bottomMargin\'>\r\n\r\n                <compose view="../../../../resources/elements/table-nav-bar.html"></compose>\r\n\r\n                <table class="table table-striped"\r\n                    aurelia-table="data.bind: people.institutionsArray; display-data.bind: $displayData; filters.bind: filters; current-page.bind: currentPage; page-size.bind: pageSize; total-items.bind: totalItems;">\r\n                    <thead>\r\n                        <tr>\r\n                            <compose view=\'./institutionTableToolbar.html\'></compose>\r\n                        </tr>\r\n                        <tr>\r\n                            <th colspan="3">\r\n                                <div class=\'col\'>\r\n                                    <div class="form-group">\r\n                                        <input type="text" value.bind="filters[0].value"\r\n                                            placeholder="Filter name, country and region " class="form-control"\r\n                                            id=\'filterField\' />\r\n                                    </div>\r\n                                </div>\r\n                            </th>\r\n                            <th colspan="1">\r\n                                <div class=\'col\'>\r\n                                    <div class="form-group">\r\n                                        <select value.bind="filters[1].value" class="form-control "\r\n                                            id="institutionType">\r\n                                            <option value=""></option>\r\n                                            <option repeat.for="institution of is4ua.institutionTypes"\r\n                                                value="${institution.code}">${institution.description}</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </th>\r\n                            <th colspan="1">\r\n                                <div class="form-group">\r\n                                    <select value.bind="filters[2].value" class="form-control " id="institutionStatus"\r\n                                        placeholder="Status">\r\n                                        <option value=""></option>\r\n                                        <option repeat.for=\'status of is4ua.institutonStatusArray\'\r\n                                            model.bind=\'status.code\'>\r\n                                            ${status.description}</option>\r\n                                    </select>\r\n                                </div>\r\n                            </th>\r\n                        </tr>\r\n                        <tr>\r\n                            <th style="width:25rem;" aut-sort="key: name">Name</th>\r\n                            <th style="width:10rem;" aut-sort="key: country">Country</th>\r\n                            <th style="width:5rem;" aut-sort="key: region">Region</th>\r\n                            <th style="width:20rem;">Institution Type</th>\r\n                            <th>Status</th>\r\n                        </tr>\r\n                    </thead>\r\n\r\n                    <tbody>\r\n                        <tr repeat.for="institution of $displayData" click.delegate="edit(institution)">\r\n                            <td style="width:25rem;">${institution.name}</td>\r\n                            <td style="width:10rem;">${institution.country}</td>\r\n                            <td style="width:5rem;">${institution.region}</td>\r\n                            <td style="width:20rem;">${institution.institutionType |\r\n                                lookupValue:is4ua.institutionTypes:"code":"description"}</td>\r\n                            <td>${institution.institutionStatus |\r\n                                lookupValue:is4ua.institutonStatusArray:"code":"description"}</td>\r\n                        </tr>\r\n                    </tbody>\r\n\r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    </div>\r\n</template>'},"modules/admin/Customers/components/password.html":function(e,t){e.exports='<template>\r\n    <div class="card">\r\n        <div class="card-header">\r\n            <h4 class="card-title">Change Password</h4>\r\n        </div>\r\n        <div class="card-body">\r\n            <div class="panel panel-default col-md-12">\r\n                <div class="panel-body">\r\n                    <div class="bottomMargin">\r\n                        <div class="bottomMargin list-group-item">\r\n                            <span click.delegate="savePassword()" class="smallMarginRight" bootstrap-tooltip\r\n                                data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Save"><i\r\n                                    class="fa fa-floppy-o fa-lg fa-border" aria-hidden="true"></i></span>\r\n                            <span click.delegate="cancelEditPassword()" class="smallMarginRight" bootstrap-tooltip\r\n                                data-toggle="tooltip" data-placement="bottom" title=""\r\n                                data-original-title="Cancel Changes"><i class="fa fa-ban fa-lg fa-border"\r\n                                    aria-hidden="true"></i></span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <input id="newPassword" type="text" placeholder="New Password" class="form-control topMargin"\r\n                            value.bind="newPassword" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n</template>'},"modules/admin/Customers/components/peopleForm.html":function(e,t,r){e.exports='<template>\r\n  <compose view="../../../../resources/modals/deleteObjectModal.html"></compose>\r\n  <compose view="../../../../resources/modals/changeObjectModal.html"></compose>\r\n  <compose view="../../../../resources/modals/youHaveErrorsModal.html"></compose>\r\n  \r\n    <div class="card positionUnderToolbar">\r\n        <div class="card-body">\r\n            <div class="list-group-item col-lg-10">\r\n                <span click.delegate="back()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Back"><i\r\n                        class="fa fa-arrow-left fa-lg fa-border" aria-hidden="true"></i></span>\r\n                <span  disabled.bind="controller.errors.length > 0" click.delegate="save()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Save"><i\r\n                        class="fa fa-floppy-o fa-lg fa-border" aria-hidden="true"></i></span>\r\n                <span click.delegate="cancel()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Cancel Changes"><i\r\n                        class="fa fa-ban fa-lg fa-border" aria-hidden="true"></i></span>\r\n                <span show.bind="!newPerson" class="smallMarginRight" bootstrap-tooltip\r\n                    data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Delete" ><i\r\n                        class="fa fa-trash fa-lg fa-border text-danger" aria-hidden="true" data-toggle="modal" data-target="#deleteObject"></i></span>\r\n            </div>\r\n            <div class=\'col-lg-10 bottomMargin topMargin\'>\r\n                <ul class="nav nav-pills bottomMargin">\r\n                    <li class="nav-item">\r\n                        <a class="nav-link active" data-toggle="tab" role="tab" href="#userinfo">User Info</a>\r\n                    </li>\r\n                    <li class="nav-item">\r\n                        <a class="nav-link" data-toggle="tab" role="tab" href="#address">Address</a>\r\n                    </li>\r\n                    <li class="nav-item">\r\n                        <a class="nav-link" data-toggle="tab" role="tab" href="#roles">Roles</a>\r\n                    </li>\r\n                    <li class="nav-item">\r\n                        <a class="nav-link" data-toggle="tab" role="tab" href="#password">Password</a>\r\n                    </li>\r\n                </ul>\r\n                <div class="tab-content" id="myTabContent">\r\n                    <div class="tab-pane fade show active" id="userinfo" role="tabpanel" aria-labelledby="home-tab">\r\n                        <compose view="./userInfo.html"></compose>\r\n                    </div>\r\n                    <div class="tab-pane fade" id="address" role="tabpanel" aria-labelledby="home-tab">\r\n                        <compose view="./address.html"></compose>\r\n                    </div>\r\n                    <div class="tab-pane fade" id="roles" role="tabpanel" aria-labelledby="home-tab">\r\n                        <compose view="./roles.html"></compose>\r\n                    </div>\r\n                    <div class="tab-pane fade" id="password" role="tabpanel" aria-labelledby="home-tab">\r\n                        <compose view="./password.html"></compose>\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col">\r\n                        <ul if.bind="controller.errors.length > 0">\r\n                            <li repeat.for="error of controller.errors">${error}</li>\r\n                        </ul>\r\n                    </div>\r\n                    <div class="col">\r\n                        <ul if.bind="validationErrors.length > 0">\r\n                            <li repeat.for="error of validationErrors">${error}</li>\r\n                        </ul>\r\n                    </div>                    \r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>'},"modules/admin/Customers/components/peopleTable.html":function(e,t,r){e.exports='<template>\r\n    <div class="card" style="top:-110px;">\r\n        <div class="card-body">\r\n            <div class=\'col-lg-10 offset-lg-1 bottomMargin\'>\r\n\r\n                <compose view="../../../../resources/elements/table-nav-bar.html"></compose>\r\n\r\n                <table class="table table-striped"\r\n                    aurelia-table="data.bind: people.peopleArray; display-data.bind: $displayData; filters.bind: filters; current-page.bind: currentPage; page-size.bind: pageSize; total-items.bind: totalItems;">\r\n                    <thead>\r\n                        <tr>\r\n                            <compose view=\'./peopleTableToolbar.html\'></compose>\r\n                        </tr>\r\n                        <tr>\r\n                            <th colspan="2">\r\n                                <div class=\'col\'>\r\n                                    <div class="form-group">\r\n                                        <input type="text" value.bind="filters[0].value"\r\n                                            placeholder="Filter name, institution, email and role" class="form-control"\r\n                                            id=\'filterField\' />\r\n                                    </div>\r\n                                </div>\r\n                            </th>\r\n                            <th></th>\r\n                            <th></th>\r\n\r\n                            <th colspan="2">\r\n                                <div class=\'col\'>\r\n                                    <div class="form-group">\r\n                                        <select value.bind="filters[1].value" class="form-control " id="personStatus">\r\n                                            <option value=""></option>\r\n                                            <option repeat.for=\'status of config.USER_STATUS\'\r\n                                                model.bind=\'status.code\'>\r\n                                                ${status.description}</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </th>\r\n                        </tr>\r\n\r\n                        <tr>\r\n                            <th style="width:10rem;" aut-sort="key: firstName">First Name</th>\r\n                            <th style="width:10rem;" aut-sort="key: lastName">Last Name</th>\r\n                            <th style="width:20rem;" aut-sort="key: institutionId.name">Institution</th>\r\n                            <th style="width:15rem;" aut-sort="key: email">E-mail</th>\r\n                            <th style="width:15rem;">Phone</th>\r\n                            <th style="width:12rem;">Role</th>\r\n                            <th style="width:15rem;">Status</th>\r\n                        </tr>\r\n                    </thead>\r\n                    \r\n                    <tbody>\r\n                        <tr repeat.for="person of $displayData" >\r\n                            <td click.delegate="edit(person)" style="width:10rem;" >${person.firstName}</td>\r\n                            <td click.delegate="edit(person)" style="width:10rem;" >${person.lastName}</td>\r\n                            <td click.delegate="edit(person)" style="width:20rem;" >${person.institutionId.name}</td>\r\n                            <td> <a href="mailto:${person.email}" style="width:20rem;" ><i class="fa fa-paper-plane" aria-hidden="true"></i></a> ${person.email}</td>\r\n                            <td click.delegate="edit(person)" style="width:15rem;">\r\n                                ${person.phone | phoneNumber:config.PHONE_MASKS:person.country:person.ext}<br>\r\n                                ${person.mobile | phoneNumber:config.PHONE_MASKS:person.country}\r\n                            </td>\r\n                            <td click.delegate="edit(person)" style="width:12rem;">${person.roles}</td>\r\n                            <td style="width:15rem;">${person.personStatus |\r\n                                lookupValue:is4ua.personStatusArray:"code":"description"}\r\n                                <span click.delegate="toggleStatus(person._id, person.personStatus)"\r\n                                innerhtml="${person.personStatus | activateButton}"></span>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n               \r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    </div>\r\n</template>'},"modules/admin/Customers/components/peopleTableToolbar.html":function(e,t){e.exports='<template>\r\n    <td colspan=\'7\'>\r\n        <span click.delegate="refresh()" class="smallMarginRight" bootstrap-tooltip\r\n            data-toggle="tooltip" data-placement="bottom" title=""\r\n            data-original-title="Refresh"><i class="fa fa-refresh"\r\n                aria-hidden="true"></i></span>\r\n        <span click.delegate="new()" class="smallMarginRight" bootstrap-tooltip\r\n            data-toggle="tooltip" data-placement="bottom" title="" data-original-title="New"><i\r\n                class="fa fa-plus" aria-hidden="true"></i></span>\r\n        <span click.delegate="downloadInstExcel()" class="smallMarginRight" bootstrap-tooltip\r\n            data-toggle="tooltip" data-placement="bottom" title=""\r\n            data-original-title="Export to Excel"><i class="fa fa-download"\r\n                aria-hidden="true"></i></span>\r\n        <span click.delegate="clearFilters()" class="smallMarginRight" bootstrap-tooltip\r\n            data-toggle="tooltip" data-placement="bottom" title=""\r\n            data-original-title="Clear Filters"><i class="fa fa-filter"\r\n                aria-hidden="true"></i></span>\r\n    </td>\r\n</template>'},"modules/admin/Customers/components/roles.html":function(e,t){e.exports='<template>\r\n  <div class="card">\r\n    <div class="card-header">\r\n      <h4 class="card-title">Assign Roles</h4>\r\n    </div>\r\n    <div class="card-body">\r\n      <form>\r\n        <div class="row">\r\n          <div class="col">\r\n            <label>Roles</label>\r\n            <div class="card overFlow" style="height:400px;">\r\n              <ul class="list-group list-group-flush">\r\n                <button href="#" click.trigger="selectRole($event, role)" repeat.for="role of filteredArray"\r\n                  type="button" class="list-group-item">${role.label}</a>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n          <div class="col">\r\n            <label>Assigned Roles</label>\r\n            <div class="card overFlow" style="height:400px;">\r\n              <ul class="list-group">\r\n                <button click.trigger="removeRole($index, role)" repeat.for="role of people.selectedPerson.roles"\r\n                  type="button" class="list-group-item">${role | lookupValue:config.ROLES:\'role\':\'label\'}</button>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </template>'},"modules/admin/Customers/components/selectionForm.html":function(e,t,r){e.exports='<template>\r\n\t<div class=" list-group-item toolbar" style="top:-110px;">\r\n\t\t<span click.delegate="_clearFilters()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n\t\t\tdata-placement="bottom" title="" data-original-title="Clear Filters"><i class="fa fa-filter"\r\n\t\t\t\taria-hidden="true"></i></span>\r\n\t\t<span click.delegate="composeEmail()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n\t\t\tdata-placement="bottom" title="" data-original-title="Send"><i class="fa fa-paper-plane fa-lg fa-border"\r\n\t\t\t\taria-hidden="true"></i></span>\r\n\t</div>\r\n\t<div if.bind="composeEmailPanel" class="card" style="top:-110px;">\r\n\t\t<div class="card-body">\r\n\t\t\t<compose view="./composeEmail.html"></compose>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="card" style="top:-110px;">\r\n\t\t<div class="card-header">\r\n\t\t\t<h4 class="card-title">Filters</h4>\r\n\t\t</div>\r\n\t\t<div class="card-body">\r\n\t\t\t<compose view="./selectionPanel.html"></compose>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="card"  style="top:-110px;">\r\n\t\t<div class="card-header">\r\n\t\t\t<h4 class="card-title">Email Pool</h4>\r\n\t\t</div>\r\n\t\t<div class="card-body">\r\n\t\t\t<compose view="./emailTable.html"></compose>\r\n\t\t</div>\r\n\t</div>\r\n</template>'},"modules/admin/Customers/components/selectionPanel.html":function(e,t){e.exports='<template>\r\n      <div class="row">\r\n        <div class="col-lg-2">\r\n            <label class="control-label hideOnPhone">Customer</label>\r\n            <input value.bind="filters[0].value" id="nameFilter" class="form-control" />\r\n          </div>\r\n          <div class="col-lg-2">\r\n            <label class="control-labelhideOnPhone">Status</label>\r\n            <select id="statusFilter" class="form-control" value.bind="filters[1].value" id="personStatus">\r\n              <option value=""></option>\r\n              <option repeat.for=\'item of is4ua.personStatusArray\' value=\'${item.code}\'>${item.description}</option>\r\n            </select>\r\n        </div>\r\n        <div class="col-lg-2">\r\n            <label>Include Roles</label>\r\n            <select class="form-control selectpicker" id="includeRoles" multiple data-style="btn btn-link"\r\n              change.delegate="rolesFilter()" value.bind="roleIncludeFilterValue">\r\n              <option repeat.for="role of config.ROLES" model.bind="role.role">${role.label}</option>\r\n            </select>\r\n        </div>\r\n        <div class="col-lg-2">\r\n            <label>Exclude Roles</label>\r\n            <select class="form-control selectpicker" multiple data-style="btn btn-link"\r\n              value.bind="roleExcludeFilterValue" change.delegate="rolesFilter()">\r\n              <option repeat.for="role of config.ROLES" model.bind="role.role">${role.label}</option>\r\n            </select>\r\n        </div>\r\n        <div class="col-lg-2">\r\n            <label class="control-label hideOnPhone">Institution</label>\r\n            <input value.bind="filters[4].value" class="form-control" />\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-lg-2 topMargin">\r\n          <label class="control-label hideOnPhone">Institution Type</label>\r\n          <select value.bind="institutionTypeFilter" class="form-control selectpicker" data-style="btn btn-link">\r\n            <option value=""></option>\r\n            <option repeat.for="institution of is4ua.institutionTypes" value="${institution.code}"> ${institution.description}</option>\r\n          </select>\r\n        </div>\r\n      \r\n        <div class="col-lg-2" style="margin-top: 55px;">\r\n          <select class="form-control selectpicker" multiple data-style="btn btn-link" value.bind="memberTypesFilter" >\r\n          <option repeat.for="institution of is4ua.memberTypes" model.bind="institution.code">${institution.description}</option>\r\n        </select>\r\n        </div>\r\n         \r\n        <div class="col-lg-2 topMargin">\r\n          <label class="control-label hideOnPhone">Region</label>\r\n          <input value.bind="filters[2].value" class="form-control" />\r\n        </div>\r\n        <div class="col-lg-2 topMargin">\r\n          <label class="control-label hideOnPhone">Country</label>\r\n          <input value.bind="filters[3].value" class="form-control" />\r\n        </div> \r\n       \r\n      </div> \r\n</template>'},"modules/admin/Customers/components/userInfo.html":function(e,t){e.exports='<template>\r\n    <div class="card">\r\n        <div class="card-header">\r\n            <h4 class="card-title">Person Information</h4>\r\n        </div>\r\n        <div class="card-body">\r\n            <form>\r\n                <div class="row">\r\n                    <div class="col">\r\n                        <div class="form-group">\r\n                            <label for="firstName">First Name *</label>\r\n                            <input value.bind="people.selectedPerson.firstName & validateOnChange" type="text"\r\n                                class="form-control" id="firstName" aria-describedby="firstNameHelp">\r\n                        </div>\r\n                    </div>\r\n                    <div class="col">\r\n                        <div class="form-group">\r\n                            <label for="middleName">Middle Name</label>\r\n                            <input value.bind="people.selectedPerson.middleName" type="text" class="form-control"\r\n                                id="middleName" aria-describedby="middleNameHelp">\r\n                        </div>\r\n                    </div>\r\n                    <div class="col">\r\n                        <div class="form-group">\r\n                            <label for="lastName">Last Name *</label>\r\n                            <input value.bind="people.selectedPerson.lastName & validateOnChange" type="text"\r\n                                class="form-control" id="lastName" aria-describedby="lastNameHelp">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="row topMargin">\r\n                    <div class="col">\r\n                        <div class="form-group">\r\n                            <label for="nickName">Preferred Name</label>\r\n                            <input value.bind="people.selectedPerson.nickName" type="text" class="form-control"\r\n                                id="nickName">\r\n                        </div>\r\n                    </div>\r\n                    <div class="col">\r\n                        <div class="form-group">\r\n                            <label for="editStatus">Status *</label>\r\n                            <select value.bind="people.selectedPerson.personStatus & validateOnChange" id="editStatus"\r\n                                class="form-control selectpicker" data-style="btn btn-link">\r\n                                <option value="">Select an option</option>\r\n                                <option repeat.for=\'status of is4ua.personStatusArray\' value="${status.code}">\r\n                                    ${status.description}</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col">\r\n                        <div class="form-group">\r\n                            <label for="editMobile">Mobile</label>\r\n                            <input if.bind="phoneMask" class="form-control" id="editMobile"\r\n                                masked="value.bind: people.selectedPerson.mobile  & validateOnChange; mask.bind: phoneMask; placeholder: *" />\r\n                            <input if.bind="!phoneMask" class="form-control" id="editMobile"\r\n                                value.bind="people.selectedPerson.mobile" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="row topMargin">\r\n                    <div class="col">\r\n                        <div class="form-group">\r\n                            <label for="editPhone">Phone *</label>\r\n                            <input if.bind="phoneMask" class="form-control" id="editPhone"\r\n                                masked="value.bind: people.selectedPerson.phone  & validateOnChange; mask.bind: phoneMask; placeholder: *" />\r\n                            <input if.bind="!phoneMask" class="form-control" id="editPhone"\r\n                                value.bind="people.selectedPerson.phone  & validateOnChange" />\r\n                        </div>\r\n                    </div>\r\n                    <div class="col">\r\n                        <div class="form-group">\r\n                            <label for="editExtension">Extension</label>\r\n                            <input value.bind="people.selectedPerson.ext" type="text" class="form-control"\r\n                                id="editExtension" aria-describedby="extHelp">\r\n                        </div>\r\n                    </div>\r\n                    <div class="col">\r\n                        <div class="form-group">\r\n                            <label for="editEmail">Email *</label>\r\n                            <input value.bind="people.selectedPerson.email & validateOnChange" type="text"\r\n                                class="form-control" id="editEmail" aria-describedby="emailHelp">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="row topMargin">\r\n                    <div class="col">\r\n                        <div class="form-group">\r\n                            <label for="editPhone">Institution *</label>\r\n                            <select value.two-way="people.selectedPerson.institutionId  & validateOnChange"\r\n                                id="editInstitution" class="form-control selectpicker" data-style="btn btn-link">\r\n                                <option value="">Select an option</option>\r\n                                <option repeat.for="institution of people.institutionsArray" value="${institution._id}">\r\n                                    ${institution.name}</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col">\r\n                        <div class="form-group">\r\n                            <label for="editSpecialization">Specialization</label>\r\n                            <select value.two-way="people.selectedPerson.personSpecialization" id="editSpecialization"\r\n                                class="form-control selectpicker" data-style="btn btn-link">\r\n                                <option value="">Select an option</option>\r\n                                <option repeat.for="name of is4ua.specialArray" value="${name.code}">${name.description}\r\n                                </option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col">\r\n                        <div class="form-group" ">\r\n                            <label for="editDepartment">Department</label>\r\n                            <select value.bind="people.selectedPerson.departmentCategory" id="editDepartment"\r\n                                class="form-control selectpicker" data-style="btn btn-link">\r\n                                <option value="">Select an option</option>\r\n                                <option repeat.for="name of is4ua.deptArray" value="${name.code}">${name.description}\r\n                                </option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n</template>'},"modules/admin/Customers/customers":function(e,t,r){"use strict";r.r(t),r.d(t,"Customers",(function(){return o}));var n,i=r("aurelia-framework"),a=r("4ysu"),o=Object(i.inject)(a.c)(n=function(){function e(e){this.router=e,this.pageTitle="Customers"}return e.prototype.configureRouter=function(e,t){e.map([{route:["","editPeople"],moduleId:"./editPeople",settings:{auth:!0,roles:[]},nav:!0,name:"editPeople",title:"People"},{route:"editInstitutions",moduleId:"./editInstitutions",settings:{auth:!0,roles:[]},nav:!0,name:"editInstitutions",title:"Institutions"},{route:"bulkEmails",moduleId:"./bulkEmails",settings:{auth:!0,roles:[]},nav:!0,name:"bulkEmails",title:"Bulk Emails"}]),this.router=t},e}())||n},"modules/admin/Customers/customers.html":function(e,t,r){e.exports='<template>\r\n    <compose view="../../../resources/elements/top-bar.html"></compose>\r\n    <div class="content" style="margin-top:200px;">\r\n        <div class="container-fluid">\r\n            <router-view></router-view>\r\n        </div>\r\n    </div>\r\n</template>'},"modules/admin/Customers/editInstitutions":function(e,t,r){"use strict";r.r(t),r.d(t,"EditInstitutions",(function(){return f}));var n,i=r("aurelia-framework"),a=r("aurelia-validation"),o=r("aurelia-dialog"),s=r("resources/dialogs/confirm-dialog"),l=r("resources/dialogs/message-dialog"),d=r("JHVQ"),c=r("9hG6"),u=r("+bNA"),p=r("B6RA"),m=r("nxgs");function h(e,t,r,n,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){h(a,n,i,o,s,"next",e)}function s(e){h(a,n,i,o,s,"throw",e)}o(void 0)}))}}var f=Object(i.inject)(a.ValidationControllerFactory,d.a,c.a,u.a,p.a,m.a,o.DialogService)(n=function(){function e(e,t,r,n,i,a,o){this.pageSize=200,this.controller=e.createForCurrentScope(),this.people=t,this.is4ua=r,this.config=n,this.store=i,this.utils=a,this.dialogService=o,this.configParameters=this.store.getConfig(),this.filters=[{value:"",keys:["name","country","region"]},{value:"",keys:["institutionType"]},{value:"",keys:["institutionStatus"]}],this.view="table"}var t=e.prototype;return t.activate=function(){var e=v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.people.getInstitutionArray("?order=name"),this.is4ua.loadIs4ua()]);case 2:e.sent,this.timeZones=this.store.getter("");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.attached=function(){$("#filterField").focus(),$('[data-toggle="tooltip"]').tooltip(),$(".selectpicker").selectpicker()},t.refresh=function(){var e=v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.clearFilters(),$("#loading").show(),e.next=4,this.people.getInstitutionArray("?order=lastName");case 4:$("#loading").hide();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.new=function(){this.people.selectInstitution(),this.people.getInstitutionPeople(-1),this.createValidationRules(),this.view="form"},t.edit=function(){var e=v(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.selectedInstitutionId=t._id,e.next=3,this.people.getInstitution(t._id);case 3:this.people.getInstitutionPeople("?filter=institutionId|eq|"+this.people.selectedInstitution._id),this.createValidationRules(),this.view="form";case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.createValidationRules=function(){a.validationMessages.required="You must enter ${$displayName}.",a.ValidationRules.ensure("name").displayName("a name").required().ensure("institutionType").displayName("an institution type").required().ensure("country").displayName("a country").required().ensure("institutionStatus").displayName("an Status").required().on(this.people.selectedInstitution)},t.save=function(){var e=v(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.controller.validate().then((function(e){if(e.valid)t.saveInstitution();else{t.dialog.open({viewModel:l.a,model:{message:"You must fix the errors before you can save the system?",title:"Fix Errors",options:["Ok"]},lock:!1}).whenClosed((function(e){}))}}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.saveInstitution=function(){var e=v(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.people.saveInstitution();case 2:(t=e.sent).error?this.utils.showNotification("There was a problem saving the institution","error"):(this.utils.showNotification(t.name+" was updated"),this.refresh()),this._cleanUp();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.delete=function(){var e=v(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Are you sure you want to delete the institution?","Confirm Delete",t={},this.dialog.open({viewModel:s.a,model:{message:"Are you sure you want to delete the institution?",title:"Confirm Delete",options:t},lock:!1}).whenClosed((function(e){e.wasCancelled?r.goBack():r.deleteInstitution()}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.deleteInstitution=function(){var e=v(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.people.selectedPerson.fullName,e.next=3,this.people.deletePerson();case 3:e.sent.error||(this.utils.showNotification(t+" was deleted"),this.refresh()),this._cleanUp();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.back=function(){var e=this;if(this.people.isInstitutionDirty(this.people.selectedInstitution).length){this.dialog.open({viewModel:s.a,model:{message:"Do you want to save the institution?",title:"Save Instituion",options:{}},lock:!1}).whenClosed((function(t){t.wasCancelled?e.goBack():e.save()}))}else this.goBack()},t.goBack=function(){this.view="table"},t.cancel=function(){this.people.selectInstitutionByID(this.selectedInstitutionId)},t.downloadInstExcel=function(){var e="data:text/csv;charset=utf-8;,Name,City,State,Country,Type,Status\r\n";this.dataTable.baseArray.forEach((function(t){e+=t.name+","+t.city+","+t.region+","+t.country+","+t.institutionType+","+t.institutionStatus,e+="\r\n"}));var t=encodeURI(e),r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download","institutions.csv"),document.body.appendChild(r),r.click()},t.clearFilters=function(){this.filters[0].value="",this.filters[1].value="",this.filters[2].value="",$("#filterField").focus()},t._cleanUp=function(){this.clearFilters(),this.goBack()},e}())||n},"modules/admin/Customers/editInstitutions.html":function(e,t,r){e.exports='<template>\r\n    <div show.bind="view === \'table\'">\r\n        <compose view="./components/institutionsTable.html"></compose>\r\n    </div>\r\n    <div show.bind="view === \'form\'">\r\n        <compose view="./components/institutionsForm.html"></compose>\r\n    </div>\r\n</template>'},"modules/admin/Customers/editPeople":function(e,t,r){"use strict";r.r(t),r.d(t,"EditPeople",(function(){return f}));var n,i=r("aurelia-framework"),a=r("aurelia-validation"),o=r("aurelia-dialog"),s=r("resources/dialogs/confirm-dialog"),l=r("resources/dialogs/message-dialog"),d=r("JHVQ"),c=r("9hG6"),u=r("+bNA"),p=r("B6RA"),m=r("nxgs");function h(e,t,r,n,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){h(a,n,i,o,s,"next",e)}function s(e){h(a,n,i,o,s,"throw",e)}o(void 0)}))}}var f=Object(i.inject)(a.ValidationControllerFactory,d.a,c.a,u.a,p.a,m.a,o.DialogService)(n=function(){function e(e,t,r,n,i,a,o){this.pageSize=200,this.defaultPhoneMask="999-999-9999",this.controller=e.createForCurrentScope(),this.people=t,this.is4ua=r,this.config=n,this.store=i,this.utils=a,this.dialogService=o,this.configParameters=this.store.getConfig(),this.filters=[{value:"",keys:["fullName","institutionId.name","email","roles"]},{value:this.config.ACTIVE_PERSON,keys:["personStatus"]}],this.validationErrors=[],this.view="table"}var t=e.prototype;return t.activate=function(){var e=v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.people.getPeopleArray("?order=lastName"),this.is4ua.loadIs4ua(),this.people.getInstitutionArray("?order=name")]);case 2:e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.attached=function(){$("#filterField").focus(),$('[data-toggle="tooltip"]').tooltip(),$(".selectpicker").selectpicker()},t.refresh=function(){var e=v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.clearFilters(),$("#loading").show(),e.next=4,this.people.getPeopleArray("?order=lastName");case 4:$("#loading").hide();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.new=function(){this.people.selectPerson(),this.createValidationRules(),this.getPhoneMask(),this.view="form"},t.edit=function(){var e=v(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.selectedPersonId=t._id,e.next=3,this.people.getPerson(t._id);case 3:this.createValidationRules(),this.getPhoneMask(),this.filterRoles(),this.view="form";case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.createValidationRules=function(){a.validationMessages.required="You must enter ${$displayName}.",a.ValidationRules.ensure("firstName").displayName("a First Name").required().ensure("lastName").displayName("a Last Name").required().ensure("email").displayName("an eMail").required().ensure("phone").displayName("a Phone Number").required().minLength(10).ensure("mobile").displayName("a mobile Number").minLength(10).ensure("personStatus").displayName("a Status").required().ensure("institutionId").displayName("an institution").required().on(this.people.selectedPerson),a.ValidationRules.ensure("newPassword").displayName("Password").required()},t.save=function(){var e=v(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.controller.validate().then((function(e){if(e.valid)t.savePerson();else{t.dialog.open({viewModel:l.a,model:{message:"You must fix the errors before you can save the system?",title:"Fix Errors",options:["Ok"]},lock:!1}).whenClosed((function(e){}))}}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.savePerson=function(){var e=v(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.localValidation(),0!==this.validationErrors.length){e.next=9;break}return e.next=4,this.people.savePerson();case 4:(t=e.sent).error?this.utils.showNotification("There was a problem saving the person","error"):(this.utils.showNotification(t.firstName+" "+t.lastName+" was updated"),this.refresh()),this._cleanUp(),e.next=13;break;case 9:"You must fix the errors before you can save the system?","Fix Errors",r=["Ok"],this.dialog.open({viewModel:l.a,model:{message:"You must fix the errors before you can save the system?",title:"Fix Errors",options:r},lock:!1}).whenClosed((function(e){}));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.delete=function(){var e=v(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Are you sure you want to delete this person?","Confirm Delete",t={},this.dialog.open({viewModel:s.a,model:{message:"Are you sure you want to delete this person?",title:"Confirm Delete",options:t},lock:!1}).whenClosed((function(e){e.wasCancelled?r.goBack():r.deletePersion()}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.deletePersion=function(){var e=v(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.people.selectedPerson.fullName,e.next=3,this.people.deletePerson();case 3:e.sent.error||(this.utils.showNotification(t+" was deleted"),this.refresh()),this._cleanUp();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.back=function(){var e=this;if(this.people.isPersonDirty(this.people.selectedPerson).length){this.dialog.open({viewModel:s.a,model:{message:"Do you want to save the system?",title:"Save System",options:{}},lock:!1}).whenClosed((function(t){t.wasCancelled?e.goBack():e.save()}))}else this.goBack()},t.goBack=function(){this.view="table"},t.cancel=function(){this.people.selectedPersonById(this.people.selectedPerson._id)},t.downloadInstExcel=function(){var e="data:text/csv;charset=utf-8;,First Name,Last Name,Email,Phone,Institution,Country,Region,Status,Roles\r\n";this.dataTable.baseArray.forEach((function(t){var r="01"==t.personStatus?"Active":"Inactive";e+=t.firstName+","+t.lastName.replace(","," ")+","+t.email+","+t.phone+","+t.institutionId.name.replace(","," ")+","+t.country+","+t.region+","+r+","+t.roles.join(":"),e+="\r\n"}));var t=encodeURI(e),r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download","people.csv"),document.body.appendChild(r),r.click()},t.clearFilters=function(){this.filters[0].value="",this.filters[1].value=this.config.ACTIVE_PERSON,$("#filterField").focus()},t._cleanUp=function(){this.institutionId="",this.clearFilters(),this.goBack()},t.localValidation=function(){this.checkDuplicateRecord()},t.checkDuplicateRecord=function(){for(var e=!1,t=0;t<this.people.peopleArray.length;t++)this.people.peopleArray[t].firstName.trim().toUpperCase()===this.people.selectedPerson.firstName.trim().toUpperCase()&&this.people.peopleArray[t].lastName.trim().toUpperCase()===this.people.selectedPerson.lastName.trim().toUpperCase()&&this.people.peopleArray[t].institutionId._id===this.people.selectedPerson.institutionId&&(this.people.selectedPerson._id&&this.people.selectedPerson._id!=this.people.peopleArray[t]._id?e=!0:this.people.selectedPerson._id||(e=!0));this.addValidationError("A person with that name at that institution already exists.",e)},t.checkPasswordBlank=function(){this.newPassword=$("#newPassword").val(),this.addValidationError("You must enter a password.",0===this.newPassword.length)},t.addValidationError=function(e,t){if(t)-1===this.validationErrors.indexOf(e)&&this.validationErrors.push(e);else{var r=this.validationErrors.indexOf(e);r>-1&&this.validationErrors.splice(r,1)}},t.toggleStatus=function(){var e=v(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!r){e.next=7;break}return this.people.selectedPersonById(t),this.people.selectedPerson.personStatus=r===this.config.ACTIVE_PERSON?this.config.INACTIVE_PERSON:this.config.ACTIVE_PERSON,e.next=5,this.people.savePerson();case 5:(n=e.sent).error?this.utils.showNotification("There was a problem saving the person","error"):this.utils.showNotification(n.firstName+" "+n.lastName+" was updated");case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),t.copyInstAddress=function(){var e=v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.people.selectedPerson.institutionId){e.next=11;break}return e.next=3,this.people.getInstitution(this.people.selectedPerson.institutionId);case 3:this.people.selectedPerson.address1=this.people.selectedInstitution.address1,this.people.selectedPerson.address2=this.people.selectedInstitution.address2,this.people.selectedPerson.city=this.people.selectedInstitution.city,this.people.selectedPerson.region=this.people.selectedInstitution.region,this.people.selectedPerson.postalCode=this.people.selectedInstitution.postalCode,this.people.selectedPerson.country=this.people.selectedInstitution.country,this.people.selectedPerson.POBox=this.people.selectedInstitution.POBox,this.getPhoneMask();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getPhoneMask=function(){var e=this;this.phoneMask=this.defaultPhoneMask,setTimeout((function(){for(var t=0;t<e.config.PHONE_MASKS.length;t++)if(e.people.selectedPerson.country===e.config.PHONE_MASKS[t].country){e.phoneMask=e.config.PHONE_MASKS[t].mask;break}}),500)},t.filterRoles=function(){var e=this;this.filteredArray=this.configParameters.ROLES.filter((function(t){return-1===e.people.selectedPerson.roles.indexOf(t.role)})),0===this.filteredArray.length&&this.filteredArray.push({role:"NOROLE",label:"No Roles Remaining"})},t.selectRole=function(e,t){"NOROLE"!==t.role&&(this.people.selectedPerson.roles.push(t.role),this.filterRoles())},t.removeRole=function(e,t){this.people.selectedPerson.roles.splice(e,1),this.filterRoles()},t.cancelEditPassword=function(){this.newPassword="",this.newPassword_repeat="",this.showPassword=!1},t.savePassword=function(){var e=v(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkPasswordBlank(),0!==this.validationErrors.length){e.next=7;break}return t={password:this.newPassword},e.next=5,this.people.updatePassword(t);case 5:e.sent.error||(this.utils.showNotification("The password was updated"),this.newPassword="");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}())||n},"modules/admin/Customers/editPeople.html":function(e,t,r){e.exports='<template>\r\n    \x3c!-- <span id="loading">\r\n        <ul class="bokeh">\r\n            <li></li>\r\n            <li></li>\r\n            <li></li>\r\n        </ul>\r\n    </span> --\x3e\r\n    <div show.bind="view === \'table\'">\r\n        <compose view="./components/peopleTable.html"></compose>\r\n    </div>\r\n    <div show.bind="view === \'form\'">\r\n        <compose view="./components/peopleForm.html"></compose>\r\n    </div>\r\n</template>'}}]);
//# sourceMappingURL=app~f075b844.27cf482614fb69c63b97.bundle.map