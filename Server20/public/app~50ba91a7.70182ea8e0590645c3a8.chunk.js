(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"modules/admin/systems/components/clientForm.html":function(e,t,s){e.exports='<template>\r\n    <div class="card">\r\n        <div class="card-header">\r\n            <h4 class="card-title">Client ${selectedClient.client}</h4>\r\n        </div>\r\n        <div class="card-body">\r\n            <compose view=\'./clientFormToolbar.html\'></compose>\r\n            <div class="bottomMargin topMargin list-group-item leftMargin rightMargin">\r\n               \r\n                \x3c!-- <span click.delegate="saveClient()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip" data-placement="bottom" title=""\r\n                 data-original-title="Save"><i class="fa fa-floppy-o fa-lg fa-border" aria-hidden="true"></i></span> --\x3e\r\n            </div>\r\n            <div class="col">\r\n                <div class="form-group">\r\n                    <label for="firstID">First Allowable ID</label>\r\n                    <input value.bind="selectedClient.firstAllowableID" id="lastID" class="form-control topMargin"\r\n                        placeholder="First Allowable ID" type="number" />\r\n                </div>\r\n            </div>\r\n            <div class="col">\r\n                <div class="form-group">\r\n                    <label for="productID">Product</label>\r\n                    <select class="form-control" value.bind="selectedClient.productId" data-style="btn btn-link">\r\n                        <option value="">Choose a product</option>\r\n                        <option repeat.for="product of products.productsArray" model.bind="product._id">${product.name}\r\n                        </option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div class="col">\r\n                <div class="form-group">\r\n                    <label for="productID">Status</label>\r\n                    <select value.bind="selectedClient.clientStatus" class="form-control" id="status"\r\n                        data-style="btn btn-link">\r\n                        <option value="">Select an option</option>\r\n                        <option repeat.for="name of config.CLIENT_STATUSES" model.bind="name.code">\r\n                            ${name.description}</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>'},"modules/admin/systems/components/clientFormToolbar.html":function(e,t){e.exports='<template>\r\n    <span click.delegate="backToClientTable()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n        data-placement="bottom" title="" data-original-title="Back"><i class="fa fa-arrow-left fa-lg fa-border"\r\n            aria-hidden="true"></i></span>\r\n    <span click.delegate="refreshClient()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n        data-placement="bottom" title="" data-original-title="Refresh Client"><i class="fa fa-refresh"\r\n            aria-hidden="true"></i></span>\r\n    <span click.delegate="toggleSandBox()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n        data-placement="bottom" title="" data-original-title="Toggle Sandbox"><i class="fa fa-users"\r\n            aria-hidden="true"></i></span>\r\n    <span click.delegate="deleteClient()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n        data-placement="bottom" title="" data-original-title="Delete Client"><i class="fa fa-trash"\r\n            aria-hidden="true"></i></span>\r\n</template>'},"modules/admin/systems/components/clientTable.html":function(e,t,s){e.exports='<template>\r\n    <div class="card">\r\n        <div class="card-body">\r\n            <div class=\'col-lg-10 offset-lg-1 bottomMargin\'>\r\n                <table class="table table-striped"\r\n                    aurelia-table="data.bind: systems.selectedSystem.clients; display-data.bind: $displayData; current-page.bind: currentPage; page-size.bind: pageSize; total-items.bind: totalItems;">\r\n                    \x3c!-- filters.bind: filters; --\x3e\r\n                    <thead>\r\n                        <tr>\r\n                            <compose view=\'./clientTableToolbar.html\'></compose>\r\n                            <compose if.bind="showClientParametersForm" view="./refreshClientForm.html"></compose>\r\n                        </tr>\r\n                        <tr>\r\n                            <th style="width:10rem;" aut-sort="key: client">Client</th>\r\n                            <th style="width:15rem;" aut-sort="key: description">Product</th>\r\n                            <th style="width:25rem;">Assignments</th>\r\n                            <th style="width:20rem;" aut-sort="key: instance">Status</th>\r\n                        </tr>\r\n                    </thead>\r\n                    \r\n                    <tbody>\r\n                        <tr repeat.for="client of $displayData" >\r\n                            <td click.delegate="editClient(client, $index)" style="width:10rem;" >${client.client}</td>\r\n                            <td click.delegate="editClient(client, $index)" style="width:20rem;" >${client.productId |\r\n                                lookupValue:products.productsArray:"_id":"name"}</td>\r\n                            <td click.delegate="editClient(client, $index)" style="width:20rem;" >${client.assignments.length}</td>\r\n                            <td click.delegate="editClient(client, $index)" style="width:20rem;" > ${client.clientStatus |\r\n                                lookupValue:config.CLIENT_STATUSES:"code":"description"}</td>                           \r\n                        </tr>\r\n                    </tbody>\r\n               \r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    </div>\r\n</template>'},"modules/admin/systems/components/clientTableToolbar.html":function(e,t){e.exports='<template>\r\n    <span click.delegate="editClientsButton()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n    data-placement="bottom" title="" data-original-title="Edit Client List"><i class="fa fa-pencil fa-lg fa-border"\r\n        aria-hidden="true"></i></span>\r\n    <span if.bind="showClientParametersForm" click.delegate="generateClients()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n        data-placement="bottom" title="" data-original-title="Add Clients"><i class="fa fa-plus fa-lg fa-border"\r\n            aria-hidden="true"></i></span>\r\n    <span click.delegate="refreshAllClients()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n        data-placement="bottom" title="" data-original-title="Refresh Clients"><i\r\n            class="fa fa-refresh fa-lg fa-border text-danger" aria-hidden="true"></i></span>\r\n    <span click.delegate="deleteAllClients()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n        data-placement="bottom" title="" data-original-title="Delete Clients"><i\r\n            class="fa fa-trash-o fa-lg fa-border text-danger" aria-hidden="true"></i></span>\r\n    <span if.bind="showClientParametersForm" click.trigger="updateAllProducts()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n        data-placement="bottom" title="" data-original-title="Update Products"><i\r\n            class="fa fa-product-hunt fa-lg fa-border" aria-hidden="true"></i></span>\r\n    <span click.delegate="assignmentDetails()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n        data-placement="bottom" title="" data-original-title="Details"><i class="fa fa-eye fa-lg fa-border"\r\n            aria-hidden="true"></i></span>\r\n</template>'},"modules/admin/systems/components/productAssignments.html":function(e,t){e.exports='<template>\r\n    <div class="card">\r\n        <div class="card-header">\r\n            <h4 class="card-title">Assignment Information</h4>\r\n        </div>\r\n        <div class="card-body">\r\n            <div class="row">\r\n                <div class="col">\r\n                    <div class="form-group">\r\n                        <label for="editStudentId" class="control-label hideOnPhone">Student ID Prefix</label>\r\n                        <input value.bind="products.selectedObject.defaultStudentIdPrefix" id="editStudentId"\r\n                            class="form-control " placeholder="Student ID Prefix" type="text" />\r\n                    </div>\r\n                </div>\r\n                <div class="col">\r\n                    <div class="form-group">\r\n                        <label for="editFacultyId" class="control-label">Faculty ID Prefix</label>\r\n                        <input value.bind="products.selectedObject.defaultFacultyIdPrefix" id="editFacultyId"\r\n                            class="form-control " placeholder="Faculty ID Prefix" type="text" />\r\n                    </div>\r\n                </div>\r\n                <div class="col">\r\n                    <div class="form=group">\r\n                        <h4>Systems assigned to this product: ${products.selectedObject.systems | systemList}\r\n                        </h4>\r\n                        <h6>To change the systems assigned to a product, create clients on the Systems page</h6>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n</template>'},"modules/admin/systems/components/productInfo.html":function(e,t,s){e.exports='<template>\r\n    <div class="card">\r\n        <div class="card-header">\r\n            <h4 class="card-title">Product Information</h4>\r\n        </div>\r\n        <div class="card-body">\r\n            <div class="row">\r\n                <div class="col">\r\n                    <div class="row">\r\n                        <div class="col">\r\n                            <div class="form-group">\r\n                                <div class="checkbox">\r\n                                    <label>\r\n                                        <input checked.bind="products.selectedObject.active" type="checkbox"> Active\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col">\r\n                            <div class="form-group">\r\n                                <div class="checkbox">\r\n                                    <label>\r\n                                        <input checked.bind="products.selectedObject.apj" type="checkbox"> APJ\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="col">\r\n                    <div class="form-group">\r\n                        <label for="sid">Name *</label>\r\n                        <input value.bind="products.selectedObject.name & validateOnChange" type="text"\r\n                            class="form-control" id="name" aria-describedby="nameHelp">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <compose view="./productAssignments.html"></compose>\r\n    </div>\r\n</template>'},"modules/admin/systems/components/productsForm.html":function(e,t,s){e.exports='<template>\r\n    <div class="card positionUnderToolbar">\r\n        <div class="card-body">\r\n            <div class="list-group-item toolbar">\r\n                <span click.delegate="back()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Back"><i\r\n                        class="fa fa-arrow-left fa-lg fa-border" aria-hidden="true"></i></span>\r\n                <span click.delegate="save()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Save"><i\r\n                        class="fa fa-floppy-o fa-lg fa-border" aria-hidden="true"></i></span>\r\n                <span click.delegate="cancel()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Cancel Changes"><i\r\n                        class="fa fa-ban fa-lg fa-border" aria-hidden="true"></i></span>\r\n                <span click.delegate="delete()" show.bind="products.selectedProduct._id" class="smallMarginRight"\r\n                    bootstrap-tooltip data-toggle="tooltip" data-placement="bottom" title=""\r\n                    data-original-title="Delete"><i class="fa fa-trash fa-lg fa-border text-danger"\r\n                        aria-hidden="true"></i></span>\r\n            </div>\r\n            <div class=\'col-lg-10 bottomMargin topMargin\'>\r\n                <ul class="nav nav-pills bottomMargin">\r\n                    <li class="nav-item">\r\n                        <a class="nav-link active" data-toggle="tab" role="tab" href="#productInfo">Product Info</a>\r\n                    </li>\r\n                    <li class="nav-item">\r\n                        <a class="nav-link" data-toggle="tab" role="tab" href="#systems">Systems</a>\r\n                    </li>\r\n                    <li class="nav-item">\r\n                        <a class="nav-link" data-toggle="tab" role="tab" href="#documents">Documents</a>\r\n                    </li>\r\n                    <li class="nav-item">\r\n                        <a class="nav-link" data-toggle="tab" role="tab" href="#notes">Notes</a>\r\n                    </li>\r\n                </ul>\r\n                <div class="tab-content" id="myTabContent">\r\n                    <div class="tab-pane fade show active" id="productInfo" role="tabpanel" aria-labelledby="home-tab">\r\n                        <compose view="./productInfo.html"></compose>\r\n                    </div>\r\n                    <div class="tab-pane fade" id="systems" role="tabpanel" aria-labelledby="home-tab">\r\n                        <compose view="./systems.html"></compose>\r\n                    </div>\r\n                    <div class="tab-pane fade" id="documents" role="tabpanel" aria-labelledby="home-tab">\r\n                        Documents\r\n                    </div>\r\n                    <div class="tab-pane fade" id="notes" role="tabpanel" aria-labelledby="home-tab">\r\n                        Notes\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col">\r\n                        <div if.bind="controller.errors.length > 0" class="alert alert-danger topMargin" role="alert">\r\n                            <ul class="list-group">\r\n                                <li repeat.for="error of controller.errors" class="list-group-item">\r\n                                    ${error}</li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n</template>'},"modules/admin/systems/components/productsTable.html":function(e,t,s){e.exports='<template>\r\n    <div class="card" style="top:-110px;">\r\n        <div class="card-body">\r\n            <div class=\'col-lg-10 offset-lg-1 bottomMargin\'>\r\n\r\n                <compose view="../../../../resources/elements/table-nav-bar.html"></compose>\r\n\r\n                <table class="table table-striped"\r\n                    aurelia-table="data.bind: products.productsArray; display-data.bind: $displayData; filters.bind: filters; current-page.bind: currentPage; page-size.bind: pageSize; total-items.bind: totalItems;">\r\n                    <thead>\r\n                        <tr>\r\n                            <compose view=\'./systemsTableToolbar.html\'></compose>\r\n                        </tr>\r\n                        <tr>\r\n                            <th>\r\n                                <div class=\'col\'>\r\n                                    <div class="form-group">\r\n                                        <input type="text" value.bind="filters[0].value"\r\n                                            placeholder="Filter Name and Systems" class="form-control"\r\n                                            id=\'filterField\' />\r\n                                    </div>\r\n                                </div>\r\n                            </th>\r\n                           \r\n                            <th></th>\r\n\r\n                            <th colspan="2">\r\n                                <div class=\'col\'>\r\n                                        <select value.bind="filters[1].value" class="form-control" id="personStatus" data-style="btn btn-link">\r\n                                            <option value=true>Active</option>\r\n                                            <option value=false>Inactive</option>\r\n                                        </select>\r\n                                </div>\r\n\r\n                            </th>\r\n                        </tr>\r\n\r\n                        <tr>\r\n                            <th style="width:30rem;" aut-sort="key: name">Name</th>\r\n                            <th style="width:20rem;" aut-sort="key: systemList">Systems</th>\r\n                            <th style="width:20rem;" >Status</th>\r\n                        </tr>\r\n                    </thead>\r\n                    \r\n                    <tbody>\r\n                        <tr repeat.for="product of $displayData" >\r\n                            <td click.delegate="edit(product)" style="width:30rem;" >${product.name}</td>\r\n                            <td click.delegate="edit(product)" style="width:20rem;" >${product.systemList}</td>\r\n                            <td click.delegate="edit(product)" style="width:15rem;">${product.active | translateStatus}\r\n                        </tr>\r\n                    </tbody>\r\n               \r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    </div>\r\n</template>'},"modules/admin/systems/components/refreshClientForm.html":function(e,t){e.exports='<template>\r\n    <div class="card">\r\n        <div class="card-body">\r\n            <div class="row">\r\n                <div class="col-1">\r\n                    <label>First</label>\r\n                    <input value.bind="editFirstClient" id="editFirstClient" placeholder="Start"\r\n                        class="form-control input-sm" type="number" />\r\n                </div>\r\n                <div class="col-1">\r\n                    <label>Last</label>\r\n                    <input value.bind="editLastClient" id="editLastClient" placeholder="End"\r\n                        class="form-control input-sm" type="number" />\r\n                </div>\r\n                <div class="col ">\r\n                    <label>IDs Available</label>\r\n                    <input value.bind="idsAvailable" id="editClientIdsAvailable" placeholder="IDS Available"\r\n                        class="form-control input-sm" type="number" />\r\n                </div>\r\n                <div class="col">\r\n                    <label>Status</label>\r\n                    <select value.bind="editClientStatus" class="form-control" data-title="Single Select"\r\n                        data-style="btn-default btn-block" data-menu-style="dropdown-blue">\r\n                        <option repeat.for="status of config.CLIENT_STATUSES" value="${status.code}">\r\n                            ${status.description}\r\n                        </option>\r\n                    </select>\r\n                </div>\r\n                <div class="col">\r\n                    <label>Client Interval</label>\r\n                    <input value.bind="clientInterval" id="clientInterval" placeholder="Interval"\r\n                        class="form-control input-sm" type="number" />\r\n                </div>\r\n                <div class="col">\r\n                    <label>Product</label>\r\n                    <select class="form-control col-lg-8" value.bind="selectedProduct">\r\n                        <option value="">Products</option>\r\n                        <option repeat.for="product of products.productsArray" model.bind="product._id">${product.name}\r\n                        </option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n        </div>\r\n</template>'},"modules/admin/systems/components/sessionConfigTable.html":function(e,t){e.exports='<template>\r\n    <div class="card" style="top:-110px;">\r\n        <div class="card-body">\r\n            <div class="list-group-item toolbar">\r\n                <span click.delegate="backConfig()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Back"><i\r\n                        class="fa fa-arrow-left fa-lg fa-border" aria-hidden="true"></i></span>\r\n                <span click.delegate="saveConfig()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Save"><i\r\n                        class="fa fa-floppy-o fa-lg fa-border" aria-hidden="true"></i></span>\r\n                <span click.delegate="cancelConfig()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Cancel Changes"><i\r\n                        class="fa fa-ban fa-lg fa-border" aria-hidden="true"></i></span>\r\n            </div>\r\n            <div class="row">\r\n               \r\n                    <div class=\'row\'>\r\n                        <div class=\'col-lg-10 offset-1 bottomMargin\'>\r\n                            <div id="no-more-tables">\r\n                                <table id="newsTable" class="table table-striped table-hover cf">\r\n                                    <thead class="cf">\r\n                                        <tr>\r\n                                            <td colspan=\'5\'>\r\n                                                <span click.delegate="refreshConfig()" class="smallMarginRight"\r\n                                                    bootstrap-tooltip data-toggle="tooltip" data-placement="bottom"\r\n                                                    title="" data-original-title="Refresh"><i class="fa fa-refresh"\r\n                                                        aria-hidden="true"></i></span>\r\n\r\n                                            </td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <th style="width:12rem;">Session</th>\r\n                                            <th style="width:12rem;">Start Day</th>\r\n                                            <th style="width:12rem;">Start Month</th>\r\n                                            <th style="width:12rem;">End Day</th>\r\n                                            <th style="width:12rem;">End Month</th>\r\n                                            <th style="width:12rem;">Open Day</th>\r\n                                            <th style="width:12rem;">Open Month</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        <tr repeat.for="item of editSessionConfigArray">\r\n                                            <td><input value.bind="item.session" class="form-control" type="text" />\r\n                                            </td>\r\n                                            <td><input value.bind="item.startDay" class="form-control" type="text" />\r\n                                            </td>\r\n                                            <td><input value.bind="item.startMonth" class="form-control" type="text" />\r\n                                            </td>\r\n                                            <td><input value.bind="item.endDay" class="form-control" type="text" /></td>\r\n                                            <td><input value.bind="item.endMonth" class="form-control" type="text" />\r\n                                            </td>\r\n                                            <td><input value.bind="item.openDay" class="form-control" type="text" />\r\n                                            </td>\r\n                                            <td><input value.bind="item.openMonth" class="form-control" type="text" />\r\n                                            </td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n           \r\n        </div>\r\n    </div>\r\n</template>'},"modules/admin/systems/components/sessionsForm.html":function(e,t){e.exports='<template>\r\n    <div class="card positionUnderToolbar">\r\n        <div class="card-body">\r\n            <div class="list-group-item toolbar">\r\n                <span click.delegate="back()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Back"><i\r\n                        class="fa fa-arrow-left fa-lg fa-border" aria-hidden="true"></i></span>\r\n                <span click.delegate="save()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Save"><i\r\n                        class="fa fa-floppy-o fa-lg fa-border" aria-hidden="true"></i></span>\r\n                <span click.delegate="cancel()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Cancel Changes"><i\r\n                        class="fa fa-ban fa-lg fa-border" aria-hidden="true"></i></span>\r\n            </div>\r\n            <div class="panel panel-info positionUnderToolbar">\r\n                <div class="row">\r\n                    <div class="container">\r\n                        <div class="topMargin">\r\n                            <div class="col-lg-5 topMargin">\r\n                                <label for="editSession" class="form-control-label">Session</label>\r\n                                <select value.bind="sessions.selectedSession.session" class="form-control"\r\n                                    id="editSession">\r\n                                    <option></option>\r\n                                    <option repeat.for="session of sessions.SESSION_PARAMS">${session.session}</option>\r\n                                </select>\r\n                            </div>\r\n                            <div class="col-lg-5 col-lg-offset-1 topMargin">\r\n                                <label for="editYear" class="form-control-label ">Year</label>\r\n                                <input value.bind="sessions.selectedSession.year" id="editYear" class=" form-control"\r\n                                    placeholder="Year" type="text" />\r\n                            </div>\r\n                            <div class="col-lg-5 topMargin">\r\n                                <label class="form-control-label ">Start Date</label>\r\n                                <flat-picker controlid="startDate" config.bind="config"\r\n                                    value.bind="sessions.selectedSession.startDate"></flat-picker>\r\n                            </div>\r\n                            <div class="col-lg-5 col-lg-offset-1 topMargin">\r\n                                <label class="form-control-label ">End Date</label>\r\n                                <flat-picker controlid="endDate" config.bind="config"\r\n                                    value.bind="sessions.selectedSession.endDate"></flat-picker>\r\n                            </div>\r\n                            <div class="col-lg-5 topMargin">\r\n                                <label class="form-control-label ">Requests Open</label>\r\n                                <flat-picker controlid="requestsOpenDate" config.bind="config"\r\n                                    value.bind="sessions.selectedSession.requestsOpenDate"></flat-picker>\r\n                            </div>\r\n                            <div class="col-lg-5 col-lg-offset-1 topMargin">\r\n                                <label for="editStatus" class="form-control-label">Status</label>\r\n                                <select value.bind="sessions.selectedSession.sessionStatus" id="editStatus"\r\n                                    class="form-control" id="editStatus">\r\n                                    <option repeat.for="session of config.SESSION_STATUSES" value.bind="session">\r\n                                        ${session}</option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col">\r\n                    <div if.bind="controller.errors.length > 0" class="alert alert-danger topMargin" role="alert">\r\n                        <ul  class="list-group">\r\n                            <li repeat.for="error of controller.errors" class="list-group-item" >\r\n                                ${error}</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div> \r\n</template>'},"modules/admin/systems/components/sessionsTable.html":function(e,t,s){e.exports='<template>\r\n    <div class="card" style="top:-110px;">\r\n        <div class="card-body">\r\n            <div class=\'col-lg-10 offset-lg-1 bottomMargin\'>\r\n                <compose view="../../../../resources/elements/table-nav-bar.html"></compose>\r\n                <table class="table table-striped"\r\n                    aurelia-table="data.bind: sessions.sessionsArray; display-data.bind: $displayData; filters.bind: filters; current-page.bind: currentPage; page-size.bind: pageSize; total-items.bind: totalItems;">\r\n\r\n                    <thead>\r\n                        <tr>\r\n                            <td colspan=\'7\'>\r\n                                <span click.delegate="refresh()" class="smallMarginRight" bootstrap-tooltip\r\n                                    data-toggle="tooltip" data-placement="bottom" title=""\r\n                                    data-original-title="Refresh"><i class="fa fa-refresh"\r\n                                        aria-hidden="true"></i></span>\r\n                                <span click.delegate="new()" class="smallMarginRight" bootstrap-tooltip\r\n                                    data-toggle="tooltip" data-placement="bottom" title="" data-original-title="New"><i\r\n                                        class="fa fa-plus" aria-hidden="true"></i></span>\r\n                                <span click.delegate="editSessionConfig()" bootstrap-tooltip data-toggle="tooltip"\r\n                                    data-placement="bottom" title="" data-original-title="Config"><i\r\n                                        class="fa fa-pencil" aria-hidden="true"></i></span>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th colspan=\'6\'>\r\n                                <div class="checkbox">\r\n                                    <label style="width:30rem;">\r\n                                        <input checked.bind="filters[0].value" type="checkbox">\r\n                                        Hide inactive sessions\r\n                                    </label>\r\n                                </div>\r\n                            </th>\r\n                        </tr>\r\n                        <tr>\r\n                            <th style="width:10rem;" aut-sort="key: session">Session</th>\r\n                            <th style="width:10rem;" aut-sort="key: startDate">Start Date</th>\r\n                            <th style="width:20rem;" aut-sort="key: endDate">End Date</th>\r\n                            <th style="width:15rem;" aut-sort="key: requestsOpenDate">Requests Open</th>\r\n                            <th style="width:15rem;" aut-sort="key: sortOrder">Sort Order</th>\r\n                            <th style="width:12rem;">Status</th>\r\n                            <th style="width:15rem;"></th>\r\n                        </tr>\r\n                    </thead>\r\n\r\n                    <tbody>\r\n                        <tr repeat.for="session of $displayData">\r\n                            <td click.delegate="edit(session)" style="width:10rem;">${session.session} - ${session.year}\r\n                            </td>\r\n                            <td click.delegate="edit(session)" style="width:15rem;">${session.startDate |\r\n                                dateFormat:config.DATE_FORMAT_TABLE}</td>\r\n                            <td click.delegate="edit(session)" style="width:15rem;">${session.endDate |\r\n                                dateFormat:config.DATE_FORMAT_TABLE}</td>\r\n                            <td click.delegate="edit(session)" style="width:15rem;"> ${session.requestsOpenDate |\r\n                                dateFormat:config.DATE_FORMAT_TABLE}</td>\r\n                            <td style="width:15rem;"><Input change.trigger="saveSortOrder(session)" type="number"\r\n                                    value.bind="session.sortOrder" /></td>\r\n                            <td click.delegate="edit(session)" style="width:12rem;">${session.sessionStatus}</td>\r\n                            <td style="width:15rem;" style="width: 100px"\r\n                                click.trigger="updateStatus($index, session, $event)"\r\n                                innerhtml.bind="session.sessionStatus | sessionStatusButton"></td>\r\n                        </tr>\r\n                    </tbody>\r\n\r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    </div>\r\n</template>'},"modules/admin/systems/components/systemInfo.html":function(e,t){e.exports='<template>\r\n    <div class="card">\r\n        <div class="card-header">\r\n            <h4 class="card-title">System Information</h4>\r\n        </div>\r\n        <div class="card-body">\r\n            <div class="row">\r\n                <div class="col">\r\n                    <div class="row">\r\n                        <div class="col">\r\n                            <div class="form-group">\r\n                                <div class="checkbox">\r\n                                    <label>\r\n                                        <input checked.bind="systems.selectedSystem.active" type="checkbox"> Active\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col">\r\n                            <div class="form-group">\r\n                                <div class="checkbox">\r\n                                    <label>\r\n                                        <input checked.bind="systems.selectedSystem.apj" type="checkbox"> APJ\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="col">\r\n                    <div class="form-group">\r\n                        <label for="sid">SID *</label>\r\n                        <input value.bind="systems.selectedSystem.sid & validateOnChange" type="text"\r\n                            class="form-control" id="sid" aria-describedby="sidHelp">\r\n                    </div>\r\n                </div>\r\n                <div class="col">\r\n                    <div class="form-group">\r\n                        <label for="sid">Description *</label>\r\n                        <input value.bind="systems.selectedSystem.description & validateOnChange" type="text"\r\n                            class="form-control" id="description" aria-describedby="descriptionHelp">\r\n                    </div>\r\n                </div>\r\n                <div class="col">\r\n                    <div class="form-group">\r\n                        <label for="sid">Server *</label>\r\n                        <input value.bind="systems.selectedSystem.server & validateOnChange" type="text"\r\n                            class="form-control" id="server" aria-describedby="serverHelp">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col">\r\n                    <div class="form-group">\r\n                        <label for="sid">Instance</label>\r\n                        <input value.bind="systems.selectedSystem.instance & validateOnChange" type="text"\r\n                            class="form-control" id="instance" aria-describedby="instanceHelp">\r\n                    </div>\r\n                </div>\r\n                <div class="col">\r\n                    <label for="edittype" class="control-label">System Type</label>\r\n                    <select value.bind="systems.selectedSystem.type" id="edittype" class="form-control ">\r\n                        <option model.bind="type" repeat.for="type of config.SYSTEM_TYPES">${type}\r\n                        </option>\r\n                    </select>\r\n                </div>\r\n                <div class="col">\r\n                    <label for="editIts" class="form-control-label">URL</label>\r\n                    <input value.bind="systems.selectedSystem.its" id="editIts" class="form-control" type="text" />\r\n                </div>\r\n                <div class="col">\r\n                    <label>Sessions</label>\r\n                    <select class="form-control selectpicker" id="sessions" multiple data-style="btn btn-link"\r\n                        value.bind="systems.selectedSystem.sessions">\r\n                        <option model.bind="session.session" repeat.for="session of sessions.SESSION_PARAMS">\r\n                            ${session.session}</option>\r\n                    </select>\r\n                    Sessions: ${systems.selectedSystem.sessions}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>'},"modules/admin/systems/components/systems.html":function(e,t){e.exports='<template>\r\n    <div class="card">\r\n        <div class="card-header">\r\n            <h4 class="card-title">Assigned Systems</h4>\r\n        </div>\r\n        <div class="card-body">\r\n            <h5 class="bottomMargin">To assign systems to products, you should use the Systems client generation\r\n                process.</h5>\r\n            <div class="row">\r\n                <div class="col">\r\n                    <div class="checkbox">\r\n                        <label>\r\n                            <input checked.bind="enable" type="checkbox"> Enable editing\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <form>\r\n                <div class="row">\r\n                    <div class="col">\r\n                        <label>Systems</label>\r\n                        <div class="card overFlow" style="height:400px;">\r\n                            <input class="form-control" value.bind="filter" input.trigger="filterList()"\r\n                                placeholder="Filter systems" />\r\n                            <ul class="list-group list-group-flush">\r\n                                <button href="#" click.trigger="selectSystem($event, system)" type="button"\r\n                                    repeat.for="system of filteredsystemsarray" id="${system._id}"\r\n                                    class="list-group-item">${system.sid}</button>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col">\r\n                        <label>Assigned Systems</label>\r\n                        <div class="card overFlow" style="height:400px;">\r\n                            <ul class="list-group">\r\n                                <button click.trigger="removeSystem($event, system)" type="button"\r\n                                    repeat.for="system of products.selectedObject.systems" id="${system._id}"\r\n                                    class="list-group-item">${system.sid}</button>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n</template>'},"modules/admin/systems/components/systemsForm.html":function(e,t,s){e.exports='<template>\r\n    <div class="card positionUnderToolbar">\r\n        <div class="card-body">\r\n            <div class="list-group-item toolbar">\r\n                <span click.delegate="back()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Back"><i\r\n                        class="fa fa-arrow-left fa-lg fa-border" aria-hidden="true"></i></span>\r\n                <span click.delegate="save()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Save"><i\r\n                        class="fa fa-floppy-o fa-lg fa-border" aria-hidden="true"></i></span>\r\n                <span click.delegate="cancel()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Cancel Changes"><i\r\n                        class="fa fa-ban fa-lg fa-border" aria-hidden="true"></i></span>\r\n                <span click.delegate="delete()" show.bind="systems.selectedSystem._id" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip"\r\n                    data-placement="bottom" title="" data-original-title="Delete"><i\r\n                        class="fa fa-trash fa-lg fa-border text-danger" aria-hidden="true"></i></span>\r\n            </div>\r\n            <div class=\'col-lg-10 bottomMargin topMargin\'>\r\n                <ul class="nav nav-pills bottomMargin">\r\n                    <li class="nav-item">\r\n                        <a class="nav-link active" data-toggle="tab" role="tab" href="#systemInfo">System Info</a>\r\n                    </li>\r\n                    <li class="nav-item">\r\n                        <a class="nav-link" data-toggle="tab" role="tab" href="#clients">Clients</a>\r\n                    </li>\r\n                </ul>\r\n                <div class="tab-content" id="myTabContent">\r\n                    <div class="tab-pane fade show active" id="systemInfo" role="tabpanel" aria-labelledby="home-tab">\r\n                        <compose view="./systemInfo.html"></compose>\r\n                    </div>\r\n                    <div class="tab-pane fade" id="clients" role="tabpanel" aria-labelledby="home-tab">\r\n                        <div show.bind="showClientTable">\r\n                            <compose view="./clientTable.html"></compose>\r\n                        </div>\r\n                        <div show.bind="!showClientTable">\r\n                            <compose view="./clientForm.html"></compose>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col">\r\n                        <div if.bind="controller.errors.length > 0" class="alert alert-danger topMargin" role="alert">\r\n                            <ul class="list-group">\r\n                                <li repeat.for="error of controller.errors" class="list-group-item">\r\n                                    ${error}</li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n</template>'},"modules/admin/systems/components/systemsTable.html":function(e,t,s){e.exports='<template>\r\n    <div class="card" style="top:-110px;">\r\n        <div class="card-body">\r\n            <div class=\'col-lg-10 offset-lg-1 bottomMargin\'>\r\n\r\n                <compose view="../../../../resources/elements/table-nav-bar.html"></compose>\r\n\r\n                <table class="table table-striped"\r\n                    aurelia-table="data.bind: systems.systemsArray; display-data.bind: $displayData; filters.bind: filters; current-page.bind: currentPage; page-size.bind: pageSize; total-items.bind: totalItems;">\r\n                    <thead>\r\n                        <tr>\r\n                            <compose view=\'./systemsTableToolbar.html\'></compose>\r\n                        </tr>\r\n                        <tr>\r\n                            <th colspan="2">\r\n                                <div class=\'col\'>\r\n                                    <div class="form-group">\r\n                                        <input type="text" value.bind="filters[0].value"\r\n                                            placeholder="Filter SID, Description, and Server" class="form-control"\r\n                                            id=\'filterField\' />\r\n                                    </div>\r\n                                </div>\r\n                            </th>\r\n                            <th></th>\r\n                            <th></th>\r\n\r\n                            <th colspan="2">\r\n                                <div class=\'col\'>\r\n                                        <select value.bind="filters[1].value" class="form-control selectpicker" id="personStatus" data-style="btn btn-link">\r\n                                            <option value=true>Active</option>\r\n                                            <option value=false>Inactive</option>\r\n                                        </select>\r\n                                </div>\r\n\r\n                            </th>\r\n                        </tr>\r\n\r\n                        <tr>\r\n                            <th style="width:10rem;" aut-sort="key: sid">SID</th>\r\n                            <th style="width:20rem;" aut-sort="key: description">Description</th>\r\n                            <th style="width:20rem;" aut-sort="key: server">Server</th>\r\n                            <th style="width:20rem;" aut-sort="key: instance">Instance</th>\r\n                            <th style="width:15rem;">Status</th>\r\n                        </tr>\r\n                    </thead>\r\n                    \r\n                    <tbody>\r\n                        <tr repeat.for="system of $displayData" >\r\n                            <td click.delegate="edit(system)" style="width:10rem;" >${system.sid}</td>\r\n                            <td click.delegate="edit(system)" style="width:20rem;" >${system.description}</td>\r\n                            <td click.delegate="edit(system)" style="width:20rem;" >${system.server}</td>\r\n                            <td style="width:20rem;" > ${system.instance}</td>\r\n                            <td click.delegate="edit(system)" style="width:15rem;">${system.active | translateStatus}\r\n                        </tr>\r\n                    </tbody>\r\n               \r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    </div>\r\n</template>'},"modules/admin/systems/components/systemsTableToolbar.html":function(e,t){e.exports='<template>\r\n    <td colspan=\'7\'>\r\n        <span click.delegate="refresh()" class="smallMarginRight" bootstrap-tooltip\r\n            data-toggle="tooltip" data-placement="bottom" title=""\r\n            data-original-title="Refresh"><i class="fa fa-refresh"\r\n                aria-hidden="true"></i></span>\r\n        <span click.delegate="new()" class="smallMarginRight" bootstrap-tooltip\r\n            data-toggle="tooltip" data-placement="bottom" title="" data-original-title="New"><i\r\n                class="fa fa-plus" aria-hidden="true"></i></span>\r\n        <span click.delegate="downloadInstExcel()" class="smallMarginRight" bootstrap-tooltip\r\n            data-toggle="tooltip" data-placement="bottom" title=""\r\n            data-original-title="Export to Excel"><i class="fa fa-download"\r\n                aria-hidden="true"></i></span>\r\n        <span click.delegate="clearFilters()" class="smallMarginRight" bootstrap-tooltip\r\n            data-toggle="tooltip" data-placement="bottom" title=""\r\n            data-original-title="Clear Filters"><i class="fa fa-filter"\r\n                aria-hidden="true"></i></span>\r\n    </td>\r\n</template>'},"modules/admin/systems/editProducts":function(e,t,s){"use strict";s.r(t),s.d(t,"EditProducts",(function(){return v}));var r,n=s("aurelia-framework"),i=s("aurelia-validation"),a=s("aurelia-dialog"),o=s("resources/dialogs/confirm-dialog"),l=s("resources/dialogs/message-dialog"),d=s("IdOp"),c=s("s/j+"),u=s("+bNA"),p=s("B6RA"),m=s("nxgs");function h(e,t,s,r,n,i,a){try{var o=e[i](a),l=o.value}catch(e){return void s(e)}o.done?t(l):Promise.resolve(l).then(r,n)}function f(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var i=e.apply(t,s);function a(e){h(i,r,n,a,o,"next",e)}function o(e){h(i,r,n,a,o,"throw",e)}a(void 0)}))}}var v=Object(n.inject)(i.ValidationControllerFactory,d.a,c.a,u.a,p.a,m.a,a.DialogService)(r=function(){function e(e,t,s,r,n,i,a){this.pageSize=200,this.controller=e.createForCurrentScope(),this.products=t,this.systems=s,this.config=r,this.store=n,this.utils=i,this.dialog=a,this.filters=[{value:"",keys:["name","systemList"]},{value:!0,keys:["active"]}],this.configParameters=this.store.getConfig(),this.view="table"}var t=e.prototype;return t.activate=function(){var e=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.products.getObjectsArray("?order=name"),this.systems.getObjectsArray("?order=sid")]);case 2:e.sent,this.calculateSystemList(),this.filterList();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.calculateSystemList=function(){var e;this.products.productsArray&&this.products.productsArray.forEach((function(t){e="",t.systems.forEach((function(t){e+=t.sid+" "})),t.systemList=e}))},t.attached=function(){$("#filterField").focus(),$('[data-toggle="tooltip"]').tooltip()},t.refresh=function(){var e=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.clearFilters(),e.next=3,this.products.getProductsArray("?&order=name");case 3:this.calculateSystemList();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.new=function(){this.products.selectProduct(),this.createValidationRules(),this.view="form"},t.edit=function(){var e=f(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.products.getObject(t._id);case 2:this.createValidationRules(),this.saveFilterValues(),this.view="form";case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.saveFilterValues=function(){var e=this;this.filterValues=[],this.filters.forEach((function(t){e.filterValues.push(t.value)}))},t.resetFilterValues=function(){var e=this;this.filterValues&&this.filterValues.length&&this.filterValues.forEach((function(t,s){e.filters[s].value=t}))},t.createValidationRules=function(){i.validationMessages.required="You must enter ${$displayName}.",i.ValidationRules.ensure("name").displayName("a Name").required().on(this.products.selectedObject)},t.save=function(){var e=f(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.controller.validate().then((function(e){if(e.valid)t.saveObject();else{t.dialog.open({viewModel:l.a,model:{message:"You must fix the errors before you can save the system?",title:"Fix Errors",options:["Ok"]},lock:!1}).whenClosed((function(e){}))}}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.saveObject=function(){var e=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.products.saveObject();case 2:e.sent.error?this.utils.showNotification("There was a problem saving the system","error"):(this.utils.showNotification("The product was updated"),this.uploadFile()),this._cleanUp();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.uploadFile=function(){this.filesToUpload&&this.filesToUpload.length>0&&this.products.uploadFile(this.filesToUpload)},t.delete=function(){var e=f(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Are you sure you want to delete the system?","Confirm Delete",t={},this.dialog.open({viewModel:o.a,model:{message:"Are you sure you want to delete the system?",title:"Confirm Delete",options:t},lock:!1}).whenClosed((function(e){e.wasCancelled?s.goBack():s.deleteSystem()}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.deleteSystem=function(){var e=f(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.products.selectedObject.sid,e.next=3,this.products.deleteSystem();case 3:e.sent.error||this.utils.showNotification(t+" was deleted"),this._cleanUp();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.back=function(){var e=this;if(this.products.isObjectDirty().length){this.dialog.open({viewModel:o.a,model:{message:"Do you want to save the product?",title:"Save Product",options:{}},lock:!1}).whenClosed((function(t){t.wasCancelled?e.goBack():e.saveObject()}))}else this.goBack()},t.goBack=function(){this.refresh(),this.resetFilterValues(),this.view="table"},t.cancel=function(){this.products.selectedObjectById(this.products.selectedObject._id)},t.downloadInstExcel=function(){var e="data:text/csv;charset=utf-8;,First Name,Last Name,Email,Phone,Institution,Country,Region,Status,Roles\r\n";this.dataTable.baseArray.forEach((function(t){var s="01"==t.personStatus?"Active":"Inactive";e+=t.firstName+","+t.lastName.replace(","," ")+","+t.email+","+t.phone+","+t.institutionId.name.replace(","," ")+","+t.country+","+t.region+","+s+","+t.roles.join(":"),e+="\r\n"}));var t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","people.csv"),document.body.appendChild(s),s.click()},t.clearFilters=function(){this.filters[0].value="",this.filters[1].value=!0,$("#filterField").focus()},t._cleanUp=function(){this.clearFilters(),this.goBack()},t.enableEdit=function(){this.enable=!0},t.filterList=function(){if(this.filter){var e=this.filter;this.filteredsystemsarray=this.systems.objectsArray.filter((function(t){return t.sid.substring(0,e.length).toUpperCase()===e.toUpperCase()}))}else this.filteredsystemsarray=this.systems.objectsArray},t.selectSystem=function(e,t){this.enable&&(this._systemAlreadySelected(t.sid)||this.products.selectedObject.systems.push({sid:t.sid,systemId:t._id}))},t._systemAlreadySelected=function(e){for(var t=0;t<this.products.selectedObject.systems.length;t++)if(this.products.selectedObject.systems[t].sid===e)return!0;return!1},t.removeSystem=function(e,t){if(this.enable)for(var s=0;s<this.products.selectedObject.systems.length;s++)if(t.systemId===this.products.selectedObject.systems[s].systemId){this.products.selectedObject.systems.splice(s,1);break}},t.changeFiles=function(){this.filesToUpload=new Array,this.filesToUpload.push(this.files[0])},t.removeFile=function(e){this.filesToUpload.splice(e,1)},e}())||r},"modules/admin/systems/editProducts.html":function(e,t,s){e.exports='<template>\r\n    <div show.bind="view === \'table\'">\r\n        <compose view="./components/productsTable.html"></compose>\r\n    </div>\r\n    <div show.bind="view === \'form\'">\r\n        <compose view="./components/productsForm.html"></compose>\r\n    </div>\r\n</template>'},"modules/admin/systems/editSessions":function(e,t,s){"use strict";s.r(t),s.d(t,"EditSessions",(function(){return f}));var r,n=s("aurelia-framework"),i=s("aurelia-validation"),a=s("aurelia-dialog"),o=s("resources/dialogs/confirm-dialog"),l=s("resources/dialogs/message-dialog"),d=s("32IO"),c=s("+bNA"),u=s("B6RA"),p=s("nxgs");function m(e,t,s,r,n,i,a){try{var o=e[i](a),l=o.value}catch(e){return void s(e)}o.done?t(l):Promise.resolve(l).then(r,n)}function h(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var i=e.apply(t,s);function a(e){m(i,r,n,a,o,"next",e)}function o(e){m(i,r,n,a,o,"throw",e)}a(void 0)}))}}var f=Object(n.inject)(i.ValidationControllerFactory,d.a,c.a,u.a,p.a,a.DialogService)(r=function(){function e(e,t,s,r,n,i){this.controller=e.createForCurrentScope(),this.sessions=t,this.config=s,this.store=r,this.utils=n,this.dialogService=i,this.configParameters=this.store.getConfig(),this.filters=[{value:!0,custom:this.closedFilter}],this.validationErrors=[],this.view="table"}var t=e.prototype;return t.closedFilter=function(e,t){return!e||"Closed"!==t.sessionStatus},t.activate=function(){var e=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.sessions.getSessionsArray("?order=startDate:DSC")]);case 2:e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.attached=function(){$("#filterField").focus(),$('[data-toggle="tooltip"]').tooltip()},t.refresh=function(){var e=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.clearFilters(),e.next=3,this.sessions.getSessionsArray("?order=startDate:DSC");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.new=function(){this.sessions.selectSession(),this.createValidationRules(),this.view="form"},t.edit=function(){var e=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessions.getSession(t._id);case 2:this.createValidationRules(),this.view="form";case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.createValidationRules=function(){i.validationMessages.required="You must enter ${$displayName}.",i.ValidationRules.ensure("session").displayName("a Session").required().ensure("year").displayName("a Year").required().ensure("startDate").displayName("a Start Date").required().ensure("endDate").displayName("an End Date").required().minLength(10).ensure("requestsOpenDate").displayName("a Requst Open Date").required().on(this.sessions.selectedSession)},t.save=function(){var e=h(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.controller.validate().then((function(e){if(e.valid)t.saveSession();else{t.dialog.open({viewModel:l.a,model:{message:"You must fix the errors before you can save the system?",title:"Fix Errors",options:["Ok"]},lock:!1}).whenClosed((function(e){}))}}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.saveSession=function(){var e=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessions.saveSession();case 2:e.sent.error?this.utils.showNotification("There was a problem saving the session","error"):(this.utils.showNotification("The session was updated"),this.refresh()),this._cleanUp();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.saveSortOrder=function(e){this.sessions.setSession(e);this.sessions.saveSession()},t.refreshConfig=function(){var e=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessions.getSessionParameters();case 2:this.editSessionConfig();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.editSessionConfig=function(){var e=this;this.editSessionConfigArray=new Array,this.sessions.SESSION_PARAMS.forEach((function(t){e.editSessionConfigArray.push(e.utils.copyObject(t))})),this.view="config"},t.backConfig=function(){this.view="table"},t.cancelConfig=function(){var e=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.editSessionConfigArray=new Array,e.next=3,this.refreshConfig();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.saveConfig=function(){var e=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.editSessionConfigArray){e.next=9;break}return e.next=3,this.sessions.saveSessionConfig(this.editSessionConfigArray);case 3:if(e.sent.error){e.next=9;break}return e.next=7,this.refreshConfig();case 7:this.utils.showNotification("Session configuration updated"),this.view="table";case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.updateStatus=function(e,t){if("Closed"!==t.sessionStatus){switch(this.sessions.selectSessionById(t._id),t.sessionStatus){case"Next":this.editStatus="Requests";break;case"Requests":this.editStatus="Active";break;case"Active":this.editStatus="Closed"}this.sessions.selectedSession.sessionStatus=this.editStatus,this.save()}},t.back=function(){var e=this;if(this.sessions.isSessionDirty().length){this.dialog.open({viewModel:o.a,model:{message:"Do you want to save the session?",title:"Save Session",options:{}},lock:!1}).whenClosed((function(t){t.wasCancelled?e.goBack():e.saveSession()}))}else this.goBack()},t.goBack=function(){this.view="table"},t.cancel=function(){this.sessions.selectSessionById(this.sessions.selectedSession._id)},t.clearFilters=function(){this.filters[0].value=!0},t._cleanUp=function(){this.institutionId="",this.goBack()},e}())||r},"modules/admin/systems/editSessions.html":function(e,t,s){e.exports='<template>\r\n    <div show.bind="view === \'table\'">\r\n        <compose view="./components/sessionsTable.html"></compose>\r\n    </div>\r\n    <div show.bind="view === \'form\'">\r\n        <compose view="./components/sessionsForm.html"></compose>\r\n    </div>\r\n    \x3c!-- <div show.bind="view == \'config\'">\r\n        <compose view="./components/sessionConfigTable.html"></compose>\r\n    </div> --\x3e\r\n</template>'},"modules/admin/systems/editSystems":function(e,t,s){"use strict";s.r(t),s.d(t,"EditSystems",(function(){return g}));var r,n=s("aurelia-framework"),i=s("aurelia-validation"),a=s("aurelia-dialog"),o=s("resources/dialogs/confirm-dialog"),l=s("resources/dialogs/message-dialog"),d=s("s/j+"),c=s("32IO"),u=s("IdOp"),p=s("+bNA"),m=s("B6RA"),h=s("nxgs");function f(e,t,s,r,n,i,a){try{var o=e[i](a),l=o.value}catch(e){return void s(e)}o.done?t(l):Promise.resolve(l).then(r,n)}function v(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var i=e.apply(t,s);function a(e){f(i,r,n,a,o,"next",e)}function o(e){f(i,r,n,a,o,"throw",e)}a(void 0)}))}}var g=Object(n.inject)(i.ValidationControllerFactory,d.a,c.a,u.a,p.a,m.a,h.a,a.DialogService)(r=function(){function e(e,t,s,r,n,i,a,o){this.pageSize=200,this.controller=e.createForCurrentScope(),this.systems=t,this.sessions=s,this.products=r,this.config=n,this.store=i,this.utils=a,this.dialog=o,this.filters=[{value:"",keys:["sid","description"]},{value:!0,keys:["active"]}],this.configParameters=this.store.getConfig(),this.productsToSave=[],this.view="table",this.showClientTable=!0}var t=e.prototype;return t.activate=function(){var e=v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.systems.getSystemsArray("?order=sid"),this.products.getProductsArray("?filter=active|eq|true&order=name"),this.sessions.getSessionParameters()]);case 2:e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.attached=function(){$("#filterField").focus(),$('[data-toggle="tooltip"]').tooltip()},t.refresh=function(){var e=v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.clearFilters(),e.next=3,this.systems.getSystemsArray("?order=sid");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.new=function(){this.systems.selectSystem(),this.createValidationRules(),this.view="form"},t.edit=function(){var e=v(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.systems.getSystem(t._id);case 2:this.createValidationRules(),this.saveFilterValues(),this.view="form";case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.saveFilterValues=function(){var e=this;this.filterValues=[],this.filters.forEach((function(t){e.filterValues.push(t.value)}))},t.resetFilterValues=function(){var e=this;this.filterValues&&this.filterValues.length&&this.filterValues.forEach((function(t,s){e.filters[s].value=t}))},t.createValidationRules=function(){i.validationMessages.required="You must enter ${$displayName}.",i.ValidationRules.ensure("sid").displayName("a SID").required().ensure("description").displayName("a Description").required().on(this.systems.selectedSystem)},t.save=function(){var e=v(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.controller.validate().then((function(e){if(e.valid)t.saveSystem();else{t.dialog.open({viewModel:l.a,model:{message:"You must fix the errors before you can save the system?",title:"Fix Errors",options:["Ok"]},lock:!1}).whenClosed((function(e){}))}}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.saveSystem=function(){var e=v(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.systems.saveSystem();case 2:e.sent.error?this.utils.showNotification("There was a problem saving the system","error"):(this.utils.showNotification("The system was updated"),this.productsToSave.forEach((function(e){t.products.selectProduct(e),t.products.saveProduct()})),this.productsToSave=[]),this._cleanUp();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.delete=function(){var e=v(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Are you sure you want to delete the system?","Confirm Delete",t={},this.dialog.open({viewModel:o.a,model:{message:"Are you sure you want to delete the system?",title:"Confirm Delete",options:t},lock:!1}).whenClosed((function(e){e.wasCancelled?s.goBack():s.deleteSystem()}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.deleteSystem=function(){var e=v(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.systems.selectedSystem.sid,e.next=3,this.systems.deleteSystem();case 3:e.sent.error||this.utils.showNotification(t+" was deleted"),this._cleanUp();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.back=function(){var e=this;if(this.systems.isSystemDirty().length){this.dialog.open({viewModel:o.a,model:{message:"Do you want to save the system?",title:"Save System",options:{}},lock:!1}).whenClosed((function(t){t.wasCancelled?e.goBack():e.saveSystem()}))}else this.goBack()},t.goBack=function(){this.refresh(),this.resetFilterValues(),this.backToClientTable(),this.view="table"},t.cancel=function(){this.systems.selectedSystemById(this.systems.selectedSystem._id)},t.editClientsButton=function(){this.showClientParametersForm=!this.showClientParametersForm,$("#editFirstClient").focus()},t.editClient=function(e,t){this.selectedClient=e,this.selectedIndex=t,this.showClientTable=!1},t.backToClientTable=function(){this.showClientTable=!0},t.generateClients=function(){var e=this,t=parseInt(this.editFirstClient),s=parseInt(this.editLastClient);if(this.clientInterval=parseInt(this.clientInterval)>0?parseInt(this.clientInterval):1,""===this.selectedProduct||"0"===this.idsAvailable||!this.editFirstClient||!this.editLastClient){this.dialog.open({viewModel:l.a,model:{message:"Enter all the required parameters.",title:"Enter Parameters",options:["Ok"]},lock:!1}).whenClosed((function(e){e.wasCancelled}))}if(s<t){this.dialog.open({viewModel:l.a,model:{message:"The first client number must be less than the last client number.",title:"Invalid Client Number",options:["Ok"]},lock:!1}).whenClosed((function(e){e.wasCancelled}))}if(3!=this.editFirstClient.length||3!=this.editLastClient.length){this.dialog.open({viewModel:l.a,model:{message:"The client number must be 3 digits.",title:"Invalid Client Number",options:["Ok"]},lock:!1}).whenClosed((function(e){e.wasCancelled}))}var r=this.generateAllClients(t,s,parseInt(this.clientInterval));if(r.error)this.utils.showNotification(r.error,"error");else{var n=this.products.selectedProductFromId(this.selectedProduct);this.saveProduct=!0,this.products.selectedProduct.systems&&this.products.selectedProduct.systems.length>0&&this.products.selectedProduct.systems.forEach((function(t){t.sid===e.systems.selectedSystem.sid&&(e.saveProduct=!1)})),this.saveProduct&&(this.products.selectedProduct.systems.push({systemId:this.systems.selectedSystem._id,sid:this.systems.selectedSystem.sid}),-1===this.productsToSave.indexOf(n)&&this.productsToSave.push(n))}},t.generateAllClients=function(e,t,s){this.systems.selectedSystem.clients=this.systems.selectedSystem.clients||new Array;var r=this.systems.selectedSystem.clients.length-1;if(e>0&&t>0&&t>=e){for(var n=e;n<=t;n+=s)(-1===r||this._findClient(n,0,r)<0)&&this.systems.selectedSystem.clients.push(this.systems.emptyClient(n,this.editClientStatus,this.selectedProduct,this.idsAvailable));return!0}return{error:"Enter valid start and end client numbers"}},t._findClient=function(e,t,s){if(s>=0)for(var r=t;r<=s;r++)if(this.systems.selectedSystem.clients[r].client==e)return r;return-1},t.refreshAllClients=function(){var e=this;this.dialog.open({viewModel:o.a,model:{message:"Are you sure you want to return all the clients to their initial state?",title:"Confirm Refresh",options:{}},lock:!1}).whenClosed((function(t){t.wasCancelled||e.executeRefreshAllClients()}))},t.executeRefreshAllClients=function(){var e=this;this.systems.selectedSystem.clients.forEach((function(t,s){e.selectedIndex=s,e.executeRefreshClient()}))},t.deleteAllClients=function(){var e=this;this.dialog.open({viewModel:o.a,model:{message:"Are you sure you want to delete all the clients?",title:"Confirm Deelete",options:{}},lock:!1}).whenClosed((function(t){if(!t.wasCancelled){var s=e.systems.selectedSystem.clients[0].productId;e.executeDeleteAllClients();var r=e.products.selectedProductFromId(s);e.saveProduct=!1,e.products.selectedProduct.systems&&e.products.selectedProduct.systems.length>0&&e.products.selectedProduct.systems.forEach((function(t,s){t.sid===e.systems.selectedSystem.sid&&(e.products.selectedProduct.systems.splice(s,1),e.saveProduct=!0)})),e.saveProduct&&-1===e.productsToSave.indexOf(r)&&e.productsToSave.push(r)}}))},t.executeDeleteAllClients=function(){this.systems.selectedSystem.clients=[]},t.updateAllProducts=function(){if(this.selectedProduct)this.executeUpdateAllProducts();else{this.dialog.open({viewModel:l.a,model:{message:"You must choose a product?",title:"Choose a Product",options:["Ok"]},lock:!1}).whenClosed((function(e){e.wasCancelled}))}},t.executeUpdateAllProducts=function(){if(this.selectProduct(),this.products.selectedProduct._id){var e=this.products.selectedProduct._id;this.systems.selectedSystem.clients.forEach((function(t,s){t.productId=e}))}},t.selectProduct=function(){this.products.selectedProductFromId(this.selectedProduct)},t.toggleSandBox=function(){this.systems.selectedSystem.clients[this.selectedIndex].assignments.length>0?this.utils.showNotification("The client has assignments. You must refresh it before changing it's status","warning"):this.systems.selectedSystem.clients[this.selectedIndex].clientStatus=this.systems.selectedSystem.clients[this.selectedIndex].clientStatus==this.config.SANDBOX_CLIENT_CODE?this.config.UNASSIGNED_CLIENT_CODE:this.config.SANDBOX_CLIENT_CODE},t.refreshClient=function(e){var t=this;this.dialog.open({viewModel:o.a,model:{message:"Are you sure you want to return the client to its initial state?",title:"Confirm Refresh",options:{}},lock:!1}).whenClosed((function(e){e.wasCancelled||t.executeRefreshClient()}))},t.executeRefreshClient=function(){this.systems.selectedSystem.clients[this.selectedIndex].clientStatus=this.config.UNASSIGNED_CLIENT_CODE,this.systems.selectedSystem.clients[this.selectedIndex].assignments=new Array,this.systems.selectedSystem.clients[this.selectedIndex].idsAvailable=this.systems.selectedSystem.idsAvailable},t.deleteClient=function(){var e=this;this.dialog.open({viewModel:o.a,model:{message:"Are you sure you want to delete the client?",title:"Confirm Delete",options:{}},lock:!1}).whenClosed((function(t){t.wasCancelled||(e.systems.selectedSystem.clients.splice(e.selectedIndex,1),e.backToClientTable())}))},t.downloadInstExcel=function(){var e="data:text/csv;charset=utf-8;,First Name,Last Name,Email,Phone,Institution,Country,Region,Status,Roles\r\n";this.dataTable.baseArray.forEach((function(t){var s="01"==t.personStatus?"Active":"Inactive";e+=t.firstName+","+t.lastName.replace(","," ")+","+t.email+","+t.phone+","+t.institutionId.name.replace(","," ")+","+t.country+","+t.region+","+s+","+t.roles.join(":"),e+="\r\n"}));var t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","people.csv"),document.body.appendChild(s),s.click()},t.clearFilters=function(){this.filters[0].value="",this.filters[1].value=!0,$("#filterField").focus()},t._cleanUp=function(){this.clearFilters(),this.goBack()},e}())||r},"modules/admin/systems/editSystems.html":function(e,t,s){e.exports='<template>\r\n    <div show.bind="view === \'table\'">\r\n        <compose view="./components/systemsTable.html"></compose>\r\n    </div>\r\n    <div show.bind="view === \'form\'">\r\n        <compose view="./components/systemsForm.html"></compose>\r\n    </div>\r\n</template>'},"modules/admin/systems/systems":function(e,t,s){"use strict";s.r(t),s.d(t,"EditSystem",(function(){return a}));var r,n=s("aurelia-framework"),i=s("4ysu"),a=Object(n.inject)(i.c)(r=function(){function e(e){this.router=e,this.pageTitle="System Administration"}var t=e.prototype;return t.attached=function(){},t.configureRouter=function(e,t){e.map([{route:["","editSessions"],moduleId:"./editSessions",settings:{auth:!0,roles:[]},nav:!0,name:"editSessions",title:"Sessions"},{route:"editSystems",moduleId:"./editSystems",settings:{auth:!0,roles:[]},nav:!0,name:"editSystems",title:"Systems"},{route:"editProducts",moduleId:"./editProducts",settings:{auth:!0,roles:[]},nav:!0,name:"editProduct",title:"Products"}]),this.router=t},e}())||r},"modules/admin/systems/systems.html":function(e,t,s){e.exports='<template>\r\n    <compose view="../../../resources/elements/top-bar.html"></compose>\r\n    <div class="content" style="margin-top:200px;">\r\n        <div class="container-fluid">\r\n            <router-view></router-view>\r\n        </div>\r\n    </div>\r\n</template>'},"modules/user/user":function(e,t,s){"use strict";s.r(t),s.d(t,"User",(function(){return r}));var r=function(){this.pageTitle="Home"}},"modules/user/user.html":function(e,t){e.exports='<template>\r\n    <top-bar></top-bar>\r\n    <div class="content" style="margin-top:200px;">\r\n       <div class="container-fluid">\r\n          <h1>Nothing to see here folks, move along.</h1>\r\n          <h4>Working pages</h4>\r\n          <ul>\r\n              <li>Customers-People</li>\r\n              <li>Customers-Institutions</li>\r\n              <li>Customers-Bulkemail (no email)</li>\r\n              <li>System Admin-Sessions</li>\r\n              <li>System Admin-Systems (partial)</li>\r\n          </ul>\r\n       </div>\r\n    </div>\r\n</template>'}}]);
//# sourceMappingURL=app~50ba91a7.70182ea8e0590645c3a8.bundle.map