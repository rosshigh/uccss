(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["vendors~29a7c9d0"],{

/***/ "8Pyf":
/*!**************************************************!*\
  !*** ./node_modules/aurelia-mask/dist/masker.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getMasker(options) {\n    var maskers = _maskers;\n    var key = new MaskOptions();\n    key.maskFormat = options.maskFormat;\n    key.placeholder = options.placeholder || \"_\";\n    key.bindMasking = !!options.bindMasking;\n    key.aspnetMasking = !!options.aspnetMasking;\n    var strkey = JSON.stringify(key);\n    if (!maskers[strkey]) {\n        maskers[strkey] = new Masker(key);\n    }\n    return maskers[strkey];\n}\nexports.getMasker = getMasker;\nvar MaskOptions = (function () {\n    function MaskOptions() {\n    }\n    return MaskOptions;\n}());\nexports.MaskOptions = MaskOptions;\nvar _maskers = new Map();\nvar maskDefinitions = {\n    '9': /\\d/,\n    'A': /[a-zA-Z]/,\n    '*': /[a-zA-Z0-9]/\n};\nfunction deleteChars(s, ch) {\n    if (s == null) {\n        s = \"\";\n    }\n    return s.split(ch).join(\"\");\n}\nvar Masker = (function () {\n    function Masker(options) {\n        this.maskFormat = options.maskFormat;\n        this.bindMasking = options.bindMasking;\n        this.aspnetMasking = options.aspnetMasking;\n        this.maskCaretMap = [];\n        this.maskPatterns = [];\n        this.maskPlaceholder = '';\n        this.minRequiredLength = 0;\n        this.maskComponents = null;\n        this.maskProcessed = false;\n        this.placeholder = options.placeholder;\n        this.processRawMask();\n    }\n    Masker.prototype.unmaskValue = function (value) {\n        if (this.aspnetMasking) {\n            var result = this._maskValue2(value);\n            return result;\n        }\n        else if (this.bindMasking) {\n            return this._maskValue(value, true);\n        }\n        return this._unmaskValue(value);\n    };\n    Masker.prototype.maskValue = function (unmaskedValue) {\n        if (this.aspnetMasking) {\n            var result = this._maskValue2(unmaskedValue);\n            return result;\n        }\n        return this._maskValue(unmaskedValue, false);\n    };\n    Masker.prototype.maxCaretPos = function (value) {\n        var valueLength = -1;\n        valueLength = value.length;\n        if (this.aspnetMasking) {\n            var caretPosMax = this.maskCaretMap.slice().pop();\n            return caretPosMax;\n        }\n        else if (this.bindMasking) {\n            if (this.maskCaretMap.indexOf(valueLength) != -1 ||\n                valueLength === this.maskFormat.length) {\n                return valueLength;\n            }\n            else {\n                for (var i = 0; i < this.maskCaretMap.length; i++) {\n                    if (this.maskCaretMap[i] > valueLength) {\n                        return this.maskCaretMap[i];\n                    }\n                }\n                return this.maskCaretMap.slice().shift();\n            }\n        }\n        else {\n            var caretPosMax = this.maskCaretMap[valueLength] || this.maskCaretMap.slice().shift();\n            return caretPosMax;\n        }\n    };\n    Masker.prototype.minCaretPos = function () {\n        return this.maskCaretMap[0];\n    };\n    Masker.prototype._unmaskValue = function (value) {\n        var valueUnmasked = '', maskPatternsCopy = this.maskPatterns.slice();\n        value = value.toString();\n        this.maskComponents.forEach(function (component) {\n            value = value.replace(component, '');\n        });\n        value.split('').forEach(function (chr) {\n            if (maskPatternsCopy.length && maskPatternsCopy[0].test(chr)) {\n                valueUnmasked += chr;\n                maskPatternsCopy.shift();\n            }\n        });\n        return valueUnmasked;\n    };\n    Masker.prototype._maskValue = function (unmaskedValue, keepMasking) {\n        var input = unmaskedValue || '';\n        var valueMasked = '', maskCaretMapCopy = this.maskCaretMap.slice(), maskPatternsCopy = this.maskPatterns.slice();\n        if (keepMasking) {\n            input = this._unmaskValue(input);\n        }\n        function putMaybe(chr) {\n            if (!keepMasking || input.length > 0) {\n                valueMasked += chr;\n            }\n        }\n        function putNextInput() {\n            valueMasked += input.charAt(0);\n        }\n        function nextCharMatches() {\n            return maskPatternsCopy[0].test(input.charAt(0));\n        }\n        function advanceInput() {\n            input = input.substr(1);\n        }\n        function advanceCaretMap() {\n            maskCaretMapCopy.shift();\n        }\n        function advancePatterns() {\n            maskPatternsCopy.shift();\n        }\n        this.maskPlaceholder.split('').forEach(function (chr, i) {\n            if (input.length > 0 && i === maskCaretMapCopy[0]) {\n                if (maskPatternsCopy.length) {\n                    while (input.length > 0 && !nextCharMatches()) {\n                        advanceInput();\n                    }\n                }\n                if (maskPatternsCopy.length && nextCharMatches()) {\n                    putNextInput();\n                    advanceCaretMap();\n                    advancePatterns();\n                }\n                else {\n                    putMaybe(chr);\n                    maskCaretMapCopy.shift();\n                }\n                advanceInput();\n            }\n            else {\n                if (input.length > 0 && input.charAt(0) === chr) {\n                    advanceInput();\n                }\n                putMaybe(chr);\n            }\n        });\n        return valueMasked;\n    };\n    Masker.prototype._maskValue2 = function (unmaskedValue) {\n        var input;\n        input = unmaskedValue || \"\";\n        var valueMasked = '', maskCaretMapCopy = this.maskCaretMap.slice(), maskPatternsCopy = this.maskPatterns.slice();\n        maskCaretMapCopy.pop();\n        var placeholder = this.placeholder;\n        function putMaybe(chr) {\n            valueMasked += chr;\n        }\n        function putNextInput() {\n            valueMasked += input.charAt(0);\n        }\n        function nextCharMatches() {\n            if (input.charAt(0) == placeholder)\n                return true;\n            return maskPatternsCopy[0].test(input.charAt(0));\n        }\n        function advanceInput() {\n            input = input.substr(1);\n        }\n        function advanceCaretMap() {\n            maskCaretMapCopy.shift();\n        }\n        function advancePatterns() {\n            maskPatternsCopy.shift();\n        }\n        this.maskPlaceholder.split('').forEach(function (chr, i) {\n            if (input.length > 0 && i === maskCaretMapCopy[0]) {\n                if (maskPatternsCopy.length && nextCharMatches()) {\n                    putNextInput();\n                    advanceCaretMap();\n                    advancePatterns();\n                }\n                else {\n                    putMaybe(chr);\n                    maskCaretMapCopy.shift();\n                }\n                advanceInput();\n            }\n            else {\n                while (input.length > 0 && input.charAt(0) === placeholder) {\n                    advanceInput();\n                }\n                if (input.length > 0 && input.charAt(0) === chr) {\n                    advanceInput();\n                }\n                putMaybe(chr);\n            }\n        });\n        return valueMasked;\n    };\n    Masker.prototype.stripPlaceholders = function (masked) {\n        return deleteChars(masked, this.placeholder);\n    };\n    Masker.prototype.getNextCaretPos = function (caretPos) {\n        if (this.maskCaretMap.length == 0) {\n            return this.maskFormat.length;\n        }\n        var ix = 0;\n        while (ix < this.maskCaretMap.length - 1 && this.maskCaretMap[ix] <= caretPos) {\n            ix++;\n        }\n        return this.maskCaretMap[ix];\n    };\n    Masker.prototype.getPreviousCaretPos = function (caretPos) {\n        if (this.maskCaretMap.length == 0) {\n            return 0;\n        }\n        var ix = this.maskCaretMap.length - 1;\n        while (ix > 0 && this.maskCaretMap[ix] >= caretPos) {\n            ix--;\n        }\n        return this.maskCaretMap[ix];\n    };\n    Masker.prototype.processRawMask = function () {\n        var _this = this;\n        var characterCount = 0;\n        if (isString(this.maskFormat)) {\n            var isOptional = false, numberOfOptionalCharacters = 0, splitMask = this.maskFormat.split('');\n            splitMask.forEach(function (chr, i) {\n                if (maskDefinitions[chr]) {\n                    _this.maskCaretMap.push(characterCount);\n                    _this.maskPlaceholder += _this.getPlaceholderChar(i - numberOfOptionalCharacters);\n                    _this.maskPatterns.push(maskDefinitions[chr]);\n                    characterCount++;\n                    if (!isOptional) {\n                        _this.minRequiredLength++;\n                    }\n                    isOptional = false;\n                }\n                else if (chr === '?') {\n                    isOptional = true;\n                    numberOfOptionalCharacters++;\n                }\n                else {\n                    _this.maskPlaceholder += chr;\n                    characterCount++;\n                }\n            });\n        }\n        this.maskCaretMap.push(this.maskCaretMap.slice().pop() + 1);\n        this.getMaskComponents();\n        this.maskProcessed = this.maskCaretMap.length > 1 ? true : false;\n    };\n    Masker.prototype.getMaskComponents = function () {\n        var maskPlaceholderChars = this.maskPlaceholder.split(''), maskPlaceholderCopy;\n        if (this.maskCaretMap && !isNaN(this.maskCaretMap[0])) {\n            this.maskCaretMap.forEach(function (value) {\n                maskPlaceholderChars[value] = '_';\n            });\n        }\n        maskPlaceholderCopy = maskPlaceholderChars.join('');\n        this.maskComponents = maskPlaceholderCopy.replace(/[_]+/g, '_').split('_');\n    };\n    Masker.prototype.getPlaceholderChar = function (i) {\n        var defaultPlaceholderChar = this.placeholder;\n        return (defaultPlaceholderChar.toLowerCase() === 'space') ? ' ' : defaultPlaceholderChar[0];\n    };\n    Masker.prototype.isValidAt = function (chr, caretPos) {\n        var ix = this.maskCaretMap.indexOf(caretPos);\n        if (ix == -1 || ix >= this.maskPatterns.length)\n            return false;\n        var pattern = this.maskPatterns[ix];\n        return pattern.test(chr);\n    };\n    return Masker;\n}());\nexports.Masker = Masker;\nfunction isString(myVar) {\n    return (typeof myVar === 'string' || myVar instanceof String);\n}\nexports.isString = isString;\nfunction isNumeric(n) {\n    return !isString(n) && !isNaN(parseFloat(n)) && isFinite(n);\n}\nexports.isNumeric = isNumeric;\n//# sourceMappingURL=masker.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOFB5Zi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhLW1hc2svZGlzdC9tYXNrZXIuanM/ZjBmYyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmZ1bmN0aW9uIGdldE1hc2tlcihvcHRpb25zKSB7XG4gICAgdmFyIG1hc2tlcnMgPSBfbWFza2VycztcbiAgICB2YXIga2V5ID0gbmV3IE1hc2tPcHRpb25zKCk7XG4gICAga2V5Lm1hc2tGb3JtYXQgPSBvcHRpb25zLm1hc2tGb3JtYXQ7XG4gICAga2V5LnBsYWNlaG9sZGVyID0gb3B0aW9ucy5wbGFjZWhvbGRlciB8fCBcIl9cIjtcbiAgICBrZXkuYmluZE1hc2tpbmcgPSAhIW9wdGlvbnMuYmluZE1hc2tpbmc7XG4gICAga2V5LmFzcG5ldE1hc2tpbmcgPSAhIW9wdGlvbnMuYXNwbmV0TWFza2luZztcbiAgICB2YXIgc3Rya2V5ID0gSlNPTi5zdHJpbmdpZnkoa2V5KTtcbiAgICBpZiAoIW1hc2tlcnNbc3Rya2V5XSkge1xuICAgICAgICBtYXNrZXJzW3N0cmtleV0gPSBuZXcgTWFza2VyKGtleSk7XG4gICAgfVxuICAgIHJldHVybiBtYXNrZXJzW3N0cmtleV07XG59XG5leHBvcnRzLmdldE1hc2tlciA9IGdldE1hc2tlcjtcbnZhciBNYXNrT3B0aW9ucyA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWFza09wdGlvbnMoKSB7XG4gICAgfVxuICAgIHJldHVybiBNYXNrT3B0aW9ucztcbn0oKSk7XG5leHBvcnRzLk1hc2tPcHRpb25zID0gTWFza09wdGlvbnM7XG52YXIgX21hc2tlcnMgPSBuZXcgTWFwKCk7XG52YXIgbWFza0RlZmluaXRpb25zID0ge1xuICAgICc5JzogL1xcZC8sXG4gICAgJ0EnOiAvW2EtekEtWl0vLFxuICAgICcqJzogL1thLXpBLVowLTldL1xufTtcbmZ1bmN0aW9uIGRlbGV0ZUNoYXJzKHMsIGNoKSB7XG4gICAgaWYgKHMgPT0gbnVsbCkge1xuICAgICAgICBzID0gXCJcIjtcbiAgICB9XG4gICAgcmV0dXJuIHMuc3BsaXQoY2gpLmpvaW4oXCJcIik7XG59XG52YXIgTWFza2VyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNYXNrZXIob3B0aW9ucykge1xuICAgICAgICB0aGlzLm1hc2tGb3JtYXQgPSBvcHRpb25zLm1hc2tGb3JtYXQ7XG4gICAgICAgIHRoaXMuYmluZE1hc2tpbmcgPSBvcHRpb25zLmJpbmRNYXNraW5nO1xuICAgICAgICB0aGlzLmFzcG5ldE1hc2tpbmcgPSBvcHRpb25zLmFzcG5ldE1hc2tpbmc7XG4gICAgICAgIHRoaXMubWFza0NhcmV0TWFwID0gW107XG4gICAgICAgIHRoaXMubWFza1BhdHRlcm5zID0gW107XG4gICAgICAgIHRoaXMubWFza1BsYWNlaG9sZGVyID0gJyc7XG4gICAgICAgIHRoaXMubWluUmVxdWlyZWRMZW5ndGggPSAwO1xuICAgICAgICB0aGlzLm1hc2tDb21wb25lbnRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5tYXNrUHJvY2Vzc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSBvcHRpb25zLnBsYWNlaG9sZGVyO1xuICAgICAgICB0aGlzLnByb2Nlc3NSYXdNYXNrKCk7XG4gICAgfVxuICAgIE1hc2tlci5wcm90b3R5cGUudW5tYXNrVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuYXNwbmV0TWFza2luZykge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX21hc2tWYWx1ZTIodmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmJpbmRNYXNraW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWFza1ZhbHVlKHZhbHVlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fdW5tYXNrVmFsdWUodmFsdWUpO1xuICAgIH07XG4gICAgTWFza2VyLnByb3RvdHlwZS5tYXNrVmFsdWUgPSBmdW5jdGlvbiAodW5tYXNrZWRWYWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5hc3BuZXRNYXNraW5nKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5fbWFza1ZhbHVlMih1bm1hc2tlZFZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX21hc2tWYWx1ZSh1bm1hc2tlZFZhbHVlLCBmYWxzZSk7XG4gICAgfTtcbiAgICBNYXNrZXIucHJvdG90eXBlLm1heENhcmV0UG9zID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciB2YWx1ZUxlbmd0aCA9IC0xO1xuICAgICAgICB2YWx1ZUxlbmd0aCA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgaWYgKHRoaXMuYXNwbmV0TWFza2luZykge1xuICAgICAgICAgICAgdmFyIGNhcmV0UG9zTWF4ID0gdGhpcy5tYXNrQ2FyZXRNYXAuc2xpY2UoKS5wb3AoKTtcbiAgICAgICAgICAgIHJldHVybiBjYXJldFBvc01heDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmJpbmRNYXNraW5nKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5tYXNrQ2FyZXRNYXAuaW5kZXhPZih2YWx1ZUxlbmd0aCkgIT0gLTEgfHxcbiAgICAgICAgICAgICAgICB2YWx1ZUxlbmd0aCA9PT0gdGhpcy5tYXNrRm9ybWF0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZUxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tYXNrQ2FyZXRNYXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWFza0NhcmV0TWFwW2ldID4gdmFsdWVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hc2tDYXJldE1hcFtpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tYXNrQ2FyZXRNYXAuc2xpY2UoKS5zaGlmdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGNhcmV0UG9zTWF4ID0gdGhpcy5tYXNrQ2FyZXRNYXBbdmFsdWVMZW5ndGhdIHx8IHRoaXMubWFza0NhcmV0TWFwLnNsaWNlKCkuc2hpZnQoKTtcbiAgICAgICAgICAgIHJldHVybiBjYXJldFBvc01heDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTWFza2VyLnByb3RvdHlwZS5taW5DYXJldFBvcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFza0NhcmV0TWFwWzBdO1xuICAgIH07XG4gICAgTWFza2VyLnByb3RvdHlwZS5fdW5tYXNrVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHZhbHVlVW5tYXNrZWQgPSAnJywgbWFza1BhdHRlcm5zQ29weSA9IHRoaXMubWFza1BhdHRlcm5zLnNsaWNlKCk7XG4gICAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5tYXNrQ29tcG9uZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZShjb21wb25lbnQsICcnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhbHVlLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uIChjaHIpIHtcbiAgICAgICAgICAgIGlmIChtYXNrUGF0dGVybnNDb3B5Lmxlbmd0aCAmJiBtYXNrUGF0dGVybnNDb3B5WzBdLnRlc3QoY2hyKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlVW5tYXNrZWQgKz0gY2hyO1xuICAgICAgICAgICAgICAgIG1hc2tQYXR0ZXJuc0NvcHkuc2hpZnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWx1ZVVubWFza2VkO1xuICAgIH07XG4gICAgTWFza2VyLnByb3RvdHlwZS5fbWFza1ZhbHVlID0gZnVuY3Rpb24gKHVubWFza2VkVmFsdWUsIGtlZXBNYXNraW5nKSB7XG4gICAgICAgIHZhciBpbnB1dCA9IHVubWFza2VkVmFsdWUgfHwgJyc7XG4gICAgICAgIHZhciB2YWx1ZU1hc2tlZCA9ICcnLCBtYXNrQ2FyZXRNYXBDb3B5ID0gdGhpcy5tYXNrQ2FyZXRNYXAuc2xpY2UoKSwgbWFza1BhdHRlcm5zQ29weSA9IHRoaXMubWFza1BhdHRlcm5zLnNsaWNlKCk7XG4gICAgICAgIGlmIChrZWVwTWFza2luZykge1xuICAgICAgICAgICAgaW5wdXQgPSB0aGlzLl91bm1hc2tWYWx1ZShpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gcHV0TWF5YmUoY2hyKSB7XG4gICAgICAgICAgICBpZiAoIWtlZXBNYXNraW5nIHx8IGlucHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YWx1ZU1hc2tlZCArPSBjaHI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gcHV0TmV4dElucHV0KCkge1xuICAgICAgICAgICAgdmFsdWVNYXNrZWQgKz0gaW5wdXQuY2hhckF0KDApO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG5leHRDaGFyTWF0Y2hlcygpIHtcbiAgICAgICAgICAgIHJldHVybiBtYXNrUGF0dGVybnNDb3B5WzBdLnRlc3QoaW5wdXQuY2hhckF0KDApKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBhZHZhbmNlSW5wdXQoKSB7XG4gICAgICAgICAgICBpbnB1dCA9IGlucHV0LnN1YnN0cigxKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBhZHZhbmNlQ2FyZXRNYXAoKSB7XG4gICAgICAgICAgICBtYXNrQ2FyZXRNYXBDb3B5LnNoaWZ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gYWR2YW5jZVBhdHRlcm5zKCkge1xuICAgICAgICAgICAgbWFza1BhdHRlcm5zQ29weS5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWFza1BsYWNlaG9sZGVyLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uIChjaHIsIGkpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dC5sZW5ndGggPiAwICYmIGkgPT09IG1hc2tDYXJldE1hcENvcHlbMF0pIHtcbiAgICAgICAgICAgICAgICBpZiAobWFza1BhdHRlcm5zQ29weS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGlucHV0Lmxlbmd0aCA+IDAgJiYgIW5leHRDaGFyTWF0Y2hlcygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlSW5wdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWFza1BhdHRlcm5zQ29weS5sZW5ndGggJiYgbmV4dENoYXJNYXRjaGVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcHV0TmV4dElucHV0KCk7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VDYXJldE1hcCgpO1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlUGF0dGVybnMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHB1dE1heWJlKGNocik7XG4gICAgICAgICAgICAgICAgICAgIG1hc2tDYXJldE1hcENvcHkuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWR2YW5jZUlucHV0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCAmJiBpbnB1dC5jaGFyQXQoMCkgPT09IGNocikge1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlSW5wdXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHV0TWF5YmUoY2hyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWx1ZU1hc2tlZDtcbiAgICB9O1xuICAgIE1hc2tlci5wcm90b3R5cGUuX21hc2tWYWx1ZTIgPSBmdW5jdGlvbiAodW5tYXNrZWRWYWx1ZSkge1xuICAgICAgICB2YXIgaW5wdXQ7XG4gICAgICAgIGlucHV0ID0gdW5tYXNrZWRWYWx1ZSB8fCBcIlwiO1xuICAgICAgICB2YXIgdmFsdWVNYXNrZWQgPSAnJywgbWFza0NhcmV0TWFwQ29weSA9IHRoaXMubWFza0NhcmV0TWFwLnNsaWNlKCksIG1hc2tQYXR0ZXJuc0NvcHkgPSB0aGlzLm1hc2tQYXR0ZXJucy5zbGljZSgpO1xuICAgICAgICBtYXNrQ2FyZXRNYXBDb3B5LnBvcCgpO1xuICAgICAgICB2YXIgcGxhY2Vob2xkZXIgPSB0aGlzLnBsYWNlaG9sZGVyO1xuICAgICAgICBmdW5jdGlvbiBwdXRNYXliZShjaHIpIHtcbiAgICAgICAgICAgIHZhbHVlTWFza2VkICs9IGNocjtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBwdXROZXh0SW5wdXQoKSB7XG4gICAgICAgICAgICB2YWx1ZU1hc2tlZCArPSBpbnB1dC5jaGFyQXQoMCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbmV4dENoYXJNYXRjaGVzKCkge1xuICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJBdCgwKSA9PSBwbGFjZWhvbGRlcilcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBtYXNrUGF0dGVybnNDb3B5WzBdLnRlc3QoaW5wdXQuY2hhckF0KDApKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBhZHZhbmNlSW5wdXQoKSB7XG4gICAgICAgICAgICBpbnB1dCA9IGlucHV0LnN1YnN0cigxKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBhZHZhbmNlQ2FyZXRNYXAoKSB7XG4gICAgICAgICAgICBtYXNrQ2FyZXRNYXBDb3B5LnNoaWZ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gYWR2YW5jZVBhdHRlcm5zKCkge1xuICAgICAgICAgICAgbWFza1BhdHRlcm5zQ29weS5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWFza1BsYWNlaG9sZGVyLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uIChjaHIsIGkpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dC5sZW5ndGggPiAwICYmIGkgPT09IG1hc2tDYXJldE1hcENvcHlbMF0pIHtcbiAgICAgICAgICAgICAgICBpZiAobWFza1BhdHRlcm5zQ29weS5sZW5ndGggJiYgbmV4dENoYXJNYXRjaGVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcHV0TmV4dElucHV0KCk7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VDYXJldE1hcCgpO1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlUGF0dGVybnMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHB1dE1heWJlKGNocik7XG4gICAgICAgICAgICAgICAgICAgIG1hc2tDYXJldE1hcENvcHkuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWR2YW5jZUlucHV0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaW5wdXQubGVuZ3RoID4gMCAmJiBpbnB1dC5jaGFyQXQoMCkgPT09IHBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VJbnB1dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCAmJiBpbnB1dC5jaGFyQXQoMCkgPT09IGNocikge1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlSW5wdXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHV0TWF5YmUoY2hyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWx1ZU1hc2tlZDtcbiAgICB9O1xuICAgIE1hc2tlci5wcm90b3R5cGUuc3RyaXBQbGFjZWhvbGRlcnMgPSBmdW5jdGlvbiAobWFza2VkKSB7XG4gICAgICAgIHJldHVybiBkZWxldGVDaGFycyhtYXNrZWQsIHRoaXMucGxhY2Vob2xkZXIpO1xuICAgIH07XG4gICAgTWFza2VyLnByb3RvdHlwZS5nZXROZXh0Q2FyZXRQb3MgPSBmdW5jdGlvbiAoY2FyZXRQb3MpIHtcbiAgICAgICAgaWYgKHRoaXMubWFza0NhcmV0TWFwLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXNrRm9ybWF0Lmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaXggPSAwO1xuICAgICAgICB3aGlsZSAoaXggPCB0aGlzLm1hc2tDYXJldE1hcC5sZW5ndGggLSAxICYmIHRoaXMubWFza0NhcmV0TWFwW2l4XSA8PSBjYXJldFBvcykge1xuICAgICAgICAgICAgaXgrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5tYXNrQ2FyZXRNYXBbaXhdO1xuICAgIH07XG4gICAgTWFza2VyLnByb3RvdHlwZS5nZXRQcmV2aW91c0NhcmV0UG9zID0gZnVuY3Rpb24gKGNhcmV0UG9zKSB7XG4gICAgICAgIGlmICh0aGlzLm1hc2tDYXJldE1hcC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGl4ID0gdGhpcy5tYXNrQ2FyZXRNYXAubGVuZ3RoIC0gMTtcbiAgICAgICAgd2hpbGUgKGl4ID4gMCAmJiB0aGlzLm1hc2tDYXJldE1hcFtpeF0gPj0gY2FyZXRQb3MpIHtcbiAgICAgICAgICAgIGl4LS07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubWFza0NhcmV0TWFwW2l4XTtcbiAgICB9O1xuICAgIE1hc2tlci5wcm90b3R5cGUucHJvY2Vzc1Jhd01hc2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBjaGFyYWN0ZXJDb3VudCA9IDA7XG4gICAgICAgIGlmIChpc1N0cmluZyh0aGlzLm1hc2tGb3JtYXQpKSB7XG4gICAgICAgICAgICB2YXIgaXNPcHRpb25hbCA9IGZhbHNlLCBudW1iZXJPZk9wdGlvbmFsQ2hhcmFjdGVycyA9IDAsIHNwbGl0TWFzayA9IHRoaXMubWFza0Zvcm1hdC5zcGxpdCgnJyk7XG4gICAgICAgICAgICBzcGxpdE1hc2suZm9yRWFjaChmdW5jdGlvbiAoY2hyLCBpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1hc2tEZWZpbml0aW9uc1tjaHJdKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm1hc2tDYXJldE1hcC5wdXNoKGNoYXJhY3RlckNvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMubWFza1BsYWNlaG9sZGVyICs9IF90aGlzLmdldFBsYWNlaG9sZGVyQ2hhcihpIC0gbnVtYmVyT2ZPcHRpb25hbENoYXJhY3RlcnMpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5tYXNrUGF0dGVybnMucHVzaChtYXNrRGVmaW5pdGlvbnNbY2hyXSk7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJhY3RlckNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNPcHRpb25hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubWluUmVxdWlyZWRMZW5ndGgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpc09wdGlvbmFsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNociA9PT0gJz8nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzT3B0aW9uYWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBudW1iZXJPZk9wdGlvbmFsQ2hhcmFjdGVycysrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMubWFza1BsYWNlaG9sZGVyICs9IGNocjtcbiAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyQ291bnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hc2tDYXJldE1hcC5wdXNoKHRoaXMubWFza0NhcmV0TWFwLnNsaWNlKCkucG9wKCkgKyAxKTtcbiAgICAgICAgdGhpcy5nZXRNYXNrQ29tcG9uZW50cygpO1xuICAgICAgICB0aGlzLm1hc2tQcm9jZXNzZWQgPSB0aGlzLm1hc2tDYXJldE1hcC5sZW5ndGggPiAxID8gdHJ1ZSA6IGZhbHNlO1xuICAgIH07XG4gICAgTWFza2VyLnByb3RvdHlwZS5nZXRNYXNrQ29tcG9uZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1hc2tQbGFjZWhvbGRlckNoYXJzID0gdGhpcy5tYXNrUGxhY2Vob2xkZXIuc3BsaXQoJycpLCBtYXNrUGxhY2Vob2xkZXJDb3B5O1xuICAgICAgICBpZiAodGhpcy5tYXNrQ2FyZXRNYXAgJiYgIWlzTmFOKHRoaXMubWFza0NhcmV0TWFwWzBdKSkge1xuICAgICAgICAgICAgdGhpcy5tYXNrQ2FyZXRNYXAuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBtYXNrUGxhY2Vob2xkZXJDaGFyc1t2YWx1ZV0gPSAnXyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBtYXNrUGxhY2Vob2xkZXJDb3B5ID0gbWFza1BsYWNlaG9sZGVyQ2hhcnMuam9pbignJyk7XG4gICAgICAgIHRoaXMubWFza0NvbXBvbmVudHMgPSBtYXNrUGxhY2Vob2xkZXJDb3B5LnJlcGxhY2UoL1tfXSsvZywgJ18nKS5zcGxpdCgnXycpO1xuICAgIH07XG4gICAgTWFza2VyLnByb3RvdHlwZS5nZXRQbGFjZWhvbGRlckNoYXIgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICB2YXIgZGVmYXVsdFBsYWNlaG9sZGVyQ2hhciA9IHRoaXMucGxhY2Vob2xkZXI7XG4gICAgICAgIHJldHVybiAoZGVmYXVsdFBsYWNlaG9sZGVyQ2hhci50b0xvd2VyQ2FzZSgpID09PSAnc3BhY2UnKSA/ICcgJyA6IGRlZmF1bHRQbGFjZWhvbGRlckNoYXJbMF07XG4gICAgfTtcbiAgICBNYXNrZXIucHJvdG90eXBlLmlzVmFsaWRBdCA9IGZ1bmN0aW9uIChjaHIsIGNhcmV0UG9zKSB7XG4gICAgICAgIHZhciBpeCA9IHRoaXMubWFza0NhcmV0TWFwLmluZGV4T2YoY2FyZXRQb3MpO1xuICAgICAgICBpZiAoaXggPT0gLTEgfHwgaXggPj0gdGhpcy5tYXNrUGF0dGVybnMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgcGF0dGVybiA9IHRoaXMubWFza1BhdHRlcm5zW2l4XTtcbiAgICAgICAgcmV0dXJuIHBhdHRlcm4udGVzdChjaHIpO1xuICAgIH07XG4gICAgcmV0dXJuIE1hc2tlcjtcbn0oKSk7XG5leHBvcnRzLk1hc2tlciA9IE1hc2tlcjtcbmZ1bmN0aW9uIGlzU3RyaW5nKG15VmFyKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgbXlWYXIgPT09ICdzdHJpbmcnIHx8IG15VmFyIGluc3RhbmNlb2YgU3RyaW5nKTtcbn1cbmV4cG9ydHMuaXNTdHJpbmcgPSBpc1N0cmluZztcbmZ1bmN0aW9uIGlzTnVtZXJpYyhuKSB7XG4gICAgcmV0dXJuICFpc1N0cmluZyhuKSAmJiAhaXNOYU4ocGFyc2VGbG9hdChuKSkgJiYgaXNGaW5pdGUobik7XG59XG5leHBvcnRzLmlzTnVtZXJpYyA9IGlzTnVtZXJpYztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hc2tlci5qcy5tYXAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///8Pyf\n");

/***/ }),

/***/ "aurelia-mask/dist/masked-input":
/*!********************************************************!*\
  !*** ./node_modules/aurelia-mask/dist/masked-input.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar aurelia_framework_1 = __webpack_require__(/*! aurelia-framework */ \"aurelia-framework\");\nvar masker_1 = __webpack_require__(/*! ./masker */ \"8Pyf\");\nfunction findFirstInputElement(elt) {\n    var elts = elt.getElementsByTagName(\"input\");\n    if (elts.length == 0) {\n        throw new Error(\"'masked' attribute is not on an input element\");\n    }\n    return elts[0];\n}\nvar MaskedInput = (function () {\n    function MaskedInput(element) {\n        var _this = this;\n        this.isAttached = false;\n        this.element = element;\n        this.preventBackspace = false;\n        this.keyDownHandler = function (e) { return _this.onKeyDown(e); };\n        this.keyUpHandler = function (e) { return _this.onKeyUp(e); };\n        this.clickHandler = function (e) { return _this.onClick(e); };\n        this.inputHandler = function (e) { return _this.onInput(e); };\n        this.focusHandler = function (e) { return _this.onFocus(e); };\n        this.selectHandler = function (e) { return _this.onSelect(e); };\n    }\n    MaskedInput.prototype.bind = function () {\n        if (this.mask == null) {\n            throw new Error(\"mask needs to be defined\");\n        }\n        this.makeMasker();\n        this.oldValue = this.masker.maskValue(this.numberToString(this.value));\n        this.oldValueUnmasked = this.masker.unmaskValue(this.oldValue);\n    };\n    MaskedInput.prototype.attached = function () {\n        this.isAttached = true;\n        this.findInputElement();\n        this.inputElement.addEventListener(\"keydown\", this.keyDownHandler);\n        this.inputElement.addEventListener('keyup', this.keyUpHandler);\n        this.inputElement.addEventListener('input', this.inputHandler);\n        this.inputElement.addEventListener('mouseup', this.clickHandler);\n        this.inputElement.addEventListener('focus', this.focusHandler);\n        this.inputElement.addEventListener('select', this.selectHandler);\n        this.caretPos = this.getCaretPosition();\n        this.inputElement.value = this.oldValue;\n        this.updateUIValue(this.oldValue, false, this.minCaretPos, this.minCaretPos);\n    };\n    MaskedInput.prototype.findInputElement = function () {\n        if (this.element.tagName.toLowerCase() === \"input\") {\n            this.inputElement = this.element;\n        }\n        else if (this.findInput != null) {\n            this.inputElement = this.findInput(this.element);\n        }\n        else {\n            this.inputElement = findFirstInputElement(this.element);\n        }\n    };\n    MaskedInput.prototype.detached = function () {\n        this.inputElement.removeEventListener(\"keydown\", this.keyDownHandler);\n        this.inputElement.removeEventListener('keyup', this.keyUpHandler);\n        this.inputElement.removeEventListener('input', this.inputHandler);\n        this.inputElement.removeEventListener('mouseup', this.clickHandler);\n        this.inputElement.removeEventListener('focus', this.focusHandler);\n        this.inputElement.removeEventListener('select', this.selectHandler);\n    };\n    Object.defineProperty(MaskedInput.prototype, \"maxCaretPos\", {\n        get: function () {\n            if (this.masker == null) {\n                return 0;\n            }\n            var valUnmasked = this.unmaskedModelValue;\n            var caretPosMax = this.masker.maxCaretPos(valUnmasked);\n            return caretPosMax;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MaskedInput.prototype, \"minCaretPos\", {\n        get: function () {\n            if (this.masker == null) {\n                return 0;\n            }\n            return this.masker.minCaretPos();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MaskedInput.prototype.onSelect = function (e) {\n        this.oldSelectionLength = this.getSelectionLength();\n    };\n    MaskedInput.prototype.onClick = function (e) {\n        e = e || {};\n        var valUnmasked = this.unmaskedUIValue;\n        var caretPos = this.getCaretPosition() || 0;\n        var caretPosOld = this.oldCaretPosition || 0;\n        var caretPosDelta = caretPos - caretPosOld;\n        var selectionLenOld = this.oldSelectionLength || 0;\n        var isSelected = this.getSelectionLength() > 0;\n        var wasSelected = selectionLenOld > 0;\n        var isKeyBackspace = (this.isDeletion() && (caretPosDelta === -1));\n        var isKeyDelete = (this.isDeletion() && (caretPosDelta === 0) && !wasSelected);\n        var caretBumpBack = caretPos > this.minCaretPos;\n        this.oldSelectionLength = 0;\n        if (isSelected) {\n            this.oldCaretPosition = -1;\n            return;\n        }\n        if (isKeyBackspace && this.preventBackspace) {\n            this.inputElement.value = this.oldValue;\n            this.setCaretPosition(caretPosOld);\n            return;\n        }\n        this.updateUIValue(valUnmasked, caretBumpBack, caretPos, caretPosOld);\n    };\n    Object.defineProperty(MaskedInput.prototype, \"unmaskedUIValue\", {\n        get: function () {\n            if (this.isAttached) {\n                var val = this.inputElement.value;\n                var unmasked = this.masker.unmaskValue(val);\n                return unmasked;\n            }\n            else {\n                return this.numberToString(this.value);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MaskedInput.prototype, \"unmaskedModelValue\", {\n        get: function () {\n            return this.getUnmaskedValue(this.value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MaskedInput.prototype.getUnmaskedValue = function (_val) {\n        var val = this.numberToString(_val);\n        var unmasked = this.masker.unmaskValue(val);\n        return unmasked;\n    };\n    MaskedInput.prototype.isAddition = function (doterriblethings) {\n        if (doterriblethings === void 0) { doterriblethings = false; }\n        var val = this.unmaskedUIValue;\n        var maskedVal = this.inputElement.value;\n        if (doterriblethings && (this.bindMasking || this.aspnetMasking)) {\n            val = this.inputElement.value;\n        }\n        var valOld = this.oldValueUnmasked;\n        var oldMaskedVal = this.oldValue;\n        var selectionLenOld = this.oldSelectionLength || 0;\n        var _isAddition = (val.length > valOld.length) || (selectionLenOld && maskedVal.length > oldMaskedVal.length - selectionLenOld);\n        return _isAddition;\n    };\n    MaskedInput.prototype.isSingleAddition = function () {\n        var val = this.inputElement.value;\n        var valOld = this.oldValueUnmasked;\n        var selectionLenOld = this.oldSelectionLength || 0;\n        var _isAddition = (val.length == valOld.length + 1);\n        return _isAddition;\n    };\n    MaskedInput.prototype.isDeletion = function () {\n        var val = this.inputElement.value;\n        var valOld = this.oldValue;\n        var selectionLenOld = this.oldSelectionLength || 0;\n        var _isDeletion = (val.length < valOld.length) || (selectionLenOld && val.length === valOld.length - selectionLenOld);\n        return _isDeletion;\n    };\n    MaskedInput.prototype.onInput = function (e) {\n        e = e || {};\n        var valUnmasked = this.unmaskedUIValue;\n        var valUnmaskedOld = this.oldValueUnmasked;\n        var caretPos = this.getCaretPosition() || 0;\n        var caretPosOld = this.oldCaretPosition || 0;\n        if (caretPosOld === -1) {\n            caretPosOld = caretPos - 1;\n        }\n        var caretPosDelta = caretPos - caretPosOld;\n        var selectionLenOld = this.oldSelectionLength || 0;\n        var wasSelected = selectionLenOld > 0;\n        if (this.isSingleAddition() && this.editMode === \"overtype\") {\n            valUnmasked = this.inputElement.value;\n            if (this.isValidCaretPosition(caretPosOld)) {\n                var newChar = valUnmasked.charAt(caretPosOld);\n                if (this.masker.isValidAt(newChar, caretPosOld)) {\n                    valUnmasked = valUnmasked.substr(0, caretPos) + valUnmasked.substr(caretPos + 1);\n                    valUnmasked = this.masker.unmaskValue(valUnmasked);\n                }\n                else {\n                    valUnmasked = valUnmasked.substr(0, caretPosOld) + valUnmasked.substr(caretPosOld + 1);\n                    valUnmasked = this.masker.unmaskValue(valUnmasked);\n                }\n                caretPos = this.masker.getNextCaretPos(caretPosOld);\n            }\n            else {\n                var newChar = this.inputElement.value.charAt(caretPosOld) || \"\";\n                if (!this.isValidCaretPosition(caretPos)) {\n                    caretPos = this.masker.getNextCaretPos(caretPos);\n                }\n                valUnmasked = this.oldValue.substr(0, caretPos) + newChar + this.oldValue.substr(caretPos + 1);\n                valUnmasked = this.masker.unmaskValue(valUnmasked);\n                caretPos = this.masker.getNextCaretPos(caretPos);\n            }\n        }\n        var isKeyBackspace = (this.isDeletion() && (caretPosDelta === -1));\n        var isKeyDelete = (this.isDeletion() && (caretPosDelta === 0) && !wasSelected);\n        var caretBumpBack = (isKeyBackspace) && caretPos > this.minCaretPos;\n        if (wasSelected && this.isAddition(true)) {\n            var startCaretPos = Math.min(caretPos, caretPosOld);\n            if (caretPos < caretPosOld) {\n                startCaretPos--;\n            }\n            if (selectionLenOld == this.oldValue.length && this.editMode === \"insert\") {\n                var maskedValue = this.masker.maskValue(this.inputElement.value);\n                var newDelta = maskedValue.length - (this.oldValue.length - selectionLenOld);\n                caretPos = startCaretPos + newDelta;\n            }\n            else {\n                var oldSelectionStart = startCaretPos;\n                var oldSuffix = this.oldValue.substr(oldSelectionStart + selectionLenOld);\n                var oldPrefix = this.oldValue.substr(0, oldSelectionStart);\n                var newPart = this.inputElement.value;\n                if (newPart.startsWith(oldPrefix)) {\n                    newPart = newPart.substr(oldPrefix.length);\n                }\n                if (newPart.endsWith(oldSuffix)) {\n                    newPart = newPart.substr(0, newPart.length - oldSuffix.length);\n                }\n                if (!this.isValidCaretPosition(startCaretPos)) {\n                    startCaretPos = this.masker.getNextCaretPos(startCaretPos);\n                }\n                if (this.inputElement.value.length === 1) {\n                    caretPos = this.masker.getNextCaretPos(startCaretPos);\n                }\n                else {\n                    var newDelta = this.inputElement.value.length - (this.oldValue.length - selectionLenOld);\n                    caretPos = startCaretPos + newDelta;\n                }\n                var allPlaceholder = this.masker.maskValue(\"\");\n                if (newPart.length < selectionLenOld) {\n                    var caretDiff = startCaretPos - oldSelectionStart;\n                    var fill = allPlaceholder.substr(startCaretPos + newPart.length, selectionLenOld - newPart.length - caretDiff);\n                    var fillPrefix = allPlaceholder.substr(oldSelectionStart, caretDiff);\n                    valUnmasked = oldPrefix + fillPrefix + newPart + fill + oldSuffix;\n                    valUnmasked = this.masker.unmaskValue(valUnmasked);\n                }\n            }\n        }\n        this.oldSelectionLength = this.getSelectionLength();\n        if (isKeyBackspace && this.preventBackspace && !wasSelected) {\n            this.inputElement.value = this.oldValue;\n            this.setCaretPosition(caretPosOld);\n            return;\n        }\n        if (this.isDeletion() && !wasSelected && !this.isValidCaretPosition(caretPos)) {\n            caretPos = this.masker.getPreviousCaretPos(caretPos);\n            valUnmasked = this.masker.unmaskValue(this.oldValue.substring(0, caretPos) + this.oldValue.substring(caretPos + 1));\n        }\n        else if (this.isDeletion() && !wasSelected && valUnmasked === valUnmaskedOld) {\n            while (isKeyBackspace && caretPos > this.minCaretPos && !this.isValidCaretPosition(caretPos)) {\n                caretPos--;\n            }\n            while (isKeyDelete && caretPos < this.maxCaretPos && this.masker.maskCaretMap.indexOf(caretPos) === -1) {\n                caretPos++;\n            }\n            var charIndex = this.masker.maskCaretMap.indexOf(caretPos);\n            if (charIndex != 0) {\n                if (!this.aspnetMasking) {\n                    valUnmasked = valUnmasked.substring(0, charIndex) + valUnmasked.substring(charIndex + 1);\n                }\n            }\n        }\n        this.updateUIValue(valUnmasked, caretBumpBack, caretPos, caretPosOld);\n        this._setValue(valUnmasked);\n    };\n    MaskedInput.prototype._setValue = function (newValue) {\n        if (masker_1.isNumeric(newValue) && masker_1.isString(this.value) && this.numberToString(newValue) === this.value) {\n            return;\n        }\n        if (masker_1.isNumeric(this.value) && masker_1.isString(newValue) && this.numberToString(this.value) === newValue) {\n            return;\n        }\n        if (!this.value && this.value !== 0 && !newValue && newValue !== 0) {\n            return;\n        }\n        if (this.change != null && newValue !== this.value) {\n            this.change({ newValue: newValue, oldValue: this.value });\n        }\n        this.value = newValue;\n    };\n    MaskedInput.prototype.numberToString = function (val) {\n        if (val == null)\n            val = \"\";\n        return \"\" + val;\n    };\n    MaskedInput.prototype.stringToNumber = function (val) {\n        if (masker_1.isNumeric(val)) {\n            return val;\n        }\n        return parseFloat(val);\n    };\n    MaskedInput.prototype.onFocus = function (e) {\n        e = e || {};\n        var valUnmasked = this.unmaskedUIValue;\n        var caretPos = this.getCaretPosition() || 0;\n        var caretPosOld = this.oldCaretPosition || 0;\n        var caretPosDelta = caretPos - caretPosOld;\n        var selectionLenOld = this.oldSelectionLength || 0;\n        var wasSelected = selectionLenOld > 0;\n        var isKeyBackspace = (this.isDeletion() && (caretPosDelta === -1));\n        var isKeyDelete = (this.isDeletion() && (caretPosDelta === 0) && !wasSelected);\n        var caretBumpBack = (isKeyBackspace) && caretPos > this.minCaretPos;\n        this.oldSelectionLength = 0;\n        if (isKeyBackspace && this.preventBackspace) {\n            this.inputElement.value = this.oldValue;\n            this.setCaretPosition(caretPosOld);\n            return;\n        }\n        this.updateUIValue(valUnmasked, caretBumpBack, caretPos, caretPosOld);\n        this.inputElement.setSelectionRange(0, this.inputElement.value.length);\n        this.oldSelectionLength = this.getSelectionLength();\n    };\n    MaskedInput.prototype.onKeyUp = function (e) {\n        e = e || {};\n        var eventType = e.type;\n        if (e.which === 16 || e.which === 91) {\n            return;\n        }\n        var valUnmasked = this.unmaskedUIValue;\n        var caretPos = this.getCaretPosition() || 0;\n        var caretPosOld = this.oldCaretPosition || 0;\n        var caretPosDelta = caretPos - caretPosOld;\n        var selectionLenOld = this.oldSelectionLength || 0;\n        var isSelected = this.getSelectionLength() > 0;\n        var isSelection = (e.which >= 37 && e.which <= 40) && e.shiftKey;\n        var isKeyLeftArrow = e.which === 37;\n        var isKeyBackspace = e.which === 8;\n        var isKeyDelete = e.which === 46;\n        var caretBumpBack = (isKeyLeftArrow || isKeyBackspace) && caretPos > this.minCaretPos;\n        this.oldSelectionLength = this.getSelectionLength();\n        if (isSelection || isSelected) {\n            return;\n        }\n        if (isKeyBackspace && this.preventBackspace) {\n            this.inputElement.value = this.oldValue;\n            this.setCaretPosition(caretPosOld);\n            return;\n        }\n        this.updateUIValue(valUnmasked, caretBumpBack, caretPos, caretPosOld);\n        this._setValue(valUnmasked);\n    };\n    MaskedInput.prototype.updateUIValue = function (valUnmasked, caretBumpBack, caretPos, caretPosOld) {\n        var isAddition = this.isAddition();\n        var valMasked = this.masker.maskValue(valUnmasked);\n        var caretPosMin = this.minCaretPos;\n        var caretPosMax = this.masker.maxCaretPos(valUnmasked);\n        this.oldValue = valMasked;\n        this.oldValueUnmasked = valUnmasked;\n        if (this.isAttached) {\n            this.inputElement.value = valMasked;\n        }\n        if (isAddition && (caretPos <= caretPosMin)) {\n            caretPos = caretPosMin + 1;\n        }\n        if (caretBumpBack) {\n            caretPos--;\n        }\n        caretPos = caretPos > caretPosMax ? caretPosMax : caretPos < caretPosMin ? caretPosMin : caretPos;\n        while (!this.isValidCaretPosition(caretPos) && caretPos > caretPosMin && caretPos < caretPosMax) {\n            caretPos += caretBumpBack ? -1 : 1;\n        }\n        if ((caretBumpBack && caretPos < caretPosMax) || (isAddition && !this.isValidCaretPosition(caretPosOld))) {\n            caretPos++;\n        }\n        this.oldCaretPosition = caretPos;\n        this.caretPos = caretPos;\n        this.setCaretPosition(this.caretPos);\n    };\n    MaskedInput.prototype.getSelectionLength = function () {\n        if (!this.inputElement)\n            return 0;\n        if (this.inputElement.selectionStart !== undefined) {\n            return (this.inputElement.selectionEnd - this.inputElement.selectionStart);\n        }\n        if (document.selection) {\n            return (document.selection.createRange().text.length);\n        }\n        return 0;\n    };\n    MaskedInput.prototype.onKeyDown = function (e) {\n        var isKeyBackspace = e.which === 8;\n        var oldCaretPos = this.getCaretPosition();\n        var newCaretPosOnBksp = oldCaretPos - 1 || 0;\n        if (isKeyBackspace) {\n            while (newCaretPosOnBksp >= 0) {\n                if (this.isValidCaretPosition(newCaretPosOnBksp)) {\n                    this.caretPos = newCaretPosOnBksp;\n                    break;\n                }\n                newCaretPosOnBksp--;\n            }\n            this.preventBackspace = newCaretPosOnBksp === -1;\n        }\n    };\n    MaskedInput.prototype.getCaretPosition = function () {\n        if (!this.inputElement)\n            return 0;\n        if (this.inputElement.selectionStart !== undefined) {\n            return this.inputElement.selectionStart;\n        }\n        else if (document.selection) {\n            if (this.isFocused()) {\n                this.inputElement.focus();\n                var selection = document.selection.createRange();\n                selection.moveStart('character', this.inputElement.value ? -this.inputElement.value.length : 0);\n                return selection.text.length;\n            }\n        }\n        return 0;\n    };\n    MaskedInput.prototype.isValidCaretPosition = function (pos) {\n        return this.masker.maskCaretMap.indexOf(pos) > -1;\n    };\n    MaskedInput.prototype.setCaretPosition = function (pos) {\n        if (!this.inputElement)\n            return 0;\n        if (this.isHidden()) {\n            return;\n        }\n        if (this.inputElement.setSelectionRange) {\n            if (this.isFocused()) {\n                this.inputElement.focus();\n                this.inputElement.setSelectionRange(pos, pos);\n            }\n        }\n        else if (this.inputElement.createTextRange) {\n            var range = this.inputElement.createTextRange();\n            range.collapse(true);\n            range.moveEnd('character', pos);\n            range.moveStart('character', pos);\n            range.select();\n        }\n    };\n    MaskedInput.prototype.isFocused = function () {\n        return this.inputElement === document.activeElement && (!document.hasFocus || document.hasFocus()) &&\n            !!(this.inputElement.type || this.inputElement.href || ~this.inputElement.tabIndex);\n    };\n    MaskedInput.prototype.isHidden = function () {\n        return (this.inputElement.offsetWidth === 0 || this.inputElement.offsetHeight === 0);\n    };\n    MaskedInput.prototype.maskChanged = function () {\n        this.makeMasker();\n        this.setValue(this.value);\n    };\n    MaskedInput.prototype.makeMasker = function () {\n        this.masker = masker_1.getMasker({\n            maskFormat: this.mask,\n            bindMasking: this.bindMasking,\n            placeholder: this.placeholder,\n            aspnetMasking: this.aspnetMasking\n        });\n    };\n    MaskedInput.prototype.setValue = function (newValue) {\n        var valUnmasked = this.getUnmaskedValue(newValue);\n        var caretPos = this.getCaretPosition() || 0;\n        var caretPosOld = this.oldCaretPosition || 0;\n        var caretPosDelta = caretPos - caretPosOld;\n        var selectionLenOld = this.oldSelectionLength || 0;\n        var isSelected = this.getSelectionLength() > 0;\n        var caretBumpBack = caretPos > this.minCaretPos;\n        this.oldSelectionLength = this.getSelectionLength();\n        if (this.editMode === \"overtype\") {\n            var strippedOld = this.masker.stripPlaceholders(this.value);\n            var strippedNew = this.masker.stripPlaceholders(newValue);\n            caretBumpBack = caretBumpBack && strippedNew.length < strippedOld.length;\n        }\n        this.updateUIValue(valUnmasked, caretBumpBack, caretPos, caretPosOld);\n        this._setValue(valUnmasked);\n    };\n    __decorate([\n        aurelia_framework_1.bindable({ defaultBindingMode: aurelia_framework_1.bindingMode.twoWay }),\n        __metadata(\"design:type\", Object)\n    ], MaskedInput.prototype, \"value\", void 0);\n    __decorate([\n        aurelia_framework_1.bindable,\n        __metadata(\"design:type\", String)\n    ], MaskedInput.prototype, \"mask\", void 0);\n    __decorate([\n        aurelia_framework_1.bindable,\n        __metadata(\"design:type\", String)\n    ], MaskedInput.prototype, \"inputId\", void 0);\n    __decorate([\n        aurelia_framework_1.bindable,\n        __metadata(\"design:type\", String)\n    ], MaskedInput.prototype, \"inputClass\", void 0);\n    __decorate([\n        aurelia_framework_1.bindable,\n        __metadata(\"design:type\", Boolean)\n    ], MaskedInput.prototype, \"disabled\", void 0);\n    __decorate([\n        aurelia_framework_1.bindable({ defaultBindingMode: aurelia_framework_1.bindingMode.oneTime, defaultValue: false }),\n        __metadata(\"design:type\", Boolean)\n    ], MaskedInput.prototype, \"bindMasking\", void 0);\n    __decorate([\n        aurelia_framework_1.bindable({ defaultBindingMode: aurelia_framework_1.bindingMode.oneTime, defaultValue: false }),\n        __metadata(\"design:type\", Boolean)\n    ], MaskedInput.prototype, \"aspnetMasking\", void 0);\n    __decorate([\n        aurelia_framework_1.bindable({ defaultBindingMode: aurelia_framework_1.bindingMode.oneTime, defaultValue: null }),\n        __metadata(\"design:type\", String)\n    ], MaskedInput.prototype, \"placeholder\", void 0);\n    __decorate([\n        aurelia_framework_1.bindable({ defaultBindingMode: aurelia_framework_1.bindingMode.oneTime, defaultValue: \"insert\" }),\n        __metadata(\"design:type\", String)\n    ], MaskedInput.prototype, \"editMode\", void 0);\n    __decorate([\n        aurelia_framework_1.bindable({ defaultBindingMode: aurelia_framework_1.bindingMode.oneTime, defaultValue: null }),\n        __metadata(\"design:type\", Function)\n    ], MaskedInput.prototype, \"findInput\", void 0);\n    __decorate([\n        aurelia_framework_1.bindable(),\n        __metadata(\"design:type\", Function)\n    ], MaskedInput.prototype, \"change\", void 0);\n    MaskedInput = __decorate([\n        aurelia_framework_1.customAttribute('masked'),\n        aurelia_framework_1.inject(Element),\n        __metadata(\"design:paramtypes\", [Element])\n    ], MaskedInput);\n    return MaskedInput;\n}());\nexports.MaskedInput = MaskedInput;\n//# sourceMappingURL=masked-input.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXVyZWxpYS1tYXNrL2Rpc3QvbWFza2VkLWlucHV0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2F1cmVsaWEtbWFzay9kaXN0L21hc2tlZC1pbnB1dC5qcz9jNzQ4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xudmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBhdXJlbGlhX2ZyYW1ld29ya18xID0gcmVxdWlyZShcImF1cmVsaWEtZnJhbWV3b3JrXCIpO1xudmFyIG1hc2tlcl8xID0gcmVxdWlyZShcIi4vbWFza2VyXCIpO1xuZnVuY3Rpb24gZmluZEZpcnN0SW5wdXRFbGVtZW50KGVsdCkge1xuICAgIHZhciBlbHRzID0gZWx0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIik7XG4gICAgaWYgKGVsdHMubGVuZ3RoID09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ21hc2tlZCcgYXR0cmlidXRlIGlzIG5vdCBvbiBhbiBpbnB1dCBlbGVtZW50XCIpO1xuICAgIH1cbiAgICByZXR1cm4gZWx0c1swXTtcbn1cbnZhciBNYXNrZWRJbnB1dCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWFza2VkSW5wdXQoZWxlbWVudCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmlzQXR0YWNoZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5wcmV2ZW50QmFja3NwYWNlID0gZmFsc2U7XG4gICAgICAgIHRoaXMua2V5RG93bkhhbmRsZXIgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMub25LZXlEb3duKGUpOyB9O1xuICAgICAgICB0aGlzLmtleVVwSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5vbktleVVwKGUpOyB9O1xuICAgICAgICB0aGlzLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5vbkNsaWNrKGUpOyB9O1xuICAgICAgICB0aGlzLmlucHV0SGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5vbklucHV0KGUpOyB9O1xuICAgICAgICB0aGlzLmZvY3VzSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5vbkZvY3VzKGUpOyB9O1xuICAgICAgICB0aGlzLnNlbGVjdEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMub25TZWxlY3QoZSk7IH07XG4gICAgfVxuICAgIE1hc2tlZElucHV0LnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5tYXNrID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hc2sgbmVlZHMgdG8gYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1ha2VNYXNrZXIoKTtcbiAgICAgICAgdGhpcy5vbGRWYWx1ZSA9IHRoaXMubWFza2VyLm1hc2tWYWx1ZSh0aGlzLm51bWJlclRvU3RyaW5nKHRoaXMudmFsdWUpKTtcbiAgICAgICAgdGhpcy5vbGRWYWx1ZVVubWFza2VkID0gdGhpcy5tYXNrZXIudW5tYXNrVmFsdWUodGhpcy5vbGRWYWx1ZSk7XG4gICAgfTtcbiAgICBNYXNrZWRJbnB1dC5wcm90b3R5cGUuYXR0YWNoZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaXNBdHRhY2hlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZmluZElucHV0RWxlbWVudCgpO1xuICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLmtleURvd25IYW5kbGVyKTtcbiAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmtleVVwSGFuZGxlcik7XG4gICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdGhpcy5pbnB1dEhhbmRsZXIpO1xuICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuZm9jdXNIYW5kbGVyKTtcbiAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0JywgdGhpcy5zZWxlY3RIYW5kbGVyKTtcbiAgICAgICAgdGhpcy5jYXJldFBvcyA9IHRoaXMuZ2V0Q2FyZXRQb3NpdGlvbigpO1xuICAgICAgICB0aGlzLmlucHV0RWxlbWVudC52YWx1ZSA9IHRoaXMub2xkVmFsdWU7XG4gICAgICAgIHRoaXMudXBkYXRlVUlWYWx1ZSh0aGlzLm9sZFZhbHVlLCBmYWxzZSwgdGhpcy5taW5DYXJldFBvcywgdGhpcy5taW5DYXJldFBvcyk7XG4gICAgfTtcbiAgICBNYXNrZWRJbnB1dC5wcm90b3R5cGUuZmluZElucHV0RWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiaW5wdXRcIikge1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5maW5kSW5wdXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQgPSB0aGlzLmZpbmRJbnB1dCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQgPSBmaW5kRmlyc3RJbnB1dEVsZW1lbnQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTWFza2VkSW5wdXQucHJvdG90eXBlLmRldGFjaGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLmtleURvd25IYW5kbGVyKTtcbiAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmtleVVwSGFuZGxlcik7XG4gICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdGhpcy5pbnB1dEhhbmRsZXIpO1xuICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuZm9jdXNIYW5kbGVyKTtcbiAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2VsZWN0JywgdGhpcy5zZWxlY3RIYW5kbGVyKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYXNrZWRJbnB1dC5wcm90b3R5cGUsIFwibWF4Q2FyZXRQb3NcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1hc2tlciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdmFsVW5tYXNrZWQgPSB0aGlzLnVubWFza2VkTW9kZWxWYWx1ZTtcbiAgICAgICAgICAgIHZhciBjYXJldFBvc01heCA9IHRoaXMubWFza2VyLm1heENhcmV0UG9zKHZhbFVubWFza2VkKTtcbiAgICAgICAgICAgIHJldHVybiBjYXJldFBvc01heDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hc2tlZElucHV0LnByb3RvdHlwZSwgXCJtaW5DYXJldFBvc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubWFza2VyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hc2tlci5taW5DYXJldFBvcygpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBNYXNrZWRJbnB1dC5wcm90b3R5cGUub25TZWxlY3QgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB0aGlzLm9sZFNlbGVjdGlvbkxlbmd0aCA9IHRoaXMuZ2V0U2VsZWN0aW9uTGVuZ3RoKCk7XG4gICAgfTtcbiAgICBNYXNrZWRJbnB1dC5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUgPSBlIHx8IHt9O1xuICAgICAgICB2YXIgdmFsVW5tYXNrZWQgPSB0aGlzLnVubWFza2VkVUlWYWx1ZTtcbiAgICAgICAgdmFyIGNhcmV0UG9zID0gdGhpcy5nZXRDYXJldFBvc2l0aW9uKCkgfHwgMDtcbiAgICAgICAgdmFyIGNhcmV0UG9zT2xkID0gdGhpcy5vbGRDYXJldFBvc2l0aW9uIHx8IDA7XG4gICAgICAgIHZhciBjYXJldFBvc0RlbHRhID0gY2FyZXRQb3MgLSBjYXJldFBvc09sZDtcbiAgICAgICAgdmFyIHNlbGVjdGlvbkxlbk9sZCA9IHRoaXMub2xkU2VsZWN0aW9uTGVuZ3RoIHx8IDA7XG4gICAgICAgIHZhciBpc1NlbGVjdGVkID0gdGhpcy5nZXRTZWxlY3Rpb25MZW5ndGgoKSA+IDA7XG4gICAgICAgIHZhciB3YXNTZWxlY3RlZCA9IHNlbGVjdGlvbkxlbk9sZCA+IDA7XG4gICAgICAgIHZhciBpc0tleUJhY2tzcGFjZSA9ICh0aGlzLmlzRGVsZXRpb24oKSAmJiAoY2FyZXRQb3NEZWx0YSA9PT0gLTEpKTtcbiAgICAgICAgdmFyIGlzS2V5RGVsZXRlID0gKHRoaXMuaXNEZWxldGlvbigpICYmIChjYXJldFBvc0RlbHRhID09PSAwKSAmJiAhd2FzU2VsZWN0ZWQpO1xuICAgICAgICB2YXIgY2FyZXRCdW1wQmFjayA9IGNhcmV0UG9zID4gdGhpcy5taW5DYXJldFBvcztcbiAgICAgICAgdGhpcy5vbGRTZWxlY3Rpb25MZW5ndGggPSAwO1xuICAgICAgICBpZiAoaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5vbGRDYXJldFBvc2l0aW9uID0gLTE7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzS2V5QmFja3NwYWNlICYmIHRoaXMucHJldmVudEJhY2tzcGFjZSkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQudmFsdWUgPSB0aGlzLm9sZFZhbHVlO1xuICAgICAgICAgICAgdGhpcy5zZXRDYXJldFBvc2l0aW9uKGNhcmV0UG9zT2xkKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVVJVmFsdWUodmFsVW5tYXNrZWQsIGNhcmV0QnVtcEJhY2ssIGNhcmV0UG9zLCBjYXJldFBvc09sZCk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWFza2VkSW5wdXQucHJvdG90eXBlLCBcInVubWFza2VkVUlWYWx1ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNBdHRhY2hlZCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSB0aGlzLmlucHV0RWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgICAgICB2YXIgdW5tYXNrZWQgPSB0aGlzLm1hc2tlci51bm1hc2tWYWx1ZSh2YWwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1bm1hc2tlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bWJlclRvU3RyaW5nKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWFza2VkSW5wdXQucHJvdG90eXBlLCBcInVubWFza2VkTW9kZWxWYWx1ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VW5tYXNrZWRWYWx1ZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTWFza2VkSW5wdXQucHJvdG90eXBlLmdldFVubWFza2VkVmFsdWUgPSBmdW5jdGlvbiAoX3ZhbCkge1xuICAgICAgICB2YXIgdmFsID0gdGhpcy5udW1iZXJUb1N0cmluZyhfdmFsKTtcbiAgICAgICAgdmFyIHVubWFza2VkID0gdGhpcy5tYXNrZXIudW5tYXNrVmFsdWUodmFsKTtcbiAgICAgICAgcmV0dXJuIHVubWFza2VkO1xuICAgIH07XG4gICAgTWFza2VkSW5wdXQucHJvdG90eXBlLmlzQWRkaXRpb24gPSBmdW5jdGlvbiAoZG90ZXJyaWJsZXRoaW5ncykge1xuICAgICAgICBpZiAoZG90ZXJyaWJsZXRoaW5ncyA9PT0gdm9pZCAwKSB7IGRvdGVycmlibGV0aGluZ3MgPSBmYWxzZTsgfVxuICAgICAgICB2YXIgdmFsID0gdGhpcy51bm1hc2tlZFVJVmFsdWU7XG4gICAgICAgIHZhciBtYXNrZWRWYWwgPSB0aGlzLmlucHV0RWxlbWVudC52YWx1ZTtcbiAgICAgICAgaWYgKGRvdGVycmlibGV0aGluZ3MgJiYgKHRoaXMuYmluZE1hc2tpbmcgfHwgdGhpcy5hc3BuZXRNYXNraW5nKSkge1xuICAgICAgICAgICAgdmFsID0gdGhpcy5pbnB1dEVsZW1lbnQudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZhbE9sZCA9IHRoaXMub2xkVmFsdWVVbm1hc2tlZDtcbiAgICAgICAgdmFyIG9sZE1hc2tlZFZhbCA9IHRoaXMub2xkVmFsdWU7XG4gICAgICAgIHZhciBzZWxlY3Rpb25MZW5PbGQgPSB0aGlzLm9sZFNlbGVjdGlvbkxlbmd0aCB8fCAwO1xuICAgICAgICB2YXIgX2lzQWRkaXRpb24gPSAodmFsLmxlbmd0aCA+IHZhbE9sZC5sZW5ndGgpIHx8IChzZWxlY3Rpb25MZW5PbGQgJiYgbWFza2VkVmFsLmxlbmd0aCA+IG9sZE1hc2tlZFZhbC5sZW5ndGggLSBzZWxlY3Rpb25MZW5PbGQpO1xuICAgICAgICByZXR1cm4gX2lzQWRkaXRpb247XG4gICAgfTtcbiAgICBNYXNrZWRJbnB1dC5wcm90b3R5cGUuaXNTaW5nbGVBZGRpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZhbCA9IHRoaXMuaW5wdXRFbGVtZW50LnZhbHVlO1xuICAgICAgICB2YXIgdmFsT2xkID0gdGhpcy5vbGRWYWx1ZVVubWFza2VkO1xuICAgICAgICB2YXIgc2VsZWN0aW9uTGVuT2xkID0gdGhpcy5vbGRTZWxlY3Rpb25MZW5ndGggfHwgMDtcbiAgICAgICAgdmFyIF9pc0FkZGl0aW9uID0gKHZhbC5sZW5ndGggPT0gdmFsT2xkLmxlbmd0aCArIDEpO1xuICAgICAgICByZXR1cm4gX2lzQWRkaXRpb247XG4gICAgfTtcbiAgICBNYXNrZWRJbnB1dC5wcm90b3R5cGUuaXNEZWxldGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZhbCA9IHRoaXMuaW5wdXRFbGVtZW50LnZhbHVlO1xuICAgICAgICB2YXIgdmFsT2xkID0gdGhpcy5vbGRWYWx1ZTtcbiAgICAgICAgdmFyIHNlbGVjdGlvbkxlbk9sZCA9IHRoaXMub2xkU2VsZWN0aW9uTGVuZ3RoIHx8IDA7XG4gICAgICAgIHZhciBfaXNEZWxldGlvbiA9ICh2YWwubGVuZ3RoIDwgdmFsT2xkLmxlbmd0aCkgfHwgKHNlbGVjdGlvbkxlbk9sZCAmJiB2YWwubGVuZ3RoID09PSB2YWxPbGQubGVuZ3RoIC0gc2VsZWN0aW9uTGVuT2xkKTtcbiAgICAgICAgcmV0dXJuIF9pc0RlbGV0aW9uO1xuICAgIH07XG4gICAgTWFza2VkSW5wdXQucHJvdG90eXBlLm9uSW5wdXQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlID0gZSB8fCB7fTtcbiAgICAgICAgdmFyIHZhbFVubWFza2VkID0gdGhpcy51bm1hc2tlZFVJVmFsdWU7XG4gICAgICAgIHZhciB2YWxVbm1hc2tlZE9sZCA9IHRoaXMub2xkVmFsdWVVbm1hc2tlZDtcbiAgICAgICAgdmFyIGNhcmV0UG9zID0gdGhpcy5nZXRDYXJldFBvc2l0aW9uKCkgfHwgMDtcbiAgICAgICAgdmFyIGNhcmV0UG9zT2xkID0gdGhpcy5vbGRDYXJldFBvc2l0aW9uIHx8IDA7XG4gICAgICAgIGlmIChjYXJldFBvc09sZCA9PT0gLTEpIHtcbiAgICAgICAgICAgIGNhcmV0UG9zT2xkID0gY2FyZXRQb3MgLSAxO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjYXJldFBvc0RlbHRhID0gY2FyZXRQb3MgLSBjYXJldFBvc09sZDtcbiAgICAgICAgdmFyIHNlbGVjdGlvbkxlbk9sZCA9IHRoaXMub2xkU2VsZWN0aW9uTGVuZ3RoIHx8IDA7XG4gICAgICAgIHZhciB3YXNTZWxlY3RlZCA9IHNlbGVjdGlvbkxlbk9sZCA+IDA7XG4gICAgICAgIGlmICh0aGlzLmlzU2luZ2xlQWRkaXRpb24oKSAmJiB0aGlzLmVkaXRNb2RlID09PSBcIm92ZXJ0eXBlXCIpIHtcbiAgICAgICAgICAgIHZhbFVubWFza2VkID0gdGhpcy5pbnB1dEVsZW1lbnQudmFsdWU7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1ZhbGlkQ2FyZXRQb3NpdGlvbihjYXJldFBvc09sZCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3Q2hhciA9IHZhbFVubWFza2VkLmNoYXJBdChjYXJldFBvc09sZCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWFza2VyLmlzVmFsaWRBdChuZXdDaGFyLCBjYXJldFBvc09sZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsVW5tYXNrZWQgPSB2YWxVbm1hc2tlZC5zdWJzdHIoMCwgY2FyZXRQb3MpICsgdmFsVW5tYXNrZWQuc3Vic3RyKGNhcmV0UG9zICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIHZhbFVubWFza2VkID0gdGhpcy5tYXNrZXIudW5tYXNrVmFsdWUodmFsVW5tYXNrZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsVW5tYXNrZWQgPSB2YWxVbm1hc2tlZC5zdWJzdHIoMCwgY2FyZXRQb3NPbGQpICsgdmFsVW5tYXNrZWQuc3Vic3RyKGNhcmV0UG9zT2xkICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIHZhbFVubWFza2VkID0gdGhpcy5tYXNrZXIudW5tYXNrVmFsdWUodmFsVW5tYXNrZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXJldFBvcyA9IHRoaXMubWFza2VyLmdldE5leHRDYXJldFBvcyhjYXJldFBvc09sZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3Q2hhciA9IHRoaXMuaW5wdXRFbGVtZW50LnZhbHVlLmNoYXJBdChjYXJldFBvc09sZCkgfHwgXCJcIjtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNWYWxpZENhcmV0UG9zaXRpb24oY2FyZXRQb3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhcmV0UG9zID0gdGhpcy5tYXNrZXIuZ2V0TmV4dENhcmV0UG9zKGNhcmV0UG9zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFsVW5tYXNrZWQgPSB0aGlzLm9sZFZhbHVlLnN1YnN0cigwLCBjYXJldFBvcykgKyBuZXdDaGFyICsgdGhpcy5vbGRWYWx1ZS5zdWJzdHIoY2FyZXRQb3MgKyAxKTtcbiAgICAgICAgICAgICAgICB2YWxVbm1hc2tlZCA9IHRoaXMubWFza2VyLnVubWFza1ZhbHVlKHZhbFVubWFza2VkKTtcbiAgICAgICAgICAgICAgICBjYXJldFBvcyA9IHRoaXMubWFza2VyLmdldE5leHRDYXJldFBvcyhjYXJldFBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlzS2V5QmFja3NwYWNlID0gKHRoaXMuaXNEZWxldGlvbigpICYmIChjYXJldFBvc0RlbHRhID09PSAtMSkpO1xuICAgICAgICB2YXIgaXNLZXlEZWxldGUgPSAodGhpcy5pc0RlbGV0aW9uKCkgJiYgKGNhcmV0UG9zRGVsdGEgPT09IDApICYmICF3YXNTZWxlY3RlZCk7XG4gICAgICAgIHZhciBjYXJldEJ1bXBCYWNrID0gKGlzS2V5QmFja3NwYWNlKSAmJiBjYXJldFBvcyA+IHRoaXMubWluQ2FyZXRQb3M7XG4gICAgICAgIGlmICh3YXNTZWxlY3RlZCAmJiB0aGlzLmlzQWRkaXRpb24odHJ1ZSkpIHtcbiAgICAgICAgICAgIHZhciBzdGFydENhcmV0UG9zID0gTWF0aC5taW4oY2FyZXRQb3MsIGNhcmV0UG9zT2xkKTtcbiAgICAgICAgICAgIGlmIChjYXJldFBvcyA8IGNhcmV0UG9zT2xkKSB7XG4gICAgICAgICAgICAgICAgc3RhcnRDYXJldFBvcy0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGVjdGlvbkxlbk9sZCA9PSB0aGlzLm9sZFZhbHVlLmxlbmd0aCAmJiB0aGlzLmVkaXRNb2RlID09PSBcImluc2VydFwiKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hc2tlZFZhbHVlID0gdGhpcy5tYXNrZXIubWFza1ZhbHVlKHRoaXMuaW5wdXRFbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3RGVsdGEgPSBtYXNrZWRWYWx1ZS5sZW5ndGggLSAodGhpcy5vbGRWYWx1ZS5sZW5ndGggLSBzZWxlY3Rpb25MZW5PbGQpO1xuICAgICAgICAgICAgICAgIGNhcmV0UG9zID0gc3RhcnRDYXJldFBvcyArIG5ld0RlbHRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIG9sZFNlbGVjdGlvblN0YXJ0ID0gc3RhcnRDYXJldFBvcztcbiAgICAgICAgICAgICAgICB2YXIgb2xkU3VmZml4ID0gdGhpcy5vbGRWYWx1ZS5zdWJzdHIob2xkU2VsZWN0aW9uU3RhcnQgKyBzZWxlY3Rpb25MZW5PbGQpO1xuICAgICAgICAgICAgICAgIHZhciBvbGRQcmVmaXggPSB0aGlzLm9sZFZhbHVlLnN1YnN0cigwLCBvbGRTZWxlY3Rpb25TdGFydCk7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1BhcnQgPSB0aGlzLmlucHV0RWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAobmV3UGFydC5zdGFydHNXaXRoKG9sZFByZWZpeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3UGFydCA9IG5ld1BhcnQuc3Vic3RyKG9sZFByZWZpeC5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobmV3UGFydC5lbmRzV2l0aChvbGRTdWZmaXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1BhcnQgPSBuZXdQYXJ0LnN1YnN0cigwLCBuZXdQYXJ0Lmxlbmd0aCAtIG9sZFN1ZmZpeC5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNWYWxpZENhcmV0UG9zaXRpb24oc3RhcnRDYXJldFBvcykpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRDYXJldFBvcyA9IHRoaXMubWFza2VyLmdldE5leHRDYXJldFBvcyhzdGFydENhcmV0UG9zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5wdXRFbGVtZW50LnZhbHVlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBjYXJldFBvcyA9IHRoaXMubWFza2VyLmdldE5leHRDYXJldFBvcyhzdGFydENhcmV0UG9zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdEZWx0YSA9IHRoaXMuaW5wdXRFbGVtZW50LnZhbHVlLmxlbmd0aCAtICh0aGlzLm9sZFZhbHVlLmxlbmd0aCAtIHNlbGVjdGlvbkxlbk9sZCk7XG4gICAgICAgICAgICAgICAgICAgIGNhcmV0UG9zID0gc3RhcnRDYXJldFBvcyArIG5ld0RlbHRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgYWxsUGxhY2Vob2xkZXIgPSB0aGlzLm1hc2tlci5tYXNrVmFsdWUoXCJcIik7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1BhcnQubGVuZ3RoIDwgc2VsZWN0aW9uTGVuT2xkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjYXJldERpZmYgPSBzdGFydENhcmV0UG9zIC0gb2xkU2VsZWN0aW9uU3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmaWxsID0gYWxsUGxhY2Vob2xkZXIuc3Vic3RyKHN0YXJ0Q2FyZXRQb3MgKyBuZXdQYXJ0Lmxlbmd0aCwgc2VsZWN0aW9uTGVuT2xkIC0gbmV3UGFydC5sZW5ndGggLSBjYXJldERpZmYpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmlsbFByZWZpeCA9IGFsbFBsYWNlaG9sZGVyLnN1YnN0cihvbGRTZWxlY3Rpb25TdGFydCwgY2FyZXREaWZmKTtcbiAgICAgICAgICAgICAgICAgICAgdmFsVW5tYXNrZWQgPSBvbGRQcmVmaXggKyBmaWxsUHJlZml4ICsgbmV3UGFydCArIGZpbGwgKyBvbGRTdWZmaXg7XG4gICAgICAgICAgICAgICAgICAgIHZhbFVubWFza2VkID0gdGhpcy5tYXNrZXIudW5tYXNrVmFsdWUodmFsVW5tYXNrZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9sZFNlbGVjdGlvbkxlbmd0aCA9IHRoaXMuZ2V0U2VsZWN0aW9uTGVuZ3RoKCk7XG4gICAgICAgIGlmIChpc0tleUJhY2tzcGFjZSAmJiB0aGlzLnByZXZlbnRCYWNrc3BhY2UgJiYgIXdhc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC52YWx1ZSA9IHRoaXMub2xkVmFsdWU7XG4gICAgICAgICAgICB0aGlzLnNldENhcmV0UG9zaXRpb24oY2FyZXRQb3NPbGQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzRGVsZXRpb24oKSAmJiAhd2FzU2VsZWN0ZWQgJiYgIXRoaXMuaXNWYWxpZENhcmV0UG9zaXRpb24oY2FyZXRQb3MpKSB7XG4gICAgICAgICAgICBjYXJldFBvcyA9IHRoaXMubWFza2VyLmdldFByZXZpb3VzQ2FyZXRQb3MoY2FyZXRQb3MpO1xuICAgICAgICAgICAgdmFsVW5tYXNrZWQgPSB0aGlzLm1hc2tlci51bm1hc2tWYWx1ZSh0aGlzLm9sZFZhbHVlLnN1YnN0cmluZygwLCBjYXJldFBvcykgKyB0aGlzLm9sZFZhbHVlLnN1YnN0cmluZyhjYXJldFBvcyArIDEpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmlzRGVsZXRpb24oKSAmJiAhd2FzU2VsZWN0ZWQgJiYgdmFsVW5tYXNrZWQgPT09IHZhbFVubWFza2VkT2xkKSB7XG4gICAgICAgICAgICB3aGlsZSAoaXNLZXlCYWNrc3BhY2UgJiYgY2FyZXRQb3MgPiB0aGlzLm1pbkNhcmV0UG9zICYmICF0aGlzLmlzVmFsaWRDYXJldFBvc2l0aW9uKGNhcmV0UG9zKSkge1xuICAgICAgICAgICAgICAgIGNhcmV0UG9zLS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoaXNLZXlEZWxldGUgJiYgY2FyZXRQb3MgPCB0aGlzLm1heENhcmV0UG9zICYmIHRoaXMubWFza2VyLm1hc2tDYXJldE1hcC5pbmRleE9mKGNhcmV0UG9zKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjYXJldFBvcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNoYXJJbmRleCA9IHRoaXMubWFza2VyLm1hc2tDYXJldE1hcC5pbmRleE9mKGNhcmV0UG9zKTtcbiAgICAgICAgICAgIGlmIChjaGFySW5kZXggIT0gMCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5hc3BuZXRNYXNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbFVubWFza2VkID0gdmFsVW5tYXNrZWQuc3Vic3RyaW5nKDAsIGNoYXJJbmRleCkgKyB2YWxVbm1hc2tlZC5zdWJzdHJpbmcoY2hhckluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlVUlWYWx1ZSh2YWxVbm1hc2tlZCwgY2FyZXRCdW1wQmFjaywgY2FyZXRQb3MsIGNhcmV0UG9zT2xkKTtcbiAgICAgICAgdGhpcy5fc2V0VmFsdWUodmFsVW5tYXNrZWQpO1xuICAgIH07XG4gICAgTWFza2VkSW5wdXQucHJvdG90eXBlLl9zZXRWYWx1ZSA9IGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xuICAgICAgICBpZiAobWFza2VyXzEuaXNOdW1lcmljKG5ld1ZhbHVlKSAmJiBtYXNrZXJfMS5pc1N0cmluZyh0aGlzLnZhbHVlKSAmJiB0aGlzLm51bWJlclRvU3RyaW5nKG5ld1ZhbHVlKSA9PT0gdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXNrZXJfMS5pc051bWVyaWModGhpcy52YWx1ZSkgJiYgbWFza2VyXzEuaXNTdHJpbmcobmV3VmFsdWUpICYmIHRoaXMubnVtYmVyVG9TdHJpbmcodGhpcy52YWx1ZSkgPT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnZhbHVlICYmIHRoaXMudmFsdWUgIT09IDAgJiYgIW5ld1ZhbHVlICYmIG5ld1ZhbHVlICE9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2hhbmdlICE9IG51bGwgJiYgbmV3VmFsdWUgIT09IHRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlKHsgbmV3VmFsdWU6IG5ld1ZhbHVlLCBvbGRWYWx1ZTogdGhpcy52YWx1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlID0gbmV3VmFsdWU7XG4gICAgfTtcbiAgICBNYXNrZWRJbnB1dC5wcm90b3R5cGUubnVtYmVyVG9TdHJpbmcgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIGlmICh2YWwgPT0gbnVsbClcbiAgICAgICAgICAgIHZhbCA9IFwiXCI7XG4gICAgICAgIHJldHVybiBcIlwiICsgdmFsO1xuICAgIH07XG4gICAgTWFza2VkSW5wdXQucHJvdG90eXBlLnN0cmluZ1RvTnVtYmVyID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICBpZiAobWFza2VyXzEuaXNOdW1lcmljKHZhbCkpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsKTtcbiAgICB9O1xuICAgIE1hc2tlZElucHV0LnByb3RvdHlwZS5vbkZvY3VzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZSA9IGUgfHwge307XG4gICAgICAgIHZhciB2YWxVbm1hc2tlZCA9IHRoaXMudW5tYXNrZWRVSVZhbHVlO1xuICAgICAgICB2YXIgY2FyZXRQb3MgPSB0aGlzLmdldENhcmV0UG9zaXRpb24oKSB8fCAwO1xuICAgICAgICB2YXIgY2FyZXRQb3NPbGQgPSB0aGlzLm9sZENhcmV0UG9zaXRpb24gfHwgMDtcbiAgICAgICAgdmFyIGNhcmV0UG9zRGVsdGEgPSBjYXJldFBvcyAtIGNhcmV0UG9zT2xkO1xuICAgICAgICB2YXIgc2VsZWN0aW9uTGVuT2xkID0gdGhpcy5vbGRTZWxlY3Rpb25MZW5ndGggfHwgMDtcbiAgICAgICAgdmFyIHdhc1NlbGVjdGVkID0gc2VsZWN0aW9uTGVuT2xkID4gMDtcbiAgICAgICAgdmFyIGlzS2V5QmFja3NwYWNlID0gKHRoaXMuaXNEZWxldGlvbigpICYmIChjYXJldFBvc0RlbHRhID09PSAtMSkpO1xuICAgICAgICB2YXIgaXNLZXlEZWxldGUgPSAodGhpcy5pc0RlbGV0aW9uKCkgJiYgKGNhcmV0UG9zRGVsdGEgPT09IDApICYmICF3YXNTZWxlY3RlZCk7XG4gICAgICAgIHZhciBjYXJldEJ1bXBCYWNrID0gKGlzS2V5QmFja3NwYWNlKSAmJiBjYXJldFBvcyA+IHRoaXMubWluQ2FyZXRQb3M7XG4gICAgICAgIHRoaXMub2xkU2VsZWN0aW9uTGVuZ3RoID0gMDtcbiAgICAgICAgaWYgKGlzS2V5QmFja3NwYWNlICYmIHRoaXMucHJldmVudEJhY2tzcGFjZSkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQudmFsdWUgPSB0aGlzLm9sZFZhbHVlO1xuICAgICAgICAgICAgdGhpcy5zZXRDYXJldFBvc2l0aW9uKGNhcmV0UG9zT2xkKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVVJVmFsdWUodmFsVW5tYXNrZWQsIGNhcmV0QnVtcEJhY2ssIGNhcmV0UG9zLCBjYXJldFBvc09sZCk7XG4gICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LnNldFNlbGVjdGlvblJhbmdlKDAsIHRoaXMuaW5wdXRFbGVtZW50LnZhbHVlLmxlbmd0aCk7XG4gICAgICAgIHRoaXMub2xkU2VsZWN0aW9uTGVuZ3RoID0gdGhpcy5nZXRTZWxlY3Rpb25MZW5ndGgoKTtcbiAgICB9O1xuICAgIE1hc2tlZElucHV0LnByb3RvdHlwZS5vbktleVVwID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZSA9IGUgfHwge307XG4gICAgICAgIHZhciBldmVudFR5cGUgPSBlLnR5cGU7XG4gICAgICAgIGlmIChlLndoaWNoID09PSAxNiB8fCBlLndoaWNoID09PSA5MSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2YWxVbm1hc2tlZCA9IHRoaXMudW5tYXNrZWRVSVZhbHVlO1xuICAgICAgICB2YXIgY2FyZXRQb3MgPSB0aGlzLmdldENhcmV0UG9zaXRpb24oKSB8fCAwO1xuICAgICAgICB2YXIgY2FyZXRQb3NPbGQgPSB0aGlzLm9sZENhcmV0UG9zaXRpb24gfHwgMDtcbiAgICAgICAgdmFyIGNhcmV0UG9zRGVsdGEgPSBjYXJldFBvcyAtIGNhcmV0UG9zT2xkO1xuICAgICAgICB2YXIgc2VsZWN0aW9uTGVuT2xkID0gdGhpcy5vbGRTZWxlY3Rpb25MZW5ndGggfHwgMDtcbiAgICAgICAgdmFyIGlzU2VsZWN0ZWQgPSB0aGlzLmdldFNlbGVjdGlvbkxlbmd0aCgpID4gMDtcbiAgICAgICAgdmFyIGlzU2VsZWN0aW9uID0gKGUud2hpY2ggPj0gMzcgJiYgZS53aGljaCA8PSA0MCkgJiYgZS5zaGlmdEtleTtcbiAgICAgICAgdmFyIGlzS2V5TGVmdEFycm93ID0gZS53aGljaCA9PT0gMzc7XG4gICAgICAgIHZhciBpc0tleUJhY2tzcGFjZSA9IGUud2hpY2ggPT09IDg7XG4gICAgICAgIHZhciBpc0tleURlbGV0ZSA9IGUud2hpY2ggPT09IDQ2O1xuICAgICAgICB2YXIgY2FyZXRCdW1wQmFjayA9IChpc0tleUxlZnRBcnJvdyB8fCBpc0tleUJhY2tzcGFjZSkgJiYgY2FyZXRQb3MgPiB0aGlzLm1pbkNhcmV0UG9zO1xuICAgICAgICB0aGlzLm9sZFNlbGVjdGlvbkxlbmd0aCA9IHRoaXMuZ2V0U2VsZWN0aW9uTGVuZ3RoKCk7XG4gICAgICAgIGlmIChpc1NlbGVjdGlvbiB8fCBpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzS2V5QmFja3NwYWNlICYmIHRoaXMucHJldmVudEJhY2tzcGFjZSkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQudmFsdWUgPSB0aGlzLm9sZFZhbHVlO1xuICAgICAgICAgICAgdGhpcy5zZXRDYXJldFBvc2l0aW9uKGNhcmV0UG9zT2xkKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVVJVmFsdWUodmFsVW5tYXNrZWQsIGNhcmV0QnVtcEJhY2ssIGNhcmV0UG9zLCBjYXJldFBvc09sZCk7XG4gICAgICAgIHRoaXMuX3NldFZhbHVlKHZhbFVubWFza2VkKTtcbiAgICB9O1xuICAgIE1hc2tlZElucHV0LnByb3RvdHlwZS51cGRhdGVVSVZhbHVlID0gZnVuY3Rpb24gKHZhbFVubWFza2VkLCBjYXJldEJ1bXBCYWNrLCBjYXJldFBvcywgY2FyZXRQb3NPbGQpIHtcbiAgICAgICAgdmFyIGlzQWRkaXRpb24gPSB0aGlzLmlzQWRkaXRpb24oKTtcbiAgICAgICAgdmFyIHZhbE1hc2tlZCA9IHRoaXMubWFza2VyLm1hc2tWYWx1ZSh2YWxVbm1hc2tlZCk7XG4gICAgICAgIHZhciBjYXJldFBvc01pbiA9IHRoaXMubWluQ2FyZXRQb3M7XG4gICAgICAgIHZhciBjYXJldFBvc01heCA9IHRoaXMubWFza2VyLm1heENhcmV0UG9zKHZhbFVubWFza2VkKTtcbiAgICAgICAgdGhpcy5vbGRWYWx1ZSA9IHZhbE1hc2tlZDtcbiAgICAgICAgdGhpcy5vbGRWYWx1ZVVubWFza2VkID0gdmFsVW5tYXNrZWQ7XG4gICAgICAgIGlmICh0aGlzLmlzQXR0YWNoZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LnZhbHVlID0gdmFsTWFza2VkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FkZGl0aW9uICYmIChjYXJldFBvcyA8PSBjYXJldFBvc01pbikpIHtcbiAgICAgICAgICAgIGNhcmV0UG9zID0gY2FyZXRQb3NNaW4gKyAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYXJldEJ1bXBCYWNrKSB7XG4gICAgICAgICAgICBjYXJldFBvcy0tO1xuICAgICAgICB9XG4gICAgICAgIGNhcmV0UG9zID0gY2FyZXRQb3MgPiBjYXJldFBvc01heCA/IGNhcmV0UG9zTWF4IDogY2FyZXRQb3MgPCBjYXJldFBvc01pbiA/IGNhcmV0UG9zTWluIDogY2FyZXRQb3M7XG4gICAgICAgIHdoaWxlICghdGhpcy5pc1ZhbGlkQ2FyZXRQb3NpdGlvbihjYXJldFBvcykgJiYgY2FyZXRQb3MgPiBjYXJldFBvc01pbiAmJiBjYXJldFBvcyA8IGNhcmV0UG9zTWF4KSB7XG4gICAgICAgICAgICBjYXJldFBvcyArPSBjYXJldEJ1bXBCYWNrID8gLTEgOiAxO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoY2FyZXRCdW1wQmFjayAmJiBjYXJldFBvcyA8IGNhcmV0UG9zTWF4KSB8fCAoaXNBZGRpdGlvbiAmJiAhdGhpcy5pc1ZhbGlkQ2FyZXRQb3NpdGlvbihjYXJldFBvc09sZCkpKSB7XG4gICAgICAgICAgICBjYXJldFBvcysrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2xkQ2FyZXRQb3NpdGlvbiA9IGNhcmV0UG9zO1xuICAgICAgICB0aGlzLmNhcmV0UG9zID0gY2FyZXRQb3M7XG4gICAgICAgIHRoaXMuc2V0Q2FyZXRQb3NpdGlvbih0aGlzLmNhcmV0UG9zKTtcbiAgICB9O1xuICAgIE1hc2tlZElucHV0LnByb3RvdHlwZS5nZXRTZWxlY3Rpb25MZW5ndGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pbnB1dEVsZW1lbnQpXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgaWYgKHRoaXMuaW5wdXRFbGVtZW50LnNlbGVjdGlvblN0YXJ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5pbnB1dEVsZW1lbnQuc2VsZWN0aW9uRW5kIC0gdGhpcy5pbnB1dEVsZW1lbnQuc2VsZWN0aW9uU3RhcnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkb2N1bWVudC5zZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiAoZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCkudGV4dC5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG4gICAgTWFza2VkSW5wdXQucHJvdG90eXBlLm9uS2V5RG93biA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBpc0tleUJhY2tzcGFjZSA9IGUud2hpY2ggPT09IDg7XG4gICAgICAgIHZhciBvbGRDYXJldFBvcyA9IHRoaXMuZ2V0Q2FyZXRQb3NpdGlvbigpO1xuICAgICAgICB2YXIgbmV3Q2FyZXRQb3NPbkJrc3AgPSBvbGRDYXJldFBvcyAtIDEgfHwgMDtcbiAgICAgICAgaWYgKGlzS2V5QmFja3NwYWNlKSB7XG4gICAgICAgICAgICB3aGlsZSAobmV3Q2FyZXRQb3NPbkJrc3AgPj0gMCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVmFsaWRDYXJldFBvc2l0aW9uKG5ld0NhcmV0UG9zT25Ca3NwKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmV0UG9zID0gbmV3Q2FyZXRQb3NPbkJrc3A7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXdDYXJldFBvc09uQmtzcC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmV2ZW50QmFja3NwYWNlID0gbmV3Q2FyZXRQb3NPbkJrc3AgPT09IC0xO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBNYXNrZWRJbnB1dC5wcm90b3R5cGUuZ2V0Q2FyZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlucHV0RWxlbWVudClcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICBpZiAodGhpcy5pbnB1dEVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXRFbGVtZW50LnNlbGVjdGlvblN0YXJ0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNGb2N1c2VkKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb24ubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCB0aGlzLmlucHV0RWxlbWVudC52YWx1ZSA/IC10aGlzLmlucHV0RWxlbWVudC52YWx1ZS5sZW5ndGggOiAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uLnRleHQubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG4gICAgTWFza2VkSW5wdXQucHJvdG90eXBlLmlzVmFsaWRDYXJldFBvc2l0aW9uID0gZnVuY3Rpb24gKHBvcykge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXNrZXIubWFza0NhcmV0TWFwLmluZGV4T2YocG9zKSA+IC0xO1xuICAgIH07XG4gICAgTWFza2VkSW5wdXQucHJvdG90eXBlLnNldENhcmV0UG9zaXRpb24gPSBmdW5jdGlvbiAocG9zKSB7XG4gICAgICAgIGlmICghdGhpcy5pbnB1dEVsZW1lbnQpXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgaWYgKHRoaXMuaXNIaWRkZW4oKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlucHV0RWxlbWVudC5zZXRTZWxlY3Rpb25SYW5nZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNGb2N1c2VkKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LnNldFNlbGVjdGlvblJhbmdlKHBvcywgcG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmlucHV0RWxlbWVudC5jcmVhdGVUZXh0UmFuZ2UpIHtcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHRoaXMuaW5wdXRFbGVtZW50LmNyZWF0ZVRleHRSYW5nZSgpO1xuICAgICAgICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XG4gICAgICAgICAgICByYW5nZS5tb3ZlRW5kKCdjaGFyYWN0ZXInLCBwb3MpO1xuICAgICAgICAgICAgcmFuZ2UubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCBwb3MpO1xuICAgICAgICAgICAgcmFuZ2Uuc2VsZWN0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1hc2tlZElucHV0LnByb3RvdHlwZS5pc0ZvY3VzZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlucHV0RWxlbWVudCA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiAoIWRvY3VtZW50Lmhhc0ZvY3VzIHx8IGRvY3VtZW50Lmhhc0ZvY3VzKCkpICYmXG4gICAgICAgICAgICAhISh0aGlzLmlucHV0RWxlbWVudC50eXBlIHx8IHRoaXMuaW5wdXRFbGVtZW50LmhyZWYgfHwgfnRoaXMuaW5wdXRFbGVtZW50LnRhYkluZGV4KTtcbiAgICB9O1xuICAgIE1hc2tlZElucHV0LnByb3RvdHlwZS5pc0hpZGRlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmlucHV0RWxlbWVudC5vZmZzZXRXaWR0aCA9PT0gMCB8fCB0aGlzLmlucHV0RWxlbWVudC5vZmZzZXRIZWlnaHQgPT09IDApO1xuICAgIH07XG4gICAgTWFza2VkSW5wdXQucHJvdG90eXBlLm1hc2tDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm1ha2VNYXNrZXIoKTtcbiAgICAgICAgdGhpcy5zZXRWYWx1ZSh0aGlzLnZhbHVlKTtcbiAgICB9O1xuICAgIE1hc2tlZElucHV0LnByb3RvdHlwZS5tYWtlTWFza2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm1hc2tlciA9IG1hc2tlcl8xLmdldE1hc2tlcih7XG4gICAgICAgICAgICBtYXNrRm9ybWF0OiB0aGlzLm1hc2ssXG4gICAgICAgICAgICBiaW5kTWFza2luZzogdGhpcy5iaW5kTWFza2luZyxcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiB0aGlzLnBsYWNlaG9sZGVyLFxuICAgICAgICAgICAgYXNwbmV0TWFza2luZzogdGhpcy5hc3BuZXRNYXNraW5nXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTWFza2VkSW5wdXQucHJvdG90eXBlLnNldFZhbHVlID0gZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG4gICAgICAgIHZhciB2YWxVbm1hc2tlZCA9IHRoaXMuZ2V0VW5tYXNrZWRWYWx1ZShuZXdWYWx1ZSk7XG4gICAgICAgIHZhciBjYXJldFBvcyA9IHRoaXMuZ2V0Q2FyZXRQb3NpdGlvbigpIHx8IDA7XG4gICAgICAgIHZhciBjYXJldFBvc09sZCA9IHRoaXMub2xkQ2FyZXRQb3NpdGlvbiB8fCAwO1xuICAgICAgICB2YXIgY2FyZXRQb3NEZWx0YSA9IGNhcmV0UG9zIC0gY2FyZXRQb3NPbGQ7XG4gICAgICAgIHZhciBzZWxlY3Rpb25MZW5PbGQgPSB0aGlzLm9sZFNlbGVjdGlvbkxlbmd0aCB8fCAwO1xuICAgICAgICB2YXIgaXNTZWxlY3RlZCA9IHRoaXMuZ2V0U2VsZWN0aW9uTGVuZ3RoKCkgPiAwO1xuICAgICAgICB2YXIgY2FyZXRCdW1wQmFjayA9IGNhcmV0UG9zID4gdGhpcy5taW5DYXJldFBvcztcbiAgICAgICAgdGhpcy5vbGRTZWxlY3Rpb25MZW5ndGggPSB0aGlzLmdldFNlbGVjdGlvbkxlbmd0aCgpO1xuICAgICAgICBpZiAodGhpcy5lZGl0TW9kZSA9PT0gXCJvdmVydHlwZVwiKSB7XG4gICAgICAgICAgICB2YXIgc3RyaXBwZWRPbGQgPSB0aGlzLm1hc2tlci5zdHJpcFBsYWNlaG9sZGVycyh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIHZhciBzdHJpcHBlZE5ldyA9IHRoaXMubWFza2VyLnN0cmlwUGxhY2Vob2xkZXJzKG5ld1ZhbHVlKTtcbiAgICAgICAgICAgIGNhcmV0QnVtcEJhY2sgPSBjYXJldEJ1bXBCYWNrICYmIHN0cmlwcGVkTmV3Lmxlbmd0aCA8IHN0cmlwcGVkT2xkLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVVJVmFsdWUodmFsVW5tYXNrZWQsIGNhcmV0QnVtcEJhY2ssIGNhcmV0UG9zLCBjYXJldFBvc09sZCk7XG4gICAgICAgIHRoaXMuX3NldFZhbHVlKHZhbFVubWFza2VkKTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBhdXJlbGlhX2ZyYW1ld29ya18xLmJpbmRhYmxlKHsgZGVmYXVsdEJpbmRpbmdNb2RlOiBhdXJlbGlhX2ZyYW1ld29ya18xLmJpbmRpbmdNb2RlLnR3b1dheSB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBNYXNrZWRJbnB1dC5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgYXVyZWxpYV9mcmFtZXdvcmtfMS5iaW5kYWJsZSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBNYXNrZWRJbnB1dC5wcm90b3R5cGUsIFwibWFza1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBhdXJlbGlhX2ZyYW1ld29ya18xLmJpbmRhYmxlLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE1hc2tlZElucHV0LnByb3RvdHlwZSwgXCJpbnB1dElkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGF1cmVsaWFfZnJhbWV3b3JrXzEuYmluZGFibGUsXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTWFza2VkSW5wdXQucHJvdG90eXBlLCBcImlucHV0Q2xhc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgYXVyZWxpYV9mcmFtZXdvcmtfMS5iaW5kYWJsZSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG4gICAgXSwgTWFza2VkSW5wdXQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGF1cmVsaWFfZnJhbWV3b3JrXzEuYmluZGFibGUoeyBkZWZhdWx0QmluZGluZ01vZGU6IGF1cmVsaWFfZnJhbWV3b3JrXzEuYmluZGluZ01vZGUub25lVGltZSwgZGVmYXVsdFZhbHVlOiBmYWxzZSB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG4gICAgXSwgTWFza2VkSW5wdXQucHJvdG90eXBlLCBcImJpbmRNYXNraW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGF1cmVsaWFfZnJhbWV3b3JrXzEuYmluZGFibGUoeyBkZWZhdWx0QmluZGluZ01vZGU6IGF1cmVsaWFfZnJhbWV3b3JrXzEuYmluZGluZ01vZGUub25lVGltZSwgZGVmYXVsdFZhbHVlOiBmYWxzZSB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG4gICAgXSwgTWFza2VkSW5wdXQucHJvdG90eXBlLCBcImFzcG5ldE1hc2tpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgYXVyZWxpYV9mcmFtZXdvcmtfMS5iaW5kYWJsZSh7IGRlZmF1bHRCaW5kaW5nTW9kZTogYXVyZWxpYV9mcmFtZXdvcmtfMS5iaW5kaW5nTW9kZS5vbmVUaW1lLCBkZWZhdWx0VmFsdWU6IG51bGwgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTWFza2VkSW5wdXQucHJvdG90eXBlLCBcInBsYWNlaG9sZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGF1cmVsaWFfZnJhbWV3b3JrXzEuYmluZGFibGUoeyBkZWZhdWx0QmluZGluZ01vZGU6IGF1cmVsaWFfZnJhbWV3b3JrXzEuYmluZGluZ01vZGUub25lVGltZSwgZGVmYXVsdFZhbHVlOiBcImluc2VydFwiIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE1hc2tlZElucHV0LnByb3RvdHlwZSwgXCJlZGl0TW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBhdXJlbGlhX2ZyYW1ld29ya18xLmJpbmRhYmxlKHsgZGVmYXVsdEJpbmRpbmdNb2RlOiBhdXJlbGlhX2ZyYW1ld29ya18xLmJpbmRpbmdNb2RlLm9uZVRpbWUsIGRlZmF1bHRWYWx1ZTogbnVsbCB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKVxuICAgIF0sIE1hc2tlZElucHV0LnByb3RvdHlwZSwgXCJmaW5kSW5wdXRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgYXVyZWxpYV9mcmFtZXdvcmtfMS5iaW5kYWJsZSgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pXG4gICAgXSwgTWFza2VkSW5wdXQucHJvdG90eXBlLCBcImNoYW5nZVwiLCB2b2lkIDApO1xuICAgIE1hc2tlZElucHV0ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGF1cmVsaWFfZnJhbWV3b3JrXzEuY3VzdG9tQXR0cmlidXRlKCdtYXNrZWQnKSxcbiAgICAgICAgYXVyZWxpYV9mcmFtZXdvcmtfMS5pbmplY3QoRWxlbWVudCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRWxlbWVudF0pXG4gICAgXSwgTWFza2VkSW5wdXQpO1xuICAgIHJldHVybiBNYXNrZWRJbnB1dDtcbn0oKSk7XG5leHBvcnRzLk1hc2tlZElucHV0ID0gTWFza2VkSW5wdXQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXNrZWQtaW5wdXQuanMubWFwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///aurelia-mask/dist/masked-input\n");

/***/ })

}]);