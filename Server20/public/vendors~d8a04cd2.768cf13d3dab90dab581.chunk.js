(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["vendors~d8a04cd2"],{

/***/ "Ctf9":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/aurelia-validatejs/node_modules/aurelia-validation/dist/native-modules/aurelia-validation.js ***!
  \*******************************************************************************************************************/
/*! exports provided: ValidateBindingBehavior, validateTrigger, ValidationController, ValidationError, ValidationErrorsCustomAttribute, ValidationRendererCustomAttribute, validationRenderer, Validator, configure */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"configure\", function() { return configure; });\n/* harmony import */ var _validate_binding_behavior__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate-binding-behavior */ \"bsLm\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ValidateBindingBehavior\", function() { return _validate_binding_behavior__WEBPACK_IMPORTED_MODULE_0__[\"ValidateBindingBehavior\"]; });\n\n/* harmony import */ var _validate_trigger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./validate-trigger */ \"muZg\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"validateTrigger\", function() { return _validate_trigger__WEBPACK_IMPORTED_MODULE_1__[\"validateTrigger\"]; });\n\n/* harmony import */ var _validation_controller__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./validation-controller */ \"hbvq\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ValidationController\", function() { return _validation_controller__WEBPACK_IMPORTED_MODULE_2__[\"ValidationController\"]; });\n\n/* harmony import */ var _validation_error__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./validation-error */ \"DcMl\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ValidationError\", function() { return _validation_error__WEBPACK_IMPORTED_MODULE_3__[\"ValidationError\"]; });\n\n/* harmony import */ var _validation_errors_custom_attribute__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./validation-errors-custom-attribute */ \"oXW4\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ValidationErrorsCustomAttribute\", function() { return _validation_errors_custom_attribute__WEBPACK_IMPORTED_MODULE_4__[\"ValidationErrorsCustomAttribute\"]; });\n\n/* harmony import */ var _validation_renderer_custom_attribute__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./validation-renderer-custom-attribute */ \"EEJ3\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ValidationRendererCustomAttribute\", function() { return _validation_renderer_custom_attribute__WEBPACK_IMPORTED_MODULE_5__[\"ValidationRendererCustomAttribute\"]; });\n\n/* harmony import */ var _validation_renderer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./validation-renderer */ \"h2QJ\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"validationRenderer\", function() { return _validation_renderer__WEBPACK_IMPORTED_MODULE_6__[\"validationRenderer\"]; });\n\n/* harmony import */ var _validator__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./validator */ \"M2bY\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Validator\", function() { return _validator__WEBPACK_IMPORTED_MODULE_7__[\"Validator\"]; });\n\n\n\n\n\n\n\n\n\n\nfunction configure(config) {\n  config.globalResources('./validate-binding-behavior', './validation-errors-custom-attribute', './validation-renderer-custom-attribute');\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ3RmOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhLXZhbGlkYXRlanMvbm9kZV9tb2R1bGVzL2F1cmVsaWEtdmFsaWRhdGlvbi9kaXN0L25hdGl2ZS1tb2R1bGVzL2F1cmVsaWEtdmFsaWRhdGlvbi5qcz8wYWQ3Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IFZhbGlkYXRlQmluZGluZ0JlaGF2aW9yIH0gZnJvbSAnLi92YWxpZGF0ZS1iaW5kaW5nLWJlaGF2aW9yJztcbmV4cG9ydCB7IHZhbGlkYXRlVHJpZ2dlciB9IGZyb20gJy4vdmFsaWRhdGUtdHJpZ2dlcic7XG5leHBvcnQgeyBWYWxpZGF0aW9uQ29udHJvbGxlciB9IGZyb20gJy4vdmFsaWRhdGlvbi1jb250cm9sbGVyJztcbmV4cG9ydCB7IFZhbGlkYXRpb25FcnJvciB9IGZyb20gJy4vdmFsaWRhdGlvbi1lcnJvcic7XG5leHBvcnQgeyBWYWxpZGF0aW9uRXJyb3JzQ3VzdG9tQXR0cmlidXRlIH0gZnJvbSAnLi92YWxpZGF0aW9uLWVycm9ycy1jdXN0b20tYXR0cmlidXRlJztcbmV4cG9ydCB7IFZhbGlkYXRpb25SZW5kZXJlckN1c3RvbUF0dHJpYnV0ZSB9IGZyb20gJy4vdmFsaWRhdGlvbi1yZW5kZXJlci1jdXN0b20tYXR0cmlidXRlJztcbmV4cG9ydCB7IHZhbGlkYXRpb25SZW5kZXJlciB9IGZyb20gJy4vdmFsaWRhdGlvbi1yZW5kZXJlcic7XG5leHBvcnQgeyBWYWxpZGF0b3IgfSBmcm9tICcuL3ZhbGlkYXRvcic7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmUoY29uZmlnKSB7XG4gIGNvbmZpZy5nbG9iYWxSZXNvdXJjZXMoJy4vdmFsaWRhdGUtYmluZGluZy1iZWhhdmlvcicsICcuL3ZhbGlkYXRpb24tZXJyb3JzLWN1c3RvbS1hdHRyaWJ1dGUnLCAnLi92YWxpZGF0aW9uLXJlbmRlcmVyLWN1c3RvbS1hdHRyaWJ1dGUnKTtcbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///Ctf9\n");

/***/ }),

/***/ "DcMl":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/aurelia-validatejs/node_modules/aurelia-validation/dist/native-modules/validation-error.js ***!
  \*****************************************************************************************************************/
/*! exports provided: ValidationError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidationError\", function() { return ValidationError; });\n\n\nvar ValidationError = function ValidationError(rule, message, object) {\n  var propertyName = arguments.length <= 3 || arguments[3] === undefined ? null : arguments[3];\n\n  \n\n  this.rule = rule;\n  this.message = message;\n  this.object = object;\n  this.propertyName = propertyName || null;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGNNbC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhLXZhbGlkYXRlanMvbm9kZV9tb2R1bGVzL2F1cmVsaWEtdmFsaWRhdGlvbi9kaXN0L25hdGl2ZS1tb2R1bGVzL3ZhbGlkYXRpb24tZXJyb3IuanM/MGRjMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcblxuZXhwb3J0IHZhciBWYWxpZGF0aW9uRXJyb3IgPSBmdW5jdGlvbiBWYWxpZGF0aW9uRXJyb3IocnVsZSwgbWVzc2FnZSwgb2JqZWN0KSB7XG4gIHZhciBwcm9wZXJ0eU5hbWUgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzNdO1xuXG4gIFxuXG4gIHRoaXMucnVsZSA9IHJ1bGU7XG4gIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gIHRoaXMub2JqZWN0ID0gb2JqZWN0O1xuICB0aGlzLnByb3BlcnR5TmFtZSA9IHByb3BlcnR5TmFtZSB8fCBudWxsO1xufTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///DcMl\n");

/***/ }),

/***/ "EEJ3":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/aurelia-validatejs/node_modules/aurelia-validation/dist/native-modules/validation-renderer-custom-attribute.js ***!
  \*************************************************************************************************************************************/
/*! exports provided: ValidationRendererCustomAttribute */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidationRendererCustomAttribute\", function() { return ValidationRendererCustomAttribute; });\n/* harmony import */ var _validation_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validation-controller */ \"hbvq\");\n\n\n\n\nvar ValidationRendererCustomAttribute = function () {\n  function ValidationRendererCustomAttribute() {\n    \n  }\n\n  ValidationRendererCustomAttribute.prototype.created = function created(view) {\n    this.container = view.container;\n  };\n\n  ValidationRendererCustomAttribute.prototype.bind = function bind() {\n    this.controller = this.container.get(_validation_controller__WEBPACK_IMPORTED_MODULE_0__[\"ValidationController\"]);\n    this.renderer = this.container.get(this.value);\n    this.controller.addRenderer(this.renderer);\n  };\n\n  ValidationRendererCustomAttribute.prototype.unbind = function unbind() {\n    this.controller.removeRenderer(this.renderer);\n    this.controller = null;\n    this.renderer = null;\n  };\n\n  return ValidationRendererCustomAttribute;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRUVKMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhLXZhbGlkYXRlanMvbm9kZV9tb2R1bGVzL2F1cmVsaWEtdmFsaWRhdGlvbi9kaXN0L25hdGl2ZS1tb2R1bGVzL3ZhbGlkYXRpb24tcmVuZGVyZXItY3VzdG9tLWF0dHJpYnV0ZS5qcz8xMDQyIl0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5pbXBvcnQgeyBWYWxpZGF0aW9uQ29udHJvbGxlciB9IGZyb20gJy4vdmFsaWRhdGlvbi1jb250cm9sbGVyJztcblxuZXhwb3J0IHZhciBWYWxpZGF0aW9uUmVuZGVyZXJDdXN0b21BdHRyaWJ1dGUgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFZhbGlkYXRpb25SZW5kZXJlckN1c3RvbUF0dHJpYnV0ZSgpIHtcbiAgICBcbiAgfVxuXG4gIFZhbGlkYXRpb25SZW5kZXJlckN1c3RvbUF0dHJpYnV0ZS5wcm90b3R5cGUuY3JlYXRlZCA9IGZ1bmN0aW9uIGNyZWF0ZWQodmlldykge1xuICAgIHRoaXMuY29udGFpbmVyID0gdmlldy5jb250YWluZXI7XG4gIH07XG5cbiAgVmFsaWRhdGlvblJlbmRlcmVyQ3VzdG9tQXR0cmlidXRlLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gYmluZCgpIHtcbiAgICB0aGlzLmNvbnRyb2xsZXIgPSB0aGlzLmNvbnRhaW5lci5nZXQoVmFsaWRhdGlvbkNvbnRyb2xsZXIpO1xuICAgIHRoaXMucmVuZGVyZXIgPSB0aGlzLmNvbnRhaW5lci5nZXQodGhpcy52YWx1ZSk7XG4gICAgdGhpcy5jb250cm9sbGVyLmFkZFJlbmRlcmVyKHRoaXMucmVuZGVyZXIpO1xuICB9O1xuXG4gIFZhbGlkYXRpb25SZW5kZXJlckN1c3RvbUF0dHJpYnV0ZS5wcm90b3R5cGUudW5iaW5kID0gZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHRoaXMuY29udHJvbGxlci5yZW1vdmVSZW5kZXJlcih0aGlzLnJlbmRlcmVyKTtcbiAgICB0aGlzLmNvbnRyb2xsZXIgPSBudWxsO1xuICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xuICB9O1xuXG4gIHJldHVybiBWYWxpZGF0aW9uUmVuZGVyZXJDdXN0b21BdHRyaWJ1dGU7XG59KCk7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///EEJ3\n");

/***/ }),

/***/ "GAND":
/*!********************************************************************!*\
  !*** ./node_modules/aurelia-webpack-plugin/runtime/empty-entry.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// This file contains an empty module that does nothing.\n// It's meant to be added as an entry point to the main bundle\n// and helps reliably adding some Aurelia dependencies that are attached \n// to no module in particular, such as `includeAll` results or `aureliaApp`.\n//\n// Trying to attach those dependencies to, for example, 'aurelia-bootstrapper' \n// is unreliable if 'aurelia-bootstrapper' is in a DLL outside the bundle.\n//\n// Trying to attach to 'aurelia-loader-webpack' works well, unless a user\n// configures a customized loader instead (unlikely, but in theory supported).\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR0FORC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhLXdlYnBhY2stcGx1Z2luL3J1bnRpbWUvZW1wdHktZW50cnkuanM/MTgwMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIGZpbGUgY29udGFpbnMgYW4gZW1wdHkgbW9kdWxlIHRoYXQgZG9lcyBub3RoaW5nLlxuLy8gSXQncyBtZWFudCB0byBiZSBhZGRlZCBhcyBhbiBlbnRyeSBwb2ludCB0byB0aGUgbWFpbiBidW5kbGVcbi8vIGFuZCBoZWxwcyByZWxpYWJseSBhZGRpbmcgc29tZSBBdXJlbGlhIGRlcGVuZGVuY2llcyB0aGF0IGFyZSBhdHRhY2hlZCBcbi8vIHRvIG5vIG1vZHVsZSBpbiBwYXJ0aWN1bGFyLCBzdWNoIGFzIGBpbmNsdWRlQWxsYCByZXN1bHRzIG9yIGBhdXJlbGlhQXBwYC5cbi8vXG4vLyBUcnlpbmcgdG8gYXR0YWNoIHRob3NlIGRlcGVuZGVuY2llcyB0bywgZm9yIGV4YW1wbGUsICdhdXJlbGlhLWJvb3RzdHJhcHBlcicgXG4vLyBpcyB1bnJlbGlhYmxlIGlmICdhdXJlbGlhLWJvb3RzdHJhcHBlcicgaXMgaW4gYSBETEwgb3V0c2lkZSB0aGUgYnVuZGxlLlxuLy9cbi8vIFRyeWluZyB0byBhdHRhY2ggdG8gJ2F1cmVsaWEtbG9hZGVyLXdlYnBhY2snIHdvcmtzIHdlbGwsIHVubGVzcyBhIHVzZXJcbi8vIGNvbmZpZ3VyZXMgYSBjdXN0b21pemVkIGxvYWRlciBpbnN0ZWFkICh1bmxpa2VseSwgYnV0IGluIHRoZW9yeSBzdXBwb3J0ZWQpLlxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///GAND\n");

/***/ }),

/***/ "GmYv":
/*!*************************************************************************!*\
  !*** ./node_modules/aurelia-webpack-plugin/runtime/pal-loader-entry.js ***!
  \*************************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var aurelia_pal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia-pal */ \"70NS\");\n// With default aurelia-loader-webpack config, this module is added as an extra entry\n// before any other code executes so that PAL.Loader is properly configured.\n// There are several tricky points worth noticing.\n// \n// We don't add aurelia-loader-webpack itself as an entry point (used to until 2.0 RC2)\n// because it (transitively) brings too much bagage with itself, most notably polyfills.\n// This made it super-hard to add other polyfills before Aurelia's and led to various bugs.\n//\n// We don't add custom code in aurelia-pal or aurelia-loader or aurelia-bootstrapper to detect\n// the Webpack environment and configure the loader because they might live in a DLL.\n// If they do, they would bring aurelia-loader-webpack along in the DLL and this is a special \n// library that *has to be in the main chunk.*\n//\n// The over-complicated design I've settled upon in the end is to use this special module\n// as an entry point that configures aurelia-loader-webpack. It has minimal static imports:\n// just aurelia-pal, which itself has no other dependencies and doesn't run much code.\n// It hacks the loader field into a getter so that it can synchronously load aurelia-loader-webpack\n// just in time when it is demanded by aurelia-bootstrapper.\n// This enables users to load polyfills before aurelia-loader-webpack is actually loaded.\n\n\n\nvar Loader;\n\nObject.defineProperty(aurelia_pal__WEBPACK_IMPORTED_MODULE_0__[\"PLATFORM\"], \"Loader\", {\n  get: function() {\n    return Loader || (Loader = __webpack_require__(/*! aurelia-loader-webpack */ \"5jyU\").WebpackLoader);\n  },\n  set: function(value) {\n    Loader = value;\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR21Zdi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhLXdlYnBhY2stcGx1Z2luL3J1bnRpbWUvcGFsLWxvYWRlci1lbnRyeS5qcz8xYTY2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFdpdGggZGVmYXVsdCBhdXJlbGlhLWxvYWRlci13ZWJwYWNrIGNvbmZpZywgdGhpcyBtb2R1bGUgaXMgYWRkZWQgYXMgYW4gZXh0cmEgZW50cnlcbi8vIGJlZm9yZSBhbnkgb3RoZXIgY29kZSBleGVjdXRlcyBzbyB0aGF0IFBBTC5Mb2FkZXIgaXMgcHJvcGVybHkgY29uZmlndXJlZC5cbi8vIFRoZXJlIGFyZSBzZXZlcmFsIHRyaWNreSBwb2ludHMgd29ydGggbm90aWNpbmcuXG4vLyBcbi8vIFdlIGRvbid0IGFkZCBhdXJlbGlhLWxvYWRlci13ZWJwYWNrIGl0c2VsZiBhcyBhbiBlbnRyeSBwb2ludCAodXNlZCB0byB1bnRpbCAyLjAgUkMyKVxuLy8gYmVjYXVzZSBpdCAodHJhbnNpdGl2ZWx5KSBicmluZ3MgdG9vIG11Y2ggYmFnYWdlIHdpdGggaXRzZWxmLCBtb3N0IG5vdGFibHkgcG9seWZpbGxzLlxuLy8gVGhpcyBtYWRlIGl0IHN1cGVyLWhhcmQgdG8gYWRkIG90aGVyIHBvbHlmaWxscyBiZWZvcmUgQXVyZWxpYSdzIGFuZCBsZWQgdG8gdmFyaW91cyBidWdzLlxuLy9cbi8vIFdlIGRvbid0IGFkZCBjdXN0b20gY29kZSBpbiBhdXJlbGlhLXBhbCBvciBhdXJlbGlhLWxvYWRlciBvciBhdXJlbGlhLWJvb3RzdHJhcHBlciB0byBkZXRlY3Rcbi8vIHRoZSBXZWJwYWNrIGVudmlyb25tZW50IGFuZCBjb25maWd1cmUgdGhlIGxvYWRlciBiZWNhdXNlIHRoZXkgbWlnaHQgbGl2ZSBpbiBhIERMTC5cbi8vIElmIHRoZXkgZG8sIHRoZXkgd291bGQgYnJpbmcgYXVyZWxpYS1sb2FkZXItd2VicGFjayBhbG9uZyBpbiB0aGUgRExMIGFuZCB0aGlzIGlzIGEgc3BlY2lhbCBcbi8vIGxpYnJhcnkgdGhhdCAqaGFzIHRvIGJlIGluIHRoZSBtYWluIGNodW5rLipcbi8vXG4vLyBUaGUgb3Zlci1jb21wbGljYXRlZCBkZXNpZ24gSSd2ZSBzZXR0bGVkIHVwb24gaW4gdGhlIGVuZCBpcyB0byB1c2UgdGhpcyBzcGVjaWFsIG1vZHVsZVxuLy8gYXMgYW4gZW50cnkgcG9pbnQgdGhhdCBjb25maWd1cmVzIGF1cmVsaWEtbG9hZGVyLXdlYnBhY2suIEl0IGhhcyBtaW5pbWFsIHN0YXRpYyBpbXBvcnRzOlxuLy8ganVzdCBhdXJlbGlhLXBhbCwgd2hpY2ggaXRzZWxmIGhhcyBubyBvdGhlciBkZXBlbmRlbmNpZXMgYW5kIGRvZXNuJ3QgcnVuIG11Y2ggY29kZS5cbi8vIEl0IGhhY2tzIHRoZSBsb2FkZXIgZmllbGQgaW50byBhIGdldHRlciBzbyB0aGF0IGl0IGNhbiBzeW5jaHJvbm91c2x5IGxvYWQgYXVyZWxpYS1sb2FkZXItd2VicGFja1xuLy8ganVzdCBpbiB0aW1lIHdoZW4gaXQgaXMgZGVtYW5kZWQgYnkgYXVyZWxpYS1ib290c3RyYXBwZXIuXG4vLyBUaGlzIGVuYWJsZXMgdXNlcnMgdG8gbG9hZCBwb2x5ZmlsbHMgYmVmb3JlIGF1cmVsaWEtbG9hZGVyLXdlYnBhY2sgaXMgYWN0dWFsbHkgbG9hZGVkLlxuXG5pbXBvcnQgeyBQTEFURk9STSB9IGZyb20gXCJhdXJlbGlhLXBhbFwiO1xuXG52YXIgTG9hZGVyO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUExBVEZPUk0sIFwiTG9hZGVyXCIsIHtcbiAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gTG9hZGVyIHx8IChMb2FkZXIgPSByZXF1aXJlKFwiYXVyZWxpYS1sb2FkZXItd2VicGFja1wiKS5XZWJwYWNrTG9hZGVyKTtcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIExvYWRlciA9IHZhbHVlO1xuICB9XG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///GmYv\n");

/***/ }),

/***/ "KgOP":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/aurelia-validatejs/node_modules/aurelia-validation/dist/native-modules/property-info.js ***!
  \**************************************************************************************************************/
/*! exports provided: getPropertyInfo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getPropertyInfo\", function() { return getPropertyInfo; });\n/* harmony import */ var aurelia_binding__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia-binding */ \"X5gX\");\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\n\n\nfunction getObject(expression, objectExpression, source) {\n  var value = objectExpression.evaluate(source);\n  if (value !== null && ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' || typeof value === 'function')) {\n    return value;\n  }\n  if (value === null) {\n    value = 'null';\n  } else if (value === undefined) {\n    value = 'undefined';\n  }\n  throw new Error('The \\'' + objectExpression + '\\' part of \\'' + expression + '\\' evaluates to ' + value + ' instead of an object.');\n}\n\nfunction getPropertyInfo(expression, source) {\n  var originalExpression = expression;\n  while (expression instanceof aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"BindingBehavior\"] || expression instanceof aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"ValueConverter\"]) {\n    expression = expression.expression;\n  }\n\n  var object = void 0;\n  var property = void 0;\n  if (expression instanceof aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"AccessScope\"]) {\n    object = source.bindingContext;\n    property = expression.name;\n  } else if (expression instanceof aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"AccessMember\"]) {\n    object = getObject(originalExpression, expression.object, source);\n    property = expression.name;\n  } else if (expression instanceof aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"AccessKeyed\"]) {\n    object = getObject(originalExpression, expression.object, source);\n    property = expression.key.evaluate(source);\n  } else {\n    throw new Error('Expression \\'' + originalExpression + '\\' is not compatible with the validate binding-behavior.');\n  }\n\n  return { object: object, property: property };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiS2dPUC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhLXZhbGlkYXRlanMvbm9kZV9tb2R1bGVzL2F1cmVsaWEtdmFsaWRhdGlvbi9kaXN0L25hdGl2ZS1tb2R1bGVzL3Byb3BlcnR5LWluZm8uanM/MmEwMyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuaW1wb3J0IHsgQWNjZXNzTWVtYmVyLCBBY2Nlc3NTY29wZSwgQWNjZXNzS2V5ZWQsIEJpbmRpbmdCZWhhdmlvciwgVmFsdWVDb252ZXJ0ZXIgfSBmcm9tICdhdXJlbGlhLWJpbmRpbmcnO1xuXG5mdW5jdGlvbiBnZXRPYmplY3QoZXhwcmVzc2lvbiwgb2JqZWN0RXhwcmVzc2lvbiwgc291cmNlKSB7XG4gIHZhciB2YWx1ZSA9IG9iamVjdEV4cHJlc3Npb24uZXZhbHVhdGUoc291cmNlKTtcbiAgaWYgKHZhbHVlICE9PSBudWxsICYmICgodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih2YWx1ZSkpID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgIHZhbHVlID0gJ251bGwnO1xuICB9IGVsc2UgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICB2YWx1ZSA9ICd1bmRlZmluZWQnO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcignVGhlIFxcJycgKyBvYmplY3RFeHByZXNzaW9uICsgJ1xcJyBwYXJ0IG9mIFxcJycgKyBleHByZXNzaW9uICsgJ1xcJyBldmFsdWF0ZXMgdG8gJyArIHZhbHVlICsgJyBpbnN0ZWFkIG9mIGFuIG9iamVjdC4nKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFByb3BlcnR5SW5mbyhleHByZXNzaW9uLCBzb3VyY2UpIHtcbiAgdmFyIG9yaWdpbmFsRXhwcmVzc2lvbiA9IGV4cHJlc3Npb247XG4gIHdoaWxlIChleHByZXNzaW9uIGluc3RhbmNlb2YgQmluZGluZ0JlaGF2aW9yIHx8IGV4cHJlc3Npb24gaW5zdGFuY2VvZiBWYWx1ZUNvbnZlcnRlcikge1xuICAgIGV4cHJlc3Npb24gPSBleHByZXNzaW9uLmV4cHJlc3Npb247XG4gIH1cblxuICB2YXIgb2JqZWN0ID0gdm9pZCAwO1xuICB2YXIgcHJvcGVydHkgPSB2b2lkIDA7XG4gIGlmIChleHByZXNzaW9uIGluc3RhbmNlb2YgQWNjZXNzU2NvcGUpIHtcbiAgICBvYmplY3QgPSBzb3VyY2UuYmluZGluZ0NvbnRleHQ7XG4gICAgcHJvcGVydHkgPSBleHByZXNzaW9uLm5hbWU7XG4gIH0gZWxzZSBpZiAoZXhwcmVzc2lvbiBpbnN0YW5jZW9mIEFjY2Vzc01lbWJlcikge1xuICAgIG9iamVjdCA9IGdldE9iamVjdChvcmlnaW5hbEV4cHJlc3Npb24sIGV4cHJlc3Npb24ub2JqZWN0LCBzb3VyY2UpO1xuICAgIHByb3BlcnR5ID0gZXhwcmVzc2lvbi5uYW1lO1xuICB9IGVsc2UgaWYgKGV4cHJlc3Npb24gaW5zdGFuY2VvZiBBY2Nlc3NLZXllZCkge1xuICAgIG9iamVjdCA9IGdldE9iamVjdChvcmlnaW5hbEV4cHJlc3Npb24sIGV4cHJlc3Npb24ub2JqZWN0LCBzb3VyY2UpO1xuICAgIHByb3BlcnR5ID0gZXhwcmVzc2lvbi5rZXkuZXZhbHVhdGUoc291cmNlKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cHJlc3Npb24gXFwnJyArIG9yaWdpbmFsRXhwcmVzc2lvbiArICdcXCcgaXMgbm90IGNvbXBhdGlibGUgd2l0aCB0aGUgdmFsaWRhdGUgYmluZGluZy1iZWhhdmlvci4nKTtcbiAgfVxuXG4gIHJldHVybiB7IG9iamVjdDogb2JqZWN0LCBwcm9wZXJ0eTogcHJvcGVydHkgfTtcbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///KgOP\n");

/***/ }),

/***/ "M2bY":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/aurelia-validatejs/node_modules/aurelia-validation/dist/native-modules/validator.js ***!
  \**********************************************************************************************************/
/*! exports provided: Validator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Validator\", function() { return Validator; });\n/* harmony import */ var _validation_error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validation-error */ \"DcMl\");\n\n\n\n\nvar Validator = function () {\n  function Validator() {\n    \n  }\n\n  Validator.prototype.validateProperty = function validateProperty(object, propertyName) {\n    var rules = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\n    throw new Error('A Validator must implement validateProperty');\n  };\n\n  Validator.prototype.validateObject = function validateObject(object) {\n    var rules = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\n    throw new Error('A Validator must implement validateObject');\n  };\n\n  return Validator;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTTJiWS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhLXZhbGlkYXRlanMvbm9kZV9tb2R1bGVzL2F1cmVsaWEtdmFsaWRhdGlvbi9kaXN0L25hdGl2ZS1tb2R1bGVzL3ZhbGlkYXRvci5qcz8zMzY2Il0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5pbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tICcuL3ZhbGlkYXRpb24tZXJyb3InO1xuXG5leHBvcnQgdmFyIFZhbGlkYXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gVmFsaWRhdG9yKCkge1xuICAgIFxuICB9XG5cbiAgVmFsaWRhdG9yLnByb3RvdHlwZS52YWxpZGF0ZVByb3BlcnR5ID0gZnVuY3Rpb24gdmFsaWRhdGVQcm9wZXJ0eShvYmplY3QsIHByb3BlcnR5TmFtZSkge1xuICAgIHZhciBydWxlcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBhcmd1bWVudHNbMl07XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgVmFsaWRhdG9yIG11c3QgaW1wbGVtZW50IHZhbGlkYXRlUHJvcGVydHknKTtcbiAgfTtcblxuICBWYWxpZGF0b3IucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0ID0gZnVuY3Rpb24gdmFsaWRhdGVPYmplY3Qob2JqZWN0KSB7XG4gICAgdmFyIHJ1bGVzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGFyZ3VtZW50c1sxXTtcblxuICAgIHRocm93IG5ldyBFcnJvcignQSBWYWxpZGF0b3IgbXVzdCBpbXBsZW1lbnQgdmFsaWRhdGVPYmplY3QnKTtcbiAgfTtcblxuICByZXR1cm4gVmFsaWRhdG9yO1xufSgpOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///M2bY\n");

/***/ }),

/***/ "aurelia-validatejs":
/*!***********************************************************************************!*\
  !*** ./node_modules/aurelia-validatejs/dist/native-modules/aurelia-validatejs.js ***!
  \***********************************************************************************/
/*! exports provided: metadataKey, ValidationRule, cleanResult, ValidationRules, base, addRule, length, presence, required, date, datetime, email, equality, exclusion, inclusion, format, url, numericality, Validator, configure */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"metadataKey\", function() { return metadataKey; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidationRule\", function() { return ValidationRule; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"cleanResult\", function() { return cleanResult; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidationRules\", function() { return ValidationRules; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"base\", function() { return base; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"addRule\", function() { return addRule; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"length\", function() { return length; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"presence\", function() { return presence; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"required\", function() { return required; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"date\", function() { return date; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"datetime\", function() { return datetime; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"email\", function() { return email; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"equality\", function() { return equality; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"exclusion\", function() { return exclusion; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"inclusion\", function() { return inclusion; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"format\", function() { return format; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"url\", function() { return url; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"numericality\", function() { return numericality; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Validator\", function() { return Validator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"configure\", function() { return configure; });\n/* harmony import */ var aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia-metadata */ \"qrcG\");\n/* harmony import */ var aurelia_validation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! aurelia-validation */ \"Ctf9\");\n/* harmony import */ var validate_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! validate.js */ \"a1gY\");\n/* harmony import */ var validate_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(validate_js__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\n\nvar metadataKey = 'aurelia-validatejs:rules';\n\nvar ValidationRule = function () {\n  function ValidationRule(name, config) {\n    \n\n    this.name = '';\n\n    this.name = name;\n    this.config = config;\n  }\n\n  ValidationRule.date = function date() {\n    var config = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n    return new ValidationRule('date', config);\n  };\n\n  ValidationRule.datetime = function datetime() {\n    var config = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n    return new ValidationRule('datetime', config);\n  };\n\n  ValidationRule.email = function email() {\n    var config = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n    return new ValidationRule('email', config);\n  };\n\n  ValidationRule.equality = function equality(config) {\n    return new ValidationRule('equality', config);\n  };\n\n  ValidationRule.exclusion = function exclusion(config) {\n    return new ValidationRule('exclusion', config);\n  };\n\n  ValidationRule.format = function format(config) {\n    return new ValidationRule('format', config);\n  };\n\n  ValidationRule.inclusion = function inclusion(config) {\n    return new ValidationRule('inclusion', config);\n  };\n\n  ValidationRule.lengthRule = function lengthRule(config) {\n    return new ValidationRule('length', config);\n  };\n\n  ValidationRule.numericality = function numericality() {\n    var config = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n    return new ValidationRule('numericality', config);\n  };\n\n  ValidationRule.presence = function presence() {\n    var config = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n    return new ValidationRule('presence', config);\n  };\n\n  ValidationRule.url = function url() {\n    var config = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n    return new ValidationRule('url', config);\n  };\n\n  return ValidationRule;\n}();\n\nfunction cleanResult(data) {\n  var result = {};\n  for (var prop in data) {\n    if (data.hasOwnProperty(prop)) {\n      result = {\n        propertyName: prop,\n        message: data[prop][0]\n      };\n    }\n  }\n  return result;\n}\n\nvar ValidationRules = function () {\n  function ValidationRules() {\n    \n\n    this.rules = [];\n  }\n\n  ValidationRules.ensure = function ensure(prop) {\n    var rules = new ValidationRules();\n    return rules.ensure(prop);\n  };\n\n  ValidationRules.prototype.on = function on(target) {\n    if (target instanceof Function) {\n      target = target.prototype;\n    }\n    aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].define(metadataKey, this, target);\n    return this;\n  };\n\n  ValidationRules.prototype.decorate = function decorate() {\n    throw new Error('not implemented');\n  };\n\n  ValidationRules.prototype.addRule = function addRule(key, rule) {\n    this.rules.push({ key: key, rule: rule });\n  };\n\n  ValidationRules.prototype.ensure = function ensure(prop) {\n    this.currentProperty = prop;\n    return this;\n  };\n\n  ValidationRules.prototype.length = function length(configuration) {\n    this.addRule(this.currentProperty, ValidationRule.lengthRule(configuration));\n    return this;\n  };\n\n  ValidationRules.prototype.presence = function presence(configuration) {\n    this.addRule(this.currentProperty, ValidationRule.presence(configuration));\n    return this;\n  };\n\n  ValidationRules.prototype.required = function required(configuration) {\n    this.addRule(this.currentProperty, ValidationRule.presence(configuration));\n    return this;\n  };\n\n  ValidationRules.prototype.numericality = function numericality(configuration) {\n    this.addRule(this.currentProperty, ValidationRule.numericality(configuration));\n    return this;\n  };\n\n  ValidationRules.prototype.date = function date(configuration) {\n    this.addRule(this.currentProperty, ValidationRule.date(configuration));\n    return this;\n  };\n\n  ValidationRules.prototype.datetime = function datetime(configuration) {\n    this.addRule(this.currentProperty, ValidationRule.datetime(configuration));\n    return this;\n  };\n\n  ValidationRules.prototype.email = function email(configuration) {\n    this.addRule(this.currentProperty, ValidationRule.email(configuration));\n    return this;\n  };\n\n  ValidationRules.prototype.equality = function equality(configuration) {\n    this.addRule(this.currentProperty, ValidationRule.equality(configuration));\n    return this;\n  };\n\n  ValidationRules.prototype.format = function format(configuration) {\n    this.addRule(this.currentProperty, ValidationRule.format(configuration));\n    return this;\n  };\n\n  ValidationRules.prototype.inclusion = function inclusion(configuration) {\n    this.addRule(this.currentProperty, ValidationRule.inclusion(configuration));\n    return this;\n  };\n\n  ValidationRules.prototype.exclusion = function exclusion(configuration) {\n    this.addRule(this.currentProperty, ValidationRule.exclusion(configuration));\n    return this;\n  };\n\n  ValidationRules.prototype.url = function url(configuration) {\n    this.addRule(this.currentProperty, ValidationRule.url(configuration));\n    return this;\n  };\n\n  return ValidationRules;\n}();\n\nfunction base(targetOrConfig, key, descriptor, rule) {\n  if (key) {\n    var target = targetOrConfig;\n    targetOrConfig = null;\n    return addRule(target, key, descriptor, targetOrConfig, rule);\n  }\n  return function (t, k, d) {\n    return addRule(t, k, d, targetOrConfig, rule);\n  };\n}\n\nfunction addRule(target, key, descriptor, targetOrConfig, rule) {\n  var rules = aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].getOrCreateOwn(metadataKey, ValidationRules, target);\n  if (targetOrConfig === null || targetOrConfig === undefined) {\n    targetOrConfig = true;\n  }\n  rules.addRule(key, rule(targetOrConfig));\n\n  if (descriptor) {\n    descriptor.configurable = true;\n  }\n}\n\nfunction length(targetOrConfig, key, descriptor) {\n  return base(targetOrConfig, key, descriptor, ValidationRule.lengthRule);\n}\n\nfunction presence(targetOrConfig, key, descriptor) {\n  return base(targetOrConfig, key, descriptor, ValidationRule.presence, true);\n}\n\nfunction required(targetOrConfig, key, descriptor) {\n  return base(targetOrConfig, key, descriptor, ValidationRule.presence, true);\n}\n\nfunction date(targetOrConfig, key, descriptor) {\n  return base(targetOrConfig, key, descriptor, ValidationRule.date);\n}\n\nfunction datetime(targetOrConfig, key, descriptor) {\n  return base(targetOrConfig, key, descriptor, ValidationRule.datetime);\n}\n\nfunction email(targetOrConfig, key, descriptor) {\n  return base(targetOrConfig, key, descriptor, ValidationRule.email);\n}\n\nfunction equality(targetOrConfig, key, descriptor) {\n  return base(targetOrConfig, key, descriptor, ValidationRule.equality);\n}\n\nfunction exclusion(targetOrConfig, key, descriptor) {\n  return base(targetOrConfig, key, descriptor, ValidationRule.exclusion);\n}\n\nfunction inclusion(targetOrConfig, key, descriptor) {\n  return base(targetOrConfig, key, descriptor, ValidationRule.inclusion);\n}\n\nfunction format(targetOrConfig, key, descriptor) {\n  return base(targetOrConfig, key, descriptor, ValidationRule.format);\n}\n\nfunction url(targetOrConfig, key, descriptor) {\n  return base(targetOrConfig, key, descriptor, ValidationRule.url);\n}\n\nfunction numericality(targetOrConfig, key, descriptor) {\n  return base(targetOrConfig, key, descriptor, ValidationRule.numericality);\n}\n\n\n\nvar Validator = function () {\n  function Validator() {\n    \n  }\n\n  Validator.prototype._validate = function _validate(object) {\n    var propertyName = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n    var rules = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\n    var errors = [];\n    if (!rules) {\n      rules = aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].get(metadataKey, object);\n    }\n    if (!rules) {\n      return errors;\n    }\n    rules = rules.rules;\n    for (var i = 0, ii = rules.length; i < ii; i++) {\n      var _propertyName, _validator;\n\n      var ruleInfo = rules[i];\n      if (propertyName !== null && ruleInfo.key !== propertyName) {\n        continue;\n      }\n      var _ruleInfo$rule = ruleInfo.rule;\n      var name = _ruleInfo$rule.name;\n      var config = _ruleInfo$rule.config;\n\n      var validator = (_validator = {}, _validator[propertyName] = (_propertyName = {}, _propertyName[name] = config, _propertyName), _validator);\n      var result = validate_js__WEBPACK_IMPORTED_MODULE_2___default()(object, validator);\n      if (result) {\n        errors.push(new aurelia_validation__WEBPACK_IMPORTED_MODULE_1__[\"ValidationError\"](ruleInfo.rule, result[propertyName][0], object, propertyName));\n      }\n    }\n    return errors;\n  };\n\n  Validator.prototype.validateProperty = function validateProperty(object, propertyName) {\n    var rules = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\n    return this._validate(object, propertyName, rules);\n  };\n\n  Validator.prototype.validateObject = function validateObject(object) {\n    var rules = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\n    return this._validate(object, null, rules);\n  };\n\n  return Validator;\n}();\n\nfunction configure(config) {\n  config.container.registerInstance(aurelia_validation__WEBPACK_IMPORTED_MODULE_1__[\"Validator\"], new Validator());\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXVyZWxpYS12YWxpZGF0ZWpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2F1cmVsaWEtdmFsaWRhdGVqcy9kaXN0L25hdGl2ZS1tb2R1bGVzL2F1cmVsaWEtdmFsaWRhdGVqcy5qcz85N2Q4Il0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5pbXBvcnQgeyBtZXRhZGF0YSB9IGZyb20gJ2F1cmVsaWEtbWV0YWRhdGEnO1xuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yLCBWYWxpZGF0b3IgYXMgVmFsaWRhdG9ySW50ZXJmYWNlIH0gZnJvbSAnYXVyZWxpYS12YWxpZGF0aW9uJztcblxuZXhwb3J0IHZhciBtZXRhZGF0YUtleSA9ICdhdXJlbGlhLXZhbGlkYXRlanM6cnVsZXMnO1xuXG5leHBvcnQgdmFyIFZhbGlkYXRpb25SdWxlID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBWYWxpZGF0aW9uUnVsZShuYW1lLCBjb25maWcpIHtcbiAgICBcblxuICAgIHRoaXMubmFtZSA9ICcnO1xuXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIFZhbGlkYXRpb25SdWxlLmRhdGUgPSBmdW5jdGlvbiBkYXRlKCkge1xuICAgIHZhciBjb25maWcgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB0cnVlIDogYXJndW1lbnRzWzBdO1xuXG4gICAgcmV0dXJuIG5ldyBWYWxpZGF0aW9uUnVsZSgnZGF0ZScsIGNvbmZpZyk7XG4gIH07XG5cbiAgVmFsaWRhdGlvblJ1bGUuZGF0ZXRpbWUgPSBmdW5jdGlvbiBkYXRldGltZSgpIHtcbiAgICB2YXIgY29uZmlnID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGFyZ3VtZW50c1swXTtcblxuICAgIHJldHVybiBuZXcgVmFsaWRhdGlvblJ1bGUoJ2RhdGV0aW1lJywgY29uZmlnKTtcbiAgfTtcblxuICBWYWxpZGF0aW9uUnVsZS5lbWFpbCA9IGZ1bmN0aW9uIGVtYWlsKCkge1xuICAgIHZhciBjb25maWcgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB0cnVlIDogYXJndW1lbnRzWzBdO1xuXG4gICAgcmV0dXJuIG5ldyBWYWxpZGF0aW9uUnVsZSgnZW1haWwnLCBjb25maWcpO1xuICB9O1xuXG4gIFZhbGlkYXRpb25SdWxlLmVxdWFsaXR5ID0gZnVuY3Rpb24gZXF1YWxpdHkoY29uZmlnKSB7XG4gICAgcmV0dXJuIG5ldyBWYWxpZGF0aW9uUnVsZSgnZXF1YWxpdHknLCBjb25maWcpO1xuICB9O1xuXG4gIFZhbGlkYXRpb25SdWxlLmV4Y2x1c2lvbiA9IGZ1bmN0aW9uIGV4Y2x1c2lvbihjb25maWcpIHtcbiAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SdWxlKCdleGNsdXNpb24nLCBjb25maWcpO1xuICB9O1xuXG4gIFZhbGlkYXRpb25SdWxlLmZvcm1hdCA9IGZ1bmN0aW9uIGZvcm1hdChjb25maWcpIHtcbiAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SdWxlKCdmb3JtYXQnLCBjb25maWcpO1xuICB9O1xuXG4gIFZhbGlkYXRpb25SdWxlLmluY2x1c2lvbiA9IGZ1bmN0aW9uIGluY2x1c2lvbihjb25maWcpIHtcbiAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SdWxlKCdpbmNsdXNpb24nLCBjb25maWcpO1xuICB9O1xuXG4gIFZhbGlkYXRpb25SdWxlLmxlbmd0aFJ1bGUgPSBmdW5jdGlvbiBsZW5ndGhSdWxlKGNvbmZpZykge1xuICAgIHJldHVybiBuZXcgVmFsaWRhdGlvblJ1bGUoJ2xlbmd0aCcsIGNvbmZpZyk7XG4gIH07XG5cbiAgVmFsaWRhdGlvblJ1bGUubnVtZXJpY2FsaXR5ID0gZnVuY3Rpb24gbnVtZXJpY2FsaXR5KCkge1xuICAgIHZhciBjb25maWcgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB0cnVlIDogYXJndW1lbnRzWzBdO1xuXG4gICAgcmV0dXJuIG5ldyBWYWxpZGF0aW9uUnVsZSgnbnVtZXJpY2FsaXR5JywgY29uZmlnKTtcbiAgfTtcblxuICBWYWxpZGF0aW9uUnVsZS5wcmVzZW5jZSA9IGZ1bmN0aW9uIHByZXNlbmNlKCkge1xuICAgIHZhciBjb25maWcgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB0cnVlIDogYXJndW1lbnRzWzBdO1xuXG4gICAgcmV0dXJuIG5ldyBWYWxpZGF0aW9uUnVsZSgncHJlc2VuY2UnLCBjb25maWcpO1xuICB9O1xuXG4gIFZhbGlkYXRpb25SdWxlLnVybCA9IGZ1bmN0aW9uIHVybCgpIHtcbiAgICB2YXIgY29uZmlnID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGFyZ3VtZW50c1swXTtcblxuICAgIHJldHVybiBuZXcgVmFsaWRhdGlvblJ1bGUoJ3VybCcsIGNvbmZpZyk7XG4gIH07XG5cbiAgcmV0dXJuIFZhbGlkYXRpb25SdWxlO1xufSgpO1xuXG5leHBvcnQgZnVuY3Rpb24gY2xlYW5SZXN1bHQoZGF0YSkge1xuICB2YXIgcmVzdWx0ID0ge307XG4gIGZvciAodmFyIHByb3AgaW4gZGF0YSkge1xuICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIHByb3BlcnR5TmFtZTogcHJvcCxcbiAgICAgICAgbWVzc2FnZTogZGF0YVtwcm9wXVswXVxuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IHZhciBWYWxpZGF0aW9uUnVsZXMgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFZhbGlkYXRpb25SdWxlcygpIHtcbiAgICBcblxuICAgIHRoaXMucnVsZXMgPSBbXTtcbiAgfVxuXG4gIFZhbGlkYXRpb25SdWxlcy5lbnN1cmUgPSBmdW5jdGlvbiBlbnN1cmUocHJvcCkge1xuICAgIHZhciBydWxlcyA9IG5ldyBWYWxpZGF0aW9uUnVsZXMoKTtcbiAgICByZXR1cm4gcnVsZXMuZW5zdXJlKHByb3ApO1xuICB9O1xuXG4gIFZhbGlkYXRpb25SdWxlcy5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbih0YXJnZXQpIHtcbiAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgIHRhcmdldCA9IHRhcmdldC5wcm90b3R5cGU7XG4gICAgfVxuICAgIG1ldGFkYXRhLmRlZmluZShtZXRhZGF0YUtleSwgdGhpcywgdGFyZ2V0KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBWYWxpZGF0aW9uUnVsZXMucHJvdG90eXBlLmRlY29yYXRlID0gZnVuY3Rpb24gZGVjb3JhdGUoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKTtcbiAgfTtcblxuICBWYWxpZGF0aW9uUnVsZXMucHJvdG90eXBlLmFkZFJ1bGUgPSBmdW5jdGlvbiBhZGRSdWxlKGtleSwgcnVsZSkge1xuICAgIHRoaXMucnVsZXMucHVzaCh7IGtleToga2V5LCBydWxlOiBydWxlIH0pO1xuICB9O1xuXG4gIFZhbGlkYXRpb25SdWxlcy5wcm90b3R5cGUuZW5zdXJlID0gZnVuY3Rpb24gZW5zdXJlKHByb3ApIHtcbiAgICB0aGlzLmN1cnJlbnRQcm9wZXJ0eSA9IHByb3A7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgVmFsaWRhdGlvblJ1bGVzLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiBsZW5ndGgoY29uZmlndXJhdGlvbikge1xuICAgIHRoaXMuYWRkUnVsZSh0aGlzLmN1cnJlbnRQcm9wZXJ0eSwgVmFsaWRhdGlvblJ1bGUubGVuZ3RoUnVsZShjb25maWd1cmF0aW9uKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgVmFsaWRhdGlvblJ1bGVzLnByb3RvdHlwZS5wcmVzZW5jZSA9IGZ1bmN0aW9uIHByZXNlbmNlKGNvbmZpZ3VyYXRpb24pIHtcbiAgICB0aGlzLmFkZFJ1bGUodGhpcy5jdXJyZW50UHJvcGVydHksIFZhbGlkYXRpb25SdWxlLnByZXNlbmNlKGNvbmZpZ3VyYXRpb24pKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBWYWxpZGF0aW9uUnVsZXMucHJvdG90eXBlLnJlcXVpcmVkID0gZnVuY3Rpb24gcmVxdWlyZWQoY29uZmlndXJhdGlvbikge1xuICAgIHRoaXMuYWRkUnVsZSh0aGlzLmN1cnJlbnRQcm9wZXJ0eSwgVmFsaWRhdGlvblJ1bGUucHJlc2VuY2UoY29uZmlndXJhdGlvbikpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIFZhbGlkYXRpb25SdWxlcy5wcm90b3R5cGUubnVtZXJpY2FsaXR5ID0gZnVuY3Rpb24gbnVtZXJpY2FsaXR5KGNvbmZpZ3VyYXRpb24pIHtcbiAgICB0aGlzLmFkZFJ1bGUodGhpcy5jdXJyZW50UHJvcGVydHksIFZhbGlkYXRpb25SdWxlLm51bWVyaWNhbGl0eShjb25maWd1cmF0aW9uKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgVmFsaWRhdGlvblJ1bGVzLnByb3RvdHlwZS5kYXRlID0gZnVuY3Rpb24gZGF0ZShjb25maWd1cmF0aW9uKSB7XG4gICAgdGhpcy5hZGRSdWxlKHRoaXMuY3VycmVudFByb3BlcnR5LCBWYWxpZGF0aW9uUnVsZS5kYXRlKGNvbmZpZ3VyYXRpb24pKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBWYWxpZGF0aW9uUnVsZXMucHJvdG90eXBlLmRhdGV0aW1lID0gZnVuY3Rpb24gZGF0ZXRpbWUoY29uZmlndXJhdGlvbikge1xuICAgIHRoaXMuYWRkUnVsZSh0aGlzLmN1cnJlbnRQcm9wZXJ0eSwgVmFsaWRhdGlvblJ1bGUuZGF0ZXRpbWUoY29uZmlndXJhdGlvbikpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIFZhbGlkYXRpb25SdWxlcy5wcm90b3R5cGUuZW1haWwgPSBmdW5jdGlvbiBlbWFpbChjb25maWd1cmF0aW9uKSB7XG4gICAgdGhpcy5hZGRSdWxlKHRoaXMuY3VycmVudFByb3BlcnR5LCBWYWxpZGF0aW9uUnVsZS5lbWFpbChjb25maWd1cmF0aW9uKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgVmFsaWRhdGlvblJ1bGVzLnByb3RvdHlwZS5lcXVhbGl0eSA9IGZ1bmN0aW9uIGVxdWFsaXR5KGNvbmZpZ3VyYXRpb24pIHtcbiAgICB0aGlzLmFkZFJ1bGUodGhpcy5jdXJyZW50UHJvcGVydHksIFZhbGlkYXRpb25SdWxlLmVxdWFsaXR5KGNvbmZpZ3VyYXRpb24pKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBWYWxpZGF0aW9uUnVsZXMucHJvdG90eXBlLmZvcm1hdCA9IGZ1bmN0aW9uIGZvcm1hdChjb25maWd1cmF0aW9uKSB7XG4gICAgdGhpcy5hZGRSdWxlKHRoaXMuY3VycmVudFByb3BlcnR5LCBWYWxpZGF0aW9uUnVsZS5mb3JtYXQoY29uZmlndXJhdGlvbikpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIFZhbGlkYXRpb25SdWxlcy5wcm90b3R5cGUuaW5jbHVzaW9uID0gZnVuY3Rpb24gaW5jbHVzaW9uKGNvbmZpZ3VyYXRpb24pIHtcbiAgICB0aGlzLmFkZFJ1bGUodGhpcy5jdXJyZW50UHJvcGVydHksIFZhbGlkYXRpb25SdWxlLmluY2x1c2lvbihjb25maWd1cmF0aW9uKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgVmFsaWRhdGlvblJ1bGVzLnByb3RvdHlwZS5leGNsdXNpb24gPSBmdW5jdGlvbiBleGNsdXNpb24oY29uZmlndXJhdGlvbikge1xuICAgIHRoaXMuYWRkUnVsZSh0aGlzLmN1cnJlbnRQcm9wZXJ0eSwgVmFsaWRhdGlvblJ1bGUuZXhjbHVzaW9uKGNvbmZpZ3VyYXRpb24pKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBWYWxpZGF0aW9uUnVsZXMucHJvdG90eXBlLnVybCA9IGZ1bmN0aW9uIHVybChjb25maWd1cmF0aW9uKSB7XG4gICAgdGhpcy5hZGRSdWxlKHRoaXMuY3VycmVudFByb3BlcnR5LCBWYWxpZGF0aW9uUnVsZS51cmwoY29uZmlndXJhdGlvbikpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHJldHVybiBWYWxpZGF0aW9uUnVsZXM7XG59KCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBiYXNlKHRhcmdldE9yQ29uZmlnLCBrZXksIGRlc2NyaXB0b3IsIHJ1bGUpIHtcbiAgaWYgKGtleSkge1xuICAgIHZhciB0YXJnZXQgPSB0YXJnZXRPckNvbmZpZztcbiAgICB0YXJnZXRPckNvbmZpZyA9IG51bGw7XG4gICAgcmV0dXJuIGFkZFJ1bGUodGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IsIHRhcmdldE9yQ29uZmlnLCBydWxlKTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKHQsIGssIGQpIHtcbiAgICByZXR1cm4gYWRkUnVsZSh0LCBrLCBkLCB0YXJnZXRPckNvbmZpZywgcnVsZSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRSdWxlKHRhcmdldCwga2V5LCBkZXNjcmlwdG9yLCB0YXJnZXRPckNvbmZpZywgcnVsZSkge1xuICB2YXIgcnVsZXMgPSBtZXRhZGF0YS5nZXRPckNyZWF0ZU93bihtZXRhZGF0YUtleSwgVmFsaWRhdGlvblJ1bGVzLCB0YXJnZXQpO1xuICBpZiAodGFyZ2V0T3JDb25maWcgPT09IG51bGwgfHwgdGFyZ2V0T3JDb25maWcgPT09IHVuZGVmaW5lZCkge1xuICAgIHRhcmdldE9yQ29uZmlnID0gdHJ1ZTtcbiAgfVxuICBydWxlcy5hZGRSdWxlKGtleSwgcnVsZSh0YXJnZXRPckNvbmZpZykpO1xuXG4gIGlmIChkZXNjcmlwdG9yKSB7XG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsZW5ndGgodGFyZ2V0T3JDb25maWcsIGtleSwgZGVzY3JpcHRvcikge1xuICByZXR1cm4gYmFzZSh0YXJnZXRPckNvbmZpZywga2V5LCBkZXNjcmlwdG9yLCBWYWxpZGF0aW9uUnVsZS5sZW5ndGhSdWxlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByZXNlbmNlKHRhcmdldE9yQ29uZmlnLCBrZXksIGRlc2NyaXB0b3IpIHtcbiAgcmV0dXJuIGJhc2UodGFyZ2V0T3JDb25maWcsIGtleSwgZGVzY3JpcHRvciwgVmFsaWRhdGlvblJ1bGUucHJlc2VuY2UsIHRydWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZWQodGFyZ2V0T3JDb25maWcsIGtleSwgZGVzY3JpcHRvcikge1xuICByZXR1cm4gYmFzZSh0YXJnZXRPckNvbmZpZywga2V5LCBkZXNjcmlwdG9yLCBWYWxpZGF0aW9uUnVsZS5wcmVzZW5jZSwgdHJ1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkYXRlKHRhcmdldE9yQ29uZmlnLCBrZXksIGRlc2NyaXB0b3IpIHtcbiAgcmV0dXJuIGJhc2UodGFyZ2V0T3JDb25maWcsIGtleSwgZGVzY3JpcHRvciwgVmFsaWRhdGlvblJ1bGUuZGF0ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkYXRldGltZSh0YXJnZXRPckNvbmZpZywga2V5LCBkZXNjcmlwdG9yKSB7XG4gIHJldHVybiBiYXNlKHRhcmdldE9yQ29uZmlnLCBrZXksIGRlc2NyaXB0b3IsIFZhbGlkYXRpb25SdWxlLmRhdGV0aW1lKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVtYWlsKHRhcmdldE9yQ29uZmlnLCBrZXksIGRlc2NyaXB0b3IpIHtcbiAgcmV0dXJuIGJhc2UodGFyZ2V0T3JDb25maWcsIGtleSwgZGVzY3JpcHRvciwgVmFsaWRhdGlvblJ1bGUuZW1haWwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxpdHkodGFyZ2V0T3JDb25maWcsIGtleSwgZGVzY3JpcHRvcikge1xuICByZXR1cm4gYmFzZSh0YXJnZXRPckNvbmZpZywga2V5LCBkZXNjcmlwdG9yLCBWYWxpZGF0aW9uUnVsZS5lcXVhbGl0eSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleGNsdXNpb24odGFyZ2V0T3JDb25maWcsIGtleSwgZGVzY3JpcHRvcikge1xuICByZXR1cm4gYmFzZSh0YXJnZXRPckNvbmZpZywga2V5LCBkZXNjcmlwdG9yLCBWYWxpZGF0aW9uUnVsZS5leGNsdXNpb24pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5jbHVzaW9uKHRhcmdldE9yQ29uZmlnLCBrZXksIGRlc2NyaXB0b3IpIHtcbiAgcmV0dXJuIGJhc2UodGFyZ2V0T3JDb25maWcsIGtleSwgZGVzY3JpcHRvciwgVmFsaWRhdGlvblJ1bGUuaW5jbHVzaW9uKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdCh0YXJnZXRPckNvbmZpZywga2V5LCBkZXNjcmlwdG9yKSB7XG4gIHJldHVybiBiYXNlKHRhcmdldE9yQ29uZmlnLCBrZXksIGRlc2NyaXB0b3IsIFZhbGlkYXRpb25SdWxlLmZvcm1hdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cmwodGFyZ2V0T3JDb25maWcsIGtleSwgZGVzY3JpcHRvcikge1xuICByZXR1cm4gYmFzZSh0YXJnZXRPckNvbmZpZywga2V5LCBkZXNjcmlwdG9yLCBWYWxpZGF0aW9uUnVsZS51cmwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbnVtZXJpY2FsaXR5KHRhcmdldE9yQ29uZmlnLCBrZXksIGRlc2NyaXB0b3IpIHtcbiAgcmV0dXJuIGJhc2UodGFyZ2V0T3JDb25maWcsIGtleSwgZGVzY3JpcHRvciwgVmFsaWRhdGlvblJ1bGUubnVtZXJpY2FsaXR5KTtcbn1cblxuaW1wb3J0IHZhbGlkYXRlIGZyb20gJ3ZhbGlkYXRlLmpzJztcblxuZXhwb3J0IHZhciBWYWxpZGF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFZhbGlkYXRvcigpIHtcbiAgICBcbiAgfVxuXG4gIFZhbGlkYXRvci5wcm90b3R5cGUuX3ZhbGlkYXRlID0gZnVuY3Rpb24gX3ZhbGlkYXRlKG9iamVjdCkge1xuICAgIHZhciBwcm9wZXJ0eU5hbWUgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzFdO1xuICAgIHZhciBydWxlcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBhcmd1bWVudHNbMl07XG5cbiAgICB2YXIgZXJyb3JzID0gW107XG4gICAgaWYgKCFydWxlcykge1xuICAgICAgcnVsZXMgPSBtZXRhZGF0YS5nZXQobWV0YWRhdGFLZXksIG9iamVjdCk7XG4gICAgfVxuICAgIGlmICghcnVsZXMpIHtcbiAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgfVxuICAgIHJ1bGVzID0gcnVsZXMucnVsZXM7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcnVsZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgdmFyIF9wcm9wZXJ0eU5hbWUsIF92YWxpZGF0b3I7XG5cbiAgICAgIHZhciBydWxlSW5mbyA9IHJ1bGVzW2ldO1xuICAgICAgaWYgKHByb3BlcnR5TmFtZSAhPT0gbnVsbCAmJiBydWxlSW5mby5rZXkgIT09IHByb3BlcnR5TmFtZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciBfcnVsZUluZm8kcnVsZSA9IHJ1bGVJbmZvLnJ1bGU7XG4gICAgICB2YXIgbmFtZSA9IF9ydWxlSW5mbyRydWxlLm5hbWU7XG4gICAgICB2YXIgY29uZmlnID0gX3J1bGVJbmZvJHJ1bGUuY29uZmlnO1xuXG4gICAgICB2YXIgdmFsaWRhdG9yID0gKF92YWxpZGF0b3IgPSB7fSwgX3ZhbGlkYXRvcltwcm9wZXJ0eU5hbWVdID0gKF9wcm9wZXJ0eU5hbWUgPSB7fSwgX3Byb3BlcnR5TmFtZVtuYW1lXSA9IGNvbmZpZywgX3Byb3BlcnR5TmFtZSksIF92YWxpZGF0b3IpO1xuICAgICAgdmFyIHJlc3VsdCA9IHZhbGlkYXRlKG9iamVjdCwgdmFsaWRhdG9yKTtcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgZXJyb3JzLnB1c2gobmV3IFZhbGlkYXRpb25FcnJvcihydWxlSW5mby5ydWxlLCByZXN1bHRbcHJvcGVydHlOYW1lXVswXSwgb2JqZWN0LCBwcm9wZXJ0eU5hbWUpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVycm9ycztcbiAgfTtcblxuICBWYWxpZGF0b3IucHJvdG90eXBlLnZhbGlkYXRlUHJvcGVydHkgPSBmdW5jdGlvbiB2YWxpZGF0ZVByb3BlcnR5KG9iamVjdCwgcHJvcGVydHlOYW1lKSB7XG4gICAgdmFyIHJ1bGVzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGFyZ3VtZW50c1syXTtcblxuICAgIHJldHVybiB0aGlzLl92YWxpZGF0ZShvYmplY3QsIHByb3BlcnR5TmFtZSwgcnVsZXMpO1xuICB9O1xuXG4gIFZhbGlkYXRvci5wcm90b3R5cGUudmFsaWRhdGVPYmplY3QgPSBmdW5jdGlvbiB2YWxpZGF0ZU9iamVjdChvYmplY3QpIHtcbiAgICB2YXIgcnVsZXMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzFdO1xuXG4gICAgcmV0dXJuIHRoaXMuX3ZhbGlkYXRlKG9iamVjdCwgbnVsbCwgcnVsZXMpO1xuICB9O1xuXG4gIHJldHVybiBWYWxpZGF0b3I7XG59KCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmUoY29uZmlnKSB7XG4gIGNvbmZpZy5jb250YWluZXIucmVnaXN0ZXJJbnN0YW5jZShWYWxpZGF0b3JJbnRlcmZhY2UsIG5ldyBWYWxpZGF0b3IoKSk7XG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///aurelia-validatejs\n");

/***/ }),

/***/ "aurelia-validation":
/*!***********************************************************************************!*\
  !*** ./node_modules/aurelia-validation/dist/native-modules/aurelia-validation.js ***!
  \***********************************************************************************/
/*! exports provided: configure, GlobalValidationConfiguration, getTargetDOMElement, getPropertyInfo, PropertyAccessorParser, getAccessorExpression, ValidateBindingBehavior, ValidateManuallyBindingBehavior, ValidateOnBlurBindingBehavior, ValidateOnChangeBindingBehavior, ValidateOnChangeOrBlurBindingBehavior, ValidateOnFocusoutBindingBehavior, ValidateOnChangeOrFocusoutBindingBehavior, ValidateEvent, ValidateResult, validateTrigger, ValidationController, ValidationControllerFactory, ValidationErrorsCustomAttribute, ValidationRendererCustomAttribute, Validator, Rules, StandardValidator, validationMessages, ValidationMessageProvider, ValidationMessageParser, MessageExpressionValidator, FluentRuleCustomizer, FluentRules, FluentEnsure, ValidationRules */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"configure\", function() { return configure; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GlobalValidationConfiguration\", function() { return GlobalValidationConfiguration; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getTargetDOMElement\", function() { return getTargetDOMElement; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getPropertyInfo\", function() { return getPropertyInfo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PropertyAccessorParser\", function() { return PropertyAccessorParser; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getAccessorExpression\", function() { return getAccessorExpression; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidateBindingBehavior\", function() { return ValidateBindingBehavior; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidateManuallyBindingBehavior\", function() { return ValidateManuallyBindingBehavior; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidateOnBlurBindingBehavior\", function() { return ValidateOnBlurBindingBehavior; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidateOnChangeBindingBehavior\", function() { return ValidateOnChangeBindingBehavior; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidateOnChangeOrBlurBindingBehavior\", function() { return ValidateOnChangeOrBlurBindingBehavior; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidateOnFocusoutBindingBehavior\", function() { return ValidateOnFocusoutBindingBehavior; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidateOnChangeOrFocusoutBindingBehavior\", function() { return ValidateOnChangeOrFocusoutBindingBehavior; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidateEvent\", function() { return ValidateEvent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidateResult\", function() { return ValidateResult; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validateTrigger\", function() { return validateTrigger; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidationController\", function() { return ValidationController; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidationControllerFactory\", function() { return ValidationControllerFactory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidationErrorsCustomAttribute\", function() { return ValidationErrorsCustomAttribute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidationRendererCustomAttribute\", function() { return ValidationRendererCustomAttribute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Validator\", function() { return Validator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Rules\", function() { return Rules; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StandardValidator\", function() { return StandardValidator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validationMessages\", function() { return validationMessages; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidationMessageProvider\", function() { return ValidationMessageProvider; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidationMessageParser\", function() { return ValidationMessageParser; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MessageExpressionValidator\", function() { return MessageExpressionValidator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FluentRuleCustomizer\", function() { return FluentRuleCustomizer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FluentRules\", function() { return FluentRules; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FluentEnsure\", function() { return FluentEnsure; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidationRules\", function() { return ValidationRules; });\n/* harmony import */ var aurelia_binding__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia-binding */ \"X5gX\");\n/* harmony import */ var aurelia_templating__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! aurelia-templating */ \"hij8\");\n/* harmony import */ var aurelia_logging__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! aurelia-logging */ \"MP1E\");\n/* harmony import */ var aurelia_pal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! aurelia-pal */ \"70NS\");\n/* harmony import */ var aurelia_dependency_injection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! aurelia-dependency-injection */ \"3U8n\");\n/* harmony import */ var aurelia_task_queue__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! aurelia-task-queue */ \"K/SW\");\n\n\n\n\n\n\n\n/**\r\n * Validates objects and properties.\r\n */\r\nvar Validator = /** @class */ (function () {\r\n    function Validator() {\r\n    }\r\n    return Validator;\r\n}());\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\n\n/**\r\n * The result of validating an individual validation rule.\r\n */\r\nvar ValidateResult = /** @class */ (function () {\r\n    /**\r\n     * @param rule The rule associated with the result. Validator implementation specific.\r\n     * @param object The object that was validated.\r\n     * @param propertyName The name of the property that was validated.\r\n     * @param error The error, if the result is a validation error.\r\n     */\r\n    function ValidateResult(rule, object, propertyName, valid, message) {\r\n        if (message === void 0) { message = null; }\r\n        this.rule = rule;\r\n        this.object = object;\r\n        this.propertyName = propertyName;\r\n        this.valid = valid;\r\n        this.message = message;\r\n        this.id = ValidateResult.nextId++;\r\n    }\r\n    ValidateResult.prototype.toString = function () {\r\n        return this.valid ? 'Valid.' : this.message;\r\n    };\r\n    ValidateResult.nextId = 0;\r\n    return ValidateResult;\r\n}());\n\n/**\r\n * Sets, unsets and retrieves rules on an object or constructor function.\r\n */\r\nvar Rules = /** @class */ (function () {\r\n    function Rules() {\r\n    }\r\n    /**\r\n     * Applies the rules to a target.\r\n     */\r\n    Rules.set = function (target, rules) {\r\n        if (target instanceof Function) {\r\n            target = target.prototype;\r\n        }\r\n        Object.defineProperty(target, Rules.key, { enumerable: false, configurable: false, writable: true, value: rules });\r\n    };\r\n    /**\r\n     * Removes rules from a target.\r\n     */\r\n    Rules.unset = function (target) {\r\n        if (target instanceof Function) {\r\n            target = target.prototype;\r\n        }\r\n        target[Rules.key] = null;\r\n    };\r\n    /**\r\n     * Retrieves the target's rules.\r\n     */\r\n    Rules.get = function (target) {\r\n        return target[Rules.key] || null;\r\n    };\r\n    /**\r\n     * The name of the property that stores the rules.\r\n     */\r\n    Rules.key = '__rules__';\r\n    return Rules;\r\n}());\n\n// tslint:disable:no-empty\r\nvar ExpressionVisitor = /** @class */ (function () {\r\n    function ExpressionVisitor() {\r\n    }\r\n    ExpressionVisitor.prototype.visitChain = function (chain) {\r\n        this.visitArgs(chain.expressions);\r\n    };\r\n    ExpressionVisitor.prototype.visitBindingBehavior = function (behavior) {\r\n        behavior.expression.accept(this);\r\n        this.visitArgs(behavior.args);\r\n    };\r\n    ExpressionVisitor.prototype.visitValueConverter = function (converter) {\r\n        converter.expression.accept(this);\r\n        this.visitArgs(converter.args);\r\n    };\r\n    ExpressionVisitor.prototype.visitAssign = function (assign) {\r\n        assign.target.accept(this);\r\n        assign.value.accept(this);\r\n    };\r\n    ExpressionVisitor.prototype.visitConditional = function (conditional) {\r\n        conditional.condition.accept(this);\r\n        conditional.yes.accept(this);\r\n        conditional.no.accept(this);\r\n    };\r\n    ExpressionVisitor.prototype.visitAccessThis = function (access) {\r\n        access.ancestor = access.ancestor;\r\n    };\r\n    ExpressionVisitor.prototype.visitAccessScope = function (access) {\r\n        access.name = access.name;\r\n    };\r\n    ExpressionVisitor.prototype.visitAccessMember = function (access) {\r\n        access.object.accept(this);\r\n    };\r\n    ExpressionVisitor.prototype.visitAccessKeyed = function (access) {\r\n        access.object.accept(this);\r\n        access.key.accept(this);\r\n    };\r\n    ExpressionVisitor.prototype.visitCallScope = function (call) {\r\n        this.visitArgs(call.args);\r\n    };\r\n    ExpressionVisitor.prototype.visitCallFunction = function (call) {\r\n        call.func.accept(this);\r\n        this.visitArgs(call.args);\r\n    };\r\n    ExpressionVisitor.prototype.visitCallMember = function (call) {\r\n        call.object.accept(this);\r\n        this.visitArgs(call.args);\r\n    };\r\n    ExpressionVisitor.prototype.visitPrefix = function (prefix) {\r\n        prefix.expression.accept(this);\r\n    };\r\n    ExpressionVisitor.prototype.visitBinary = function (binary) {\r\n        binary.left.accept(this);\r\n        binary.right.accept(this);\r\n    };\r\n    ExpressionVisitor.prototype.visitLiteralPrimitive = function (literal) {\r\n        literal.value = literal.value;\r\n    };\r\n    ExpressionVisitor.prototype.visitLiteralArray = function (literal) {\r\n        this.visitArgs(literal.elements);\r\n    };\r\n    ExpressionVisitor.prototype.visitLiteralObject = function (literal) {\r\n        this.visitArgs(literal.values);\r\n    };\r\n    ExpressionVisitor.prototype.visitLiteralString = function (literal) {\r\n        literal.value = literal.value;\r\n    };\r\n    ExpressionVisitor.prototype.visitArgs = function (args) {\r\n        for (var i = 0; i < args.length; i++) {\r\n            args[i].accept(this);\r\n        }\r\n    };\r\n    return ExpressionVisitor;\r\n}());\n\nvar ValidationMessageParser = /** @class */ (function () {\r\n    function ValidationMessageParser(bindinqLanguage) {\r\n        this.bindinqLanguage = bindinqLanguage;\r\n        this.emptyStringExpression = new aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"LiteralString\"]('');\r\n        this.nullExpression = new aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"LiteralPrimitive\"](null);\r\n        this.undefinedExpression = new aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"LiteralPrimitive\"](undefined);\r\n        this.cache = {};\r\n    }\r\n    ValidationMessageParser.prototype.parse = function (message) {\r\n        if (this.cache[message] !== undefined) {\r\n            return this.cache[message];\r\n        }\r\n        var parts = this.bindinqLanguage.parseInterpolation(null, message);\r\n        if (parts === null) {\r\n            return new aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"LiteralString\"](message);\r\n        }\r\n        var expression = new aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"LiteralString\"](parts[0]);\r\n        for (var i = 1; i < parts.length; i += 2) {\r\n            expression = new aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"Binary\"]('+', expression, new aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"Binary\"]('+', this.coalesce(parts[i]), new aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"LiteralString\"](parts[i + 1])));\r\n        }\r\n        MessageExpressionValidator.validate(expression, message);\r\n        this.cache[message] = expression;\r\n        return expression;\r\n    };\r\n    ValidationMessageParser.prototype.coalesce = function (part) {\r\n        // part === null || part === undefined ? '' : part\r\n        return new aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"Conditional\"](new aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"Binary\"]('||', new aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"Binary\"]('===', part, this.nullExpression), new aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"Binary\"]('===', part, this.undefinedExpression)), this.emptyStringExpression, new aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"CallMember\"](part, 'toString', []));\r\n    };\r\n    ValidationMessageParser.inject = [aurelia_templating__WEBPACK_IMPORTED_MODULE_1__[\"BindingLanguage\"]];\r\n    return ValidationMessageParser;\r\n}());\r\nvar MessageExpressionValidator = /** @class */ (function (_super) {\r\n    __extends(MessageExpressionValidator, _super);\r\n    function MessageExpressionValidator(originalMessage) {\r\n        var _this = _super.call(this) || this;\r\n        _this.originalMessage = originalMessage;\r\n        return _this;\r\n    }\r\n    MessageExpressionValidator.validate = function (expression, originalMessage) {\r\n        var visitor = new MessageExpressionValidator(originalMessage);\r\n        expression.accept(visitor);\r\n    };\r\n    MessageExpressionValidator.prototype.visitAccessScope = function (access) {\r\n        if (access.ancestor !== 0) {\r\n            throw new Error('$parent is not permitted in validation message expressions.');\r\n        }\r\n        if (['displayName', 'propertyName', 'value', 'object', 'config', 'getDisplayName'].indexOf(access.name) !== -1) {\r\n            Object(aurelia_logging__WEBPACK_IMPORTED_MODULE_2__[\"getLogger\"])('aurelia-validation')\r\n                // tslint:disable-next-line:max-line-length\r\n                .warn(\"Did you mean to use \\\"$\" + access.name + \"\\\" instead of \\\"\" + access.name + \"\\\" in this validation message template: \\\"\" + this.originalMessage + \"\\\"?\");\r\n        }\r\n    };\r\n    return MessageExpressionValidator;\r\n}(ExpressionVisitor));\n\n/**\r\n * Dictionary of validation messages. [messageKey]: messageExpression\r\n */\r\nvar validationMessages = {\r\n    /**\r\n     * The default validation message. Used with rules that have no standard message.\r\n     */\r\n    default: \"${$displayName} is invalid.\",\r\n    required: \"${$displayName} is required.\",\r\n    matches: \"${$displayName} is not correctly formatted.\",\r\n    email: \"${$displayName} is not a valid email.\",\r\n    minLength: \"${$displayName} must be at least ${$config.length} character${$config.length === 1 ? '' : 's'}.\",\r\n    maxLength: \"${$displayName} cannot be longer than ${$config.length} character${$config.length === 1 ? '' : 's'}.\",\r\n    minItems: \"${$displayName} must contain at least ${$config.count} item${$config.count === 1 ? '' : 's'}.\",\r\n    maxItems: \"${$displayName} cannot contain more than ${$config.count} item${$config.count === 1 ? '' : 's'}.\",\r\n    min: \"${$displayName} must be at least ${$config.constraint}.\",\r\n    max: \"${$displayName} must be at most ${$config.constraint}.\",\r\n    range: \"${$displayName} must be between or equal to ${$config.min} and ${$config.max}.\",\r\n    between: \"${$displayName} must be between but not equal to ${$config.min} and ${$config.max}.\",\r\n    equals: \"${$displayName} must be ${$config.expectedValue}.\",\r\n};\r\n/**\r\n * Retrieves validation messages and property display names.\r\n */\r\nvar ValidationMessageProvider = /** @class */ (function () {\r\n    function ValidationMessageProvider(parser) {\r\n        this.parser = parser;\r\n    }\r\n    /**\r\n     * Returns a message binding expression that corresponds to the key.\r\n     * @param key The message key.\r\n     */\r\n    ValidationMessageProvider.prototype.getMessage = function (key) {\r\n        var message;\r\n        if (key in validationMessages) {\r\n            message = validationMessages[key];\r\n        }\r\n        else {\r\n            message = validationMessages['default'];\r\n        }\r\n        return this.parser.parse(message);\r\n    };\r\n    /**\r\n     * Formulates a property display name using the property name and the configured\r\n     * displayName (if provided).\r\n     * Override this with your own custom logic.\r\n     * @param propertyName The property name.\r\n     */\r\n    ValidationMessageProvider.prototype.getDisplayName = function (propertyName, displayName) {\r\n        if (displayName !== null && displayName !== undefined) {\r\n            return (displayName instanceof Function) ? displayName() : displayName;\r\n        }\r\n        // split on upper-case letters.\r\n        var words = propertyName.toString().split(/(?=[A-Z])/).join(' ');\r\n        // capitalize first letter.\r\n        return words.charAt(0).toUpperCase() + words.slice(1);\r\n    };\r\n    ValidationMessageProvider.inject = [ValidationMessageParser];\r\n    return ValidationMessageProvider;\r\n}());\n\n/**\r\n * Validates.\r\n * Responsible for validating objects and properties.\r\n */\r\nvar StandardValidator = /** @class */ (function (_super) {\r\n    __extends(StandardValidator, _super);\r\n    function StandardValidator(messageProvider, resources) {\r\n        var _this = _super.call(this) || this;\r\n        _this.messageProvider = messageProvider;\r\n        _this.lookupFunctions = resources.lookupFunctions;\r\n        _this.getDisplayName = messageProvider.getDisplayName.bind(messageProvider);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Validates the specified property.\r\n     * @param object The object to validate.\r\n     * @param propertyName The name of the property to validate.\r\n     * @param rules Optional. If unspecified, the rules will be looked up using the metadata\r\n     * for the object created by ValidationRules....on(class/object)\r\n     */\r\n    StandardValidator.prototype.validateProperty = function (object, propertyName, rules) {\r\n        return this.validate(object, propertyName, rules || null);\r\n    };\r\n    /**\r\n     * Validates all rules for specified object and it's properties.\r\n     * @param object The object to validate.\r\n     * @param rules Optional. If unspecified, the rules will be looked up using the metadata\r\n     * for the object created by ValidationRules....on(class/object)\r\n     */\r\n    StandardValidator.prototype.validateObject = function (object, rules) {\r\n        return this.validate(object, null, rules || null);\r\n    };\r\n    /**\r\n     * Determines whether a rule exists in a set of rules.\r\n     * @param rules The rules to search.\r\n     * @parem rule The rule to find.\r\n     */\r\n    StandardValidator.prototype.ruleExists = function (rules, rule) {\r\n        var i = rules.length;\r\n        while (i--) {\r\n            if (rules[i].indexOf(rule) !== -1) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    StandardValidator.prototype.getMessage = function (rule, object, value) {\r\n        var expression = rule.message || this.messageProvider.getMessage(rule.messageKey);\r\n        // tslint:disable-next-line:prefer-const\r\n        var _a = rule.property, propertyName = _a.name, displayName = _a.displayName;\r\n        if (propertyName !== null) {\r\n            displayName = this.messageProvider.getDisplayName(propertyName, displayName);\r\n        }\r\n        var overrideContext = {\r\n            $displayName: displayName,\r\n            $propertyName: propertyName,\r\n            $value: value,\r\n            $object: object,\r\n            $config: rule.config,\r\n            // returns the name of a given property, given just the property name (irrespective of the property's displayName)\r\n            // split on capital letters, first letter ensured to be capitalized\r\n            $getDisplayName: this.getDisplayName\r\n        };\r\n        return expression.evaluate({ bindingContext: object, overrideContext: overrideContext }, this.lookupFunctions);\r\n    };\r\n    StandardValidator.prototype.validateRuleSequence = function (object, propertyName, ruleSequence, sequence, results) {\r\n        var _this = this;\r\n        // are we validating all properties or a single property?\r\n        var validateAllProperties = propertyName === null || propertyName === undefined;\r\n        var rules = ruleSequence[sequence];\r\n        var allValid = true;\r\n        // validate each rule.\r\n        var promises = [];\r\n        var _loop_1 = function (i) {\r\n            var rule = rules[i];\r\n            // is the rule related to the property we're validating.\r\n            // tslint:disable-next-line:triple-equals | Use loose equality for property keys\r\n            if (!validateAllProperties && rule.property.name != propertyName) {\r\n                return \"continue\";\r\n            }\r\n            // is this a conditional rule? is the condition met?\r\n            if (rule.when && !rule.when(object)) {\r\n                return \"continue\";\r\n            }\r\n            // validate.\r\n            var value = rule.property.name === null ? object : object[rule.property.name];\r\n            var promiseOrBoolean = rule.condition(value, object);\r\n            if (!(promiseOrBoolean instanceof Promise)) {\r\n                promiseOrBoolean = Promise.resolve(promiseOrBoolean);\r\n            }\r\n            promises.push(promiseOrBoolean.then(function (valid) {\r\n                var message = valid ? null : _this.getMessage(rule, object, value);\r\n                results.push(new ValidateResult(rule, object, rule.property.name, valid, message));\r\n                allValid = allValid && valid;\r\n                return valid;\r\n            }));\r\n        };\r\n        for (var i = 0; i < rules.length; i++) {\r\n            _loop_1(i);\r\n        }\r\n        return Promise.all(promises)\r\n            .then(function () {\r\n            sequence++;\r\n            if (allValid && sequence < ruleSequence.length) {\r\n                return _this.validateRuleSequence(object, propertyName, ruleSequence, sequence, results);\r\n            }\r\n            return results;\r\n        });\r\n    };\r\n    StandardValidator.prototype.validate = function (object, propertyName, rules) {\r\n        // rules specified?\r\n        if (!rules) {\r\n            // no. attempt to locate the rules.\r\n            rules = Rules.get(object);\r\n        }\r\n        // any rules?\r\n        if (!rules || rules.length === 0) {\r\n            return Promise.resolve([]);\r\n        }\r\n        return this.validateRuleSequence(object, propertyName, rules, 0, []);\r\n    };\r\n    StandardValidator.inject = [ValidationMessageProvider, aurelia_templating__WEBPACK_IMPORTED_MODULE_1__[\"ViewResources\"]];\r\n    return StandardValidator;\r\n}(Validator));\n\n/**\r\n * Validation triggers.\r\n */\r\nvar validateTrigger;\r\n(function (validateTrigger) {\r\n    /**\r\n     * Manual validation.  Use the controller's `validate()` and  `reset()` methods\r\n     * to validate all bindings.\r\n     */\r\n    validateTrigger[validateTrigger[\"manual\"] = 0] = \"manual\";\r\n    /**\r\n     * Validate the binding when the binding's target element fires a DOM \"blur\" event.\r\n     */\r\n    validateTrigger[validateTrigger[\"blur\"] = 1] = \"blur\";\r\n    /**\r\n     * Validate the binding when it updates the model due to a change in the view.\r\n     */\r\n    validateTrigger[validateTrigger[\"change\"] = 2] = \"change\";\r\n    /**\r\n     * Validate the binding when the binding's target element fires a DOM \"blur\" event and\r\n     * when it updates the model due to a change in the view.\r\n     */\r\n    validateTrigger[validateTrigger[\"changeOrBlur\"] = 3] = \"changeOrBlur\";\r\n    /**\r\n     * Validate the binding when the binding's target element fires a DOM \"focusout\" event.\r\n     * Unlike \"blur\", this event bubbles.\r\n     */\r\n    validateTrigger[validateTrigger[\"focusout\"] = 4] = \"focusout\";\r\n    /**\r\n     * Validate the binding when the binding's target element fires a DOM \"focusout\" event or\r\n     * when it updates the model due to a change in the view.\r\n     */\r\n    validateTrigger[validateTrigger[\"changeOrFocusout\"] = 6] = \"changeOrFocusout\";\r\n})(validateTrigger || (validateTrigger = {}));\n\n/**\r\n * Aurelia Validation Configuration API\r\n */\r\nvar GlobalValidationConfiguration = /** @class */ (function () {\r\n    function GlobalValidationConfiguration() {\r\n        this.validatorType = StandardValidator;\r\n        this.validationTrigger = GlobalValidationConfiguration.DEFAULT_VALIDATION_TRIGGER;\r\n    }\r\n    /**\r\n     * Use a custom Validator implementation.\r\n     */\r\n    GlobalValidationConfiguration.prototype.customValidator = function (type) {\r\n        this.validatorType = type;\r\n        return this;\r\n    };\r\n    GlobalValidationConfiguration.prototype.defaultValidationTrigger = function (trigger) {\r\n        this.validationTrigger = trigger;\r\n        return this;\r\n    };\r\n    GlobalValidationConfiguration.prototype.getDefaultValidationTrigger = function () {\r\n        return this.validationTrigger;\r\n    };\r\n    /**\r\n     * Applies the configuration.\r\n     */\r\n    GlobalValidationConfiguration.prototype.apply = function (container) {\r\n        var validator = container.get(this.validatorType);\r\n        container.registerInstance(Validator, validator);\r\n        container.registerInstance(GlobalValidationConfiguration, this);\r\n    };\r\n    GlobalValidationConfiguration.DEFAULT_VALIDATION_TRIGGER = validateTrigger.blur;\r\n    return GlobalValidationConfiguration;\r\n}());\n\n/**\r\n * Gets the DOM element associated with the data-binding. Most of the time it's\r\n * the binding.target but sometimes binding.target is an aurelia custom element,\r\n * or custom attribute which is a javascript \"class\" instance, so we need to use\r\n * the controller's container to retrieve the actual DOM element.\r\n */\r\nfunction getTargetDOMElement(binding, view) {\r\n    var target = binding.target;\r\n    // DOM element\r\n    if (target instanceof Element) {\r\n        return target;\r\n    }\r\n    // custom element or custom attribute\r\n    // tslint:disable-next-line:prefer-const\r\n    for (var i = 0, ii = view.controllers.length; i < ii; i++) {\r\n        var controller = view.controllers[i];\r\n        if (controller.viewModel === target) {\r\n            var element = controller.container.get(aurelia_pal__WEBPACK_IMPORTED_MODULE_3__[\"DOM\"].Element);\r\n            if (element) {\r\n                return element;\r\n            }\r\n            throw new Error(\"Unable to locate target element for \\\"\" + binding.sourceExpression + \"\\\".\");\r\n        }\r\n    }\r\n    throw new Error(\"Unable to locate target element for \\\"\" + binding.sourceExpression + \"\\\".\");\r\n}\n\nfunction getObject(expression, objectExpression, source) {\r\n    var value = objectExpression.evaluate(source, null);\r\n    if (value === null || value === undefined || value instanceof Object) {\r\n        return value;\r\n    }\r\n    // tslint:disable-next-line:max-line-length\r\n    throw new Error(\"The '\" + objectExpression + \"' part of '\" + expression + \"' evaluates to \" + value + \" instead of an object, null or undefined.\");\r\n}\r\n/**\r\n * Retrieves the object and property name for the specified expression.\r\n * @param expression The expression\r\n * @param source The scope\r\n */\r\nfunction getPropertyInfo(expression, source) {\r\n    var originalExpression = expression;\r\n    while (expression instanceof aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"BindingBehavior\"] || expression instanceof aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"ValueConverter\"]) {\r\n        expression = expression.expression;\r\n    }\r\n    var object;\r\n    var propertyName;\r\n    if (expression instanceof aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"AccessScope\"]) {\r\n        object = Object(aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"getContextFor\"])(expression.name, source, expression.ancestor);\r\n        propertyName = expression.name;\r\n    }\r\n    else if (expression instanceof aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"AccessMember\"]) {\r\n        object = getObject(originalExpression, expression.object, source);\r\n        propertyName = expression.name;\r\n    }\r\n    else if (expression instanceof aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"AccessKeyed\"]) {\r\n        object = getObject(originalExpression, expression.object, source);\r\n        propertyName = expression.key.evaluate(source);\r\n    }\r\n    else {\r\n        throw new Error(\"Expression '\" + originalExpression + \"' is not compatible with the validate binding-behavior.\");\r\n    }\r\n    if (object === null || object === undefined) {\r\n        return null;\r\n    }\r\n    return { object: object, propertyName: propertyName };\r\n}\n\nfunction isString(value) {\r\n    return Object.prototype.toString.call(value) === '[object String]';\r\n}\r\nfunction isNumber(value) {\r\n    return Object.prototype.toString.call(value) === '[object Number]';\r\n}\n\nvar PropertyAccessorParser = /** @class */ (function () {\r\n    function PropertyAccessorParser(parser) {\r\n        this.parser = parser;\r\n    }\r\n    PropertyAccessorParser.prototype.parse = function (property) {\r\n        if (isString(property) || isNumber(property)) {\r\n            return property;\r\n        }\r\n        var accessorText = getAccessorExpression(property.toString());\r\n        var accessor = this.parser.parse(accessorText);\r\n        if (accessor instanceof aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"AccessScope\"]\r\n            || accessor instanceof aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"AccessMember\"] && accessor.object instanceof aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"AccessScope\"]) {\r\n            return accessor.name;\r\n        }\r\n        throw new Error(\"Invalid property expression: \\\"\" + accessor + \"\\\"\");\r\n    };\r\n    PropertyAccessorParser.inject = [aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"Parser\"]];\r\n    return PropertyAccessorParser;\r\n}());\r\nfunction getAccessorExpression(fn) {\r\n    /* tslint:disable:max-line-length */\r\n    var classic = /^function\\s*\\([$_\\w\\d]+\\)\\s*\\{(?:\\s*\"use strict\";)?(?:[$_\\s\\w\\d\\/\\*.['\"\\]+;]+)?\\s*return\\s+[$_\\w\\d]+\\.([$_\\w\\d]+)\\s*;?\\s*\\}$/;\r\n    /* tslint:enable:max-line-length */\r\n    var arrow = /^\\(?[$_\\w\\d]+\\)?\\s*=>\\s*[$_\\w\\d]+\\.([$_\\w\\d]+)$/;\r\n    var match = classic.exec(fn) || arrow.exec(fn);\r\n    if (match === null) {\r\n        throw new Error(\"Unable to parse accessor function:\\n\" + fn);\r\n    }\r\n    return match[1];\r\n}\n\nvar ValidateEvent = /** @class */ (function () {\r\n    function ValidateEvent(\r\n    /**\r\n     * The type of validate event. Either \"validate\" or \"reset\".\r\n     */\r\n    type, \r\n    /**\r\n     * The controller's current array of errors. For an array containing both\r\n     * failed rules and passed rules, use the \"results\" property.\r\n     */\r\n    errors, \r\n    /**\r\n     * The controller's current array of validate results. This\r\n     * includes both passed rules and failed rules. For an array of only failed rules,\r\n     * use the \"errors\" property.\r\n     */\r\n    results, \r\n    /**\r\n     * The instruction passed to the \"validate\" or \"reset\" event. Will be null when\r\n     * the controller's validate/reset method was called with no instruction argument.\r\n     */\r\n    instruction, \r\n    /**\r\n     * In events with type === \"validate\", this property will contain the result\r\n     * of validating the instruction (see \"instruction\" property). Use the controllerValidateResult\r\n     * to access the validate results specific to the call to \"validate\"\r\n     * (as opposed to using the \"results\" and \"errors\" properties to access the controller's entire\r\n     * set of results/errors).\r\n     */\r\n    controllerValidateResult) {\r\n        this.type = type;\r\n        this.errors = errors;\r\n        this.results = results;\r\n        this.instruction = instruction;\r\n        this.controllerValidateResult = controllerValidateResult;\r\n    }\r\n    return ValidateEvent;\r\n}());\n\n/**\r\n * Orchestrates validation.\r\n * Manages a set of bindings, renderers and objects.\r\n * Exposes the current list of validation results for binding purposes.\r\n */\r\nvar ValidationController = /** @class */ (function () {\r\n    function ValidationController(validator, propertyParser, config) {\r\n        this.validator = validator;\r\n        this.propertyParser = propertyParser;\r\n        // Registered bindings (via the validate binding behavior)\r\n        this.bindings = new Map();\r\n        // Renderers that have been added to the controller instance.\r\n        this.renderers = [];\r\n        /**\r\n         * Validation results that have been rendered by the controller.\r\n         */\r\n        this.results = [];\r\n        /**\r\n         * Validation errors that have been rendered by the controller.\r\n         */\r\n        this.errors = [];\r\n        /**\r\n         *  Whether the controller is currently validating.\r\n         */\r\n        this.validating = false;\r\n        // Elements related to validation results that have been rendered.\r\n        this.elements = new Map();\r\n        // Objects that have been added to the controller instance (entity-style validation).\r\n        this.objects = new Map();\r\n        // Promise that resolves when validation has completed.\r\n        this.finishValidating = Promise.resolve();\r\n        this.eventCallbacks = [];\r\n        this.validateTrigger = config instanceof GlobalValidationConfiguration\r\n            ? config.getDefaultValidationTrigger()\r\n            : GlobalValidationConfiguration.DEFAULT_VALIDATION_TRIGGER;\r\n    }\r\n    /**\r\n     * Subscribe to controller validate and reset events. These events occur when the\r\n     * controller's \"validate\"\" and \"reset\" methods are called.\r\n     * @param callback The callback to be invoked when the controller validates or resets.\r\n     */\r\n    ValidationController.prototype.subscribe = function (callback) {\r\n        var _this = this;\r\n        this.eventCallbacks.push(callback);\r\n        return {\r\n            dispose: function () {\r\n                var index = _this.eventCallbacks.indexOf(callback);\r\n                if (index === -1) {\r\n                    return;\r\n                }\r\n                _this.eventCallbacks.splice(index, 1);\r\n            }\r\n        };\r\n    };\r\n    /**\r\n     * Adds an object to the set of objects that should be validated when validate is called.\r\n     * @param object The object.\r\n     * @param rules Optional. The rules. If rules aren't supplied the Validator implementation will lookup the rules.\r\n     */\r\n    ValidationController.prototype.addObject = function (object, rules) {\r\n        this.objects.set(object, rules);\r\n    };\r\n    /**\r\n     * Removes an object from the set of objects that should be validated when validate is called.\r\n     * @param object The object.\r\n     */\r\n    ValidationController.prototype.removeObject = function (object) {\r\n        this.objects.delete(object);\r\n        this.processResultDelta('reset', this.results.filter(function (result) { return result.object === object; }), []);\r\n    };\r\n    /**\r\n     * Adds and renders an error.\r\n     */\r\n    ValidationController.prototype.addError = function (message, object, propertyName) {\r\n        if (propertyName === void 0) { propertyName = null; }\r\n        var resolvedPropertyName;\r\n        if (propertyName === null) {\r\n            resolvedPropertyName = propertyName;\r\n        }\r\n        else {\r\n            resolvedPropertyName = this.propertyParser.parse(propertyName);\r\n        }\r\n        var result = new ValidateResult({ __manuallyAdded__: true }, object, resolvedPropertyName, false, message);\r\n        this.processResultDelta('validate', [], [result]);\r\n        return result;\r\n    };\r\n    /**\r\n     * Removes and unrenders an error.\r\n     */\r\n    ValidationController.prototype.removeError = function (result) {\r\n        if (this.results.indexOf(result) !== -1) {\r\n            this.processResultDelta('reset', [result], []);\r\n        }\r\n    };\r\n    /**\r\n     * Adds a renderer.\r\n     * @param renderer The renderer.\r\n     */\r\n    ValidationController.prototype.addRenderer = function (renderer) {\r\n        var _this = this;\r\n        this.renderers.push(renderer);\r\n        renderer.render({\r\n            kind: 'validate',\r\n            render: this.results.map(function (result) { return ({ result: result, elements: _this.elements.get(result) }); }),\r\n            unrender: []\r\n        });\r\n    };\r\n    /**\r\n     * Removes a renderer.\r\n     * @param renderer The renderer.\r\n     */\r\n    ValidationController.prototype.removeRenderer = function (renderer) {\r\n        var _this = this;\r\n        this.renderers.splice(this.renderers.indexOf(renderer), 1);\r\n        renderer.render({\r\n            kind: 'reset',\r\n            render: [],\r\n            unrender: this.results.map(function (result) { return ({ result: result, elements: _this.elements.get(result) }); })\r\n        });\r\n    };\r\n    /**\r\n     * Registers a binding with the controller.\r\n     * @param binding The binding instance.\r\n     * @param target The DOM element.\r\n     * @param rules (optional) rules associated with the binding. Validator implementation specific.\r\n     */\r\n    ValidationController.prototype.registerBinding = function (binding, target, rules) {\r\n        this.bindings.set(binding, { target: target, rules: rules, propertyInfo: null });\r\n    };\r\n    /**\r\n     * Unregisters a binding with the controller.\r\n     * @param binding The binding instance.\r\n     */\r\n    ValidationController.prototype.unregisterBinding = function (binding) {\r\n        this.resetBinding(binding);\r\n        this.bindings.delete(binding);\r\n    };\r\n    /**\r\n     * Interprets the instruction and returns a predicate that will identify\r\n     * relevant results in the list of rendered validation results.\r\n     */\r\n    ValidationController.prototype.getInstructionPredicate = function (instruction) {\r\n        var _this = this;\r\n        if (instruction) {\r\n            var object_1 = instruction.object, propertyName_1 = instruction.propertyName, rules_1 = instruction.rules;\r\n            var predicate_1;\r\n            if (instruction.propertyName) {\r\n                predicate_1 = function (x) { return x.object === object_1 && x.propertyName === propertyName_1; };\r\n            }\r\n            else {\r\n                predicate_1 = function (x) { return x.object === object_1; };\r\n            }\r\n            if (rules_1) {\r\n                return function (x) { return predicate_1(x) && _this.validator.ruleExists(rules_1, x.rule); };\r\n            }\r\n            return predicate_1;\r\n        }\r\n        else {\r\n            return function () { return true; };\r\n        }\r\n    };\r\n    /**\r\n     * Validates and renders results.\r\n     * @param instruction Optional. Instructions on what to validate. If undefined, all\r\n     * objects and bindings will be validated.\r\n     */\r\n    ValidationController.prototype.validate = function (instruction) {\r\n        var _this = this;\r\n        // Get a function that will process the validation instruction.\r\n        var execute;\r\n        if (instruction) {\r\n            // tslint:disable-next-line:prefer-const\r\n            var object_2 = instruction.object, propertyName_2 = instruction.propertyName, rules_2 = instruction.rules;\r\n            // if rules were not specified, check the object map.\r\n            rules_2 = rules_2 || this.objects.get(object_2);\r\n            // property specified?\r\n            if (instruction.propertyName === undefined) {\r\n                // validate the specified object.\r\n                execute = function () { return _this.validator.validateObject(object_2, rules_2); };\r\n            }\r\n            else {\r\n                // validate the specified property.\r\n                execute = function () { return _this.validator.validateProperty(object_2, propertyName_2, rules_2); };\r\n            }\r\n        }\r\n        else {\r\n            // validate all objects and bindings.\r\n            execute = function () {\r\n                var promises = [];\r\n                for (var _i = 0, _a = Array.from(_this.objects); _i < _a.length; _i++) {\r\n                    var _b = _a[_i], object = _b[0], rules = _b[1];\r\n                    promises.push(_this.validator.validateObject(object, rules));\r\n                }\r\n                for (var _c = 0, _d = Array.from(_this.bindings); _c < _d.length; _c++) {\r\n                    var _e = _d[_c], binding = _e[0], rules = _e[1].rules;\r\n                    var propertyInfo = getPropertyInfo(binding.sourceExpression, binding.source);\r\n                    if (!propertyInfo || _this.objects.has(propertyInfo.object)) {\r\n                        continue;\r\n                    }\r\n                    promises.push(_this.validator.validateProperty(propertyInfo.object, propertyInfo.propertyName, rules));\r\n                }\r\n                return Promise.all(promises).then(function (resultSets) { return resultSets.reduce(function (a, b) { return a.concat(b); }, []); });\r\n            };\r\n        }\r\n        // Wait for any existing validation to finish, execute the instruction, render the results.\r\n        this.validating = true;\r\n        var returnPromise = this.finishValidating\r\n            .then(execute)\r\n            .then(function (newResults) {\r\n            var predicate = _this.getInstructionPredicate(instruction);\r\n            var oldResults = _this.results.filter(predicate);\r\n            _this.processResultDelta('validate', oldResults, newResults);\r\n            if (returnPromise === _this.finishValidating) {\r\n                _this.validating = false;\r\n            }\r\n            var result = {\r\n                instruction: instruction,\r\n                valid: newResults.find(function (x) { return !x.valid; }) === undefined,\r\n                results: newResults\r\n            };\r\n            _this.invokeCallbacks(instruction, result);\r\n            return result;\r\n        })\r\n            .catch(function (exception) {\r\n            // recover, to enable subsequent calls to validate()\r\n            _this.validating = false;\r\n            _this.finishValidating = Promise.resolve();\r\n            return Promise.reject(exception);\r\n        });\r\n        this.finishValidating = returnPromise;\r\n        return returnPromise;\r\n    };\r\n    /**\r\n     * Resets any rendered validation results (unrenders).\r\n     * @param instruction Optional. Instructions on what to reset. If unspecified all rendered results\r\n     * will be unrendered.\r\n     */\r\n    ValidationController.prototype.reset = function (instruction) {\r\n        var predicate = this.getInstructionPredicate(instruction);\r\n        var oldResults = this.results.filter(predicate);\r\n        this.processResultDelta('reset', oldResults, []);\r\n        this.invokeCallbacks(instruction, null);\r\n    };\r\n    /**\r\n     * Gets the elements associated with an object and propertyName (if any).\r\n     */\r\n    ValidationController.prototype.getAssociatedElements = function (_a) {\r\n        var object = _a.object, propertyName = _a.propertyName;\r\n        var elements = [];\r\n        for (var _i = 0, _b = Array.from(this.bindings); _i < _b.length; _i++) {\r\n            var _c = _b[_i], binding = _c[0], target = _c[1].target;\r\n            var propertyInfo = getPropertyInfo(binding.sourceExpression, binding.source);\r\n            if (propertyInfo && propertyInfo.object === object && propertyInfo.propertyName === propertyName) {\r\n                elements.push(target);\r\n            }\r\n        }\r\n        return elements;\r\n    };\r\n    ValidationController.prototype.processResultDelta = function (kind, oldResults, newResults) {\r\n        // prepare the instruction.\r\n        var instruction = {\r\n            kind: kind,\r\n            render: [],\r\n            unrender: []\r\n        };\r\n        // create a shallow copy of newResults so we can mutate it without causing side-effects.\r\n        newResults = newResults.slice(0);\r\n        var _loop_1 = function (oldResult) {\r\n            // get the elements associated with the old result.\r\n            var elements = this_1.elements.get(oldResult);\r\n            // remove the old result from the element map.\r\n            this_1.elements.delete(oldResult);\r\n            // create the unrender instruction.\r\n            instruction.unrender.push({ result: oldResult, elements: elements });\r\n            // determine if there's a corresponding new result for the old result we are unrendering.\r\n            var newResultIndex = newResults.findIndex(function (x) { return x.rule === oldResult.rule && x.object === oldResult.object && x.propertyName === oldResult.propertyName; });\r\n            if (newResultIndex === -1) {\r\n                // no corresponding new result... simple remove.\r\n                this_1.results.splice(this_1.results.indexOf(oldResult), 1);\r\n                if (!oldResult.valid) {\r\n                    this_1.errors.splice(this_1.errors.indexOf(oldResult), 1);\r\n                }\r\n            }\r\n            else {\r\n                // there is a corresponding new result...\r\n                var newResult = newResults.splice(newResultIndex, 1)[0];\r\n                // get the elements that are associated with the new result.\r\n                var elements_1 = this_1.getAssociatedElements(newResult);\r\n                this_1.elements.set(newResult, elements_1);\r\n                // create a render instruction for the new result.\r\n                instruction.render.push({ result: newResult, elements: elements_1 });\r\n                // do an in-place replacement of the old result with the new result.\r\n                // this ensures any repeats bound to this.results will not thrash.\r\n                this_1.results.splice(this_1.results.indexOf(oldResult), 1, newResult);\r\n                if (!oldResult.valid && newResult.valid) {\r\n                    this_1.errors.splice(this_1.errors.indexOf(oldResult), 1);\r\n                }\r\n                else if (!oldResult.valid && !newResult.valid) {\r\n                    this_1.errors.splice(this_1.errors.indexOf(oldResult), 1, newResult);\r\n                }\r\n                else if (!newResult.valid) {\r\n                    this_1.errors.push(newResult);\r\n                }\r\n            }\r\n        };\r\n        var this_1 = this;\r\n        // create unrender instructions from the old results.\r\n        for (var _i = 0, oldResults_1 = oldResults; _i < oldResults_1.length; _i++) {\r\n            var oldResult = oldResults_1[_i];\r\n            _loop_1(oldResult);\r\n        }\r\n        // create render instructions from the remaining new results.\r\n        for (var _a = 0, newResults_1 = newResults; _a < newResults_1.length; _a++) {\r\n            var result = newResults_1[_a];\r\n            var elements = this.getAssociatedElements(result);\r\n            instruction.render.push({ result: result, elements: elements });\r\n            this.elements.set(result, elements);\r\n            this.results.push(result);\r\n            if (!result.valid) {\r\n                this.errors.push(result);\r\n            }\r\n        }\r\n        // render.\r\n        for (var _b = 0, _c = this.renderers; _b < _c.length; _b++) {\r\n            var renderer = _c[_b];\r\n            renderer.render(instruction);\r\n        }\r\n    };\r\n    /**\r\n     * Validates the property associated with a binding.\r\n     */\r\n    ValidationController.prototype.validateBinding = function (binding) {\r\n        if (!binding.isBound) {\r\n            return;\r\n        }\r\n        var propertyInfo = getPropertyInfo(binding.sourceExpression, binding.source);\r\n        var rules;\r\n        var registeredBinding = this.bindings.get(binding);\r\n        if (registeredBinding) {\r\n            rules = registeredBinding.rules;\r\n            registeredBinding.propertyInfo = propertyInfo;\r\n        }\r\n        if (!propertyInfo) {\r\n            return;\r\n        }\r\n        var object = propertyInfo.object, propertyName = propertyInfo.propertyName;\r\n        this.validate({ object: object, propertyName: propertyName, rules: rules });\r\n    };\r\n    /**\r\n     * Resets the results for a property associated with a binding.\r\n     */\r\n    ValidationController.prototype.resetBinding = function (binding) {\r\n        var registeredBinding = this.bindings.get(binding);\r\n        var propertyInfo = getPropertyInfo(binding.sourceExpression, binding.source);\r\n        if (!propertyInfo && registeredBinding) {\r\n            propertyInfo = registeredBinding.propertyInfo;\r\n        }\r\n        if (registeredBinding) {\r\n            registeredBinding.propertyInfo = null;\r\n        }\r\n        if (!propertyInfo) {\r\n            return;\r\n        }\r\n        var object = propertyInfo.object, propertyName = propertyInfo.propertyName;\r\n        this.reset({ object: object, propertyName: propertyName });\r\n    };\r\n    /**\r\n     * Changes the controller's validateTrigger.\r\n     * @param newTrigger The new validateTrigger\r\n     */\r\n    ValidationController.prototype.changeTrigger = function (newTrigger) {\r\n        this.validateTrigger = newTrigger;\r\n        var bindings = Array.from(this.bindings.keys());\r\n        for (var _i = 0, bindings_1 = bindings; _i < bindings_1.length; _i++) {\r\n            var binding = bindings_1[_i];\r\n            var source = binding.source;\r\n            binding.unbind();\r\n            binding.bind(source);\r\n        }\r\n    };\r\n    /**\r\n     * Revalidates the controller's current set of errors.\r\n     */\r\n    ValidationController.prototype.revalidateErrors = function () {\r\n        for (var _i = 0, _a = this.errors; _i < _a.length; _i++) {\r\n            var _b = _a[_i], object = _b.object, propertyName = _b.propertyName, rule = _b.rule;\r\n            if (rule.__manuallyAdded__) {\r\n                continue;\r\n            }\r\n            var rules = [[rule]];\r\n            this.validate({ object: object, propertyName: propertyName, rules: rules });\r\n        }\r\n    };\r\n    ValidationController.prototype.invokeCallbacks = function (instruction, result) {\r\n        if (this.eventCallbacks.length === 0) {\r\n            return;\r\n        }\r\n        var event = new ValidateEvent(result ? 'validate' : 'reset', this.errors, this.results, instruction || null, result);\r\n        for (var i = 0; i < this.eventCallbacks.length; i++) {\r\n            this.eventCallbacks[i](event);\r\n        }\r\n    };\r\n    ValidationController.inject = [Validator, PropertyAccessorParser, GlobalValidationConfiguration];\r\n    return ValidationController;\r\n}());\n\n// tslint:disable:no-bitwise\r\n/**\r\n * Binding behavior. Indicates the bound property should be validated.\r\n */\r\nvar ValidateBindingBehaviorBase = /** @class */ (function () {\r\n    function ValidateBindingBehaviorBase(taskQueue) {\r\n        this.taskQueue = taskQueue;\r\n    }\r\n    ValidateBindingBehaviorBase.prototype.bind = function (binding, source, rulesOrController, rules) {\r\n        var _this = this;\r\n        // identify the target element.\r\n        var target = getTargetDOMElement(binding, source);\r\n        // locate the controller.\r\n        var controller;\r\n        if (rulesOrController instanceof ValidationController) {\r\n            controller = rulesOrController;\r\n        }\r\n        else {\r\n            controller = source.container.get(aurelia_dependency_injection__WEBPACK_IMPORTED_MODULE_4__[\"Optional\"].of(ValidationController));\r\n            rules = rulesOrController;\r\n        }\r\n        if (controller === null) {\r\n            throw new Error(\"A ValidationController has not been registered.\");\r\n        }\r\n        controller.registerBinding(binding, target, rules);\r\n        binding.validationController = controller;\r\n        var trigger = this.getValidateTrigger(controller);\r\n        var event = (trigger & validateTrigger.blur) === validateTrigger.blur ? 'blur'\r\n            : (trigger & validateTrigger.focusout) === validateTrigger.focusout ? 'focusout'\r\n                : null;\r\n        var hasChangeTrigger = (trigger & validateTrigger.change) === validateTrigger.change;\r\n        binding.isDirty = !hasChangeTrigger;\r\n        // validatedOnce is used to control whether controller should validate upon user input\r\n        //\r\n        // always true when validation trigger doesn't include \"blur\" event (blur/focusout)\r\n        // else it will be set to true after (a) the first user input & loss of focus or (b) validation\r\n        binding.validatedOnce = hasChangeTrigger && event === null;\r\n        if (hasChangeTrigger) {\r\n            binding.vbbUpdateSource = binding.updateSource;\r\n            // tslint:disable-next-line:only-arrow-functions\r\n            // tslint:disable-next-line:space-before-function-paren\r\n            binding.updateSource = function (value) {\r\n                this.vbbUpdateSource(value);\r\n                this.isDirty = true;\r\n                if (this.validatedOnce) {\r\n                    this.validationController.validateBinding(this);\r\n                }\r\n            };\r\n        }\r\n        if (event !== null) {\r\n            binding.focusLossHandler = function () {\r\n                _this.taskQueue.queueMicroTask(function () {\r\n                    if (binding.isDirty) {\r\n                        controller.validateBinding(binding);\r\n                        binding.validatedOnce = true;\r\n                    }\r\n                });\r\n            };\r\n            binding.validationTriggerEvent = event;\r\n            binding.validateTarget = target;\r\n            target.addEventListener(event, binding.focusLossHandler);\r\n            if (hasChangeTrigger) {\r\n                var propertyName_1 = getPropertyInfo(binding.sourceExpression, binding.source).propertyName;\r\n                binding.validationSubscription = controller.subscribe(function (event) {\r\n                    if (!binding.validatedOnce && event.type === 'validate') {\r\n                        binding.validatedOnce = event.errors.findIndex(function (e) { return e.propertyName === propertyName_1; }) > -1;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        if (trigger !== validateTrigger.manual) {\r\n            binding.standardUpdateTarget = binding.updateTarget;\r\n            // tslint:disable-next-line:only-arrow-functions\r\n            // tslint:disable-next-line:space-before-function-paren\r\n            binding.updateTarget = function (value) {\r\n                this.standardUpdateTarget(value);\r\n                this.validationController.resetBinding(this);\r\n            };\r\n        }\r\n    };\r\n    ValidateBindingBehaviorBase.prototype.unbind = function (binding) {\r\n        // reset the binding to it's original state.\r\n        if (binding.vbbUpdateSource) {\r\n            binding.updateSource = binding.vbbUpdateSource;\r\n            binding.vbbUpdateSource = null;\r\n        }\r\n        if (binding.standardUpdateTarget) {\r\n            binding.updateTarget = binding.standardUpdateTarget;\r\n            binding.standardUpdateTarget = null;\r\n        }\r\n        if (binding.focusLossHandler) {\r\n            binding.validateTarget.removeEventListener(binding.validationTriggerEvent, binding.focusLossHandler);\r\n            binding.focusLossHandler = null;\r\n            binding.validateTarget = null;\r\n        }\r\n        if (binding.validationSubscription) {\r\n            binding.validationSubscription.dispose();\r\n            binding.validationSubscription = null;\r\n        }\r\n        binding.validationController.unregisterBinding(binding);\r\n        binding.validationController = null;\r\n        binding.isDirty = null;\r\n        binding.validatedOnce = null;\r\n    };\r\n    return ValidateBindingBehaviorBase;\r\n}());\n\n/**\r\n * Binding behavior. Indicates the bound property should be validated\r\n * when the validate trigger specified by the associated controller's\r\n * validateTrigger property occurs.\r\n */\r\nvar ValidateBindingBehavior = /** @class */ (function (_super) {\r\n    __extends(ValidateBindingBehavior, _super);\r\n    function ValidateBindingBehavior() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ValidateBindingBehavior.prototype.getValidateTrigger = function (controller) {\r\n        return controller.validateTrigger;\r\n    };\r\n    ValidateBindingBehavior.inject = [aurelia_task_queue__WEBPACK_IMPORTED_MODULE_5__[\"TaskQueue\"]];\r\n    ValidateBindingBehavior = __decorate([\r\n        Object(aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"bindingBehavior\"])('validate')\r\n    ], ValidateBindingBehavior);\r\n    return ValidateBindingBehavior;\r\n}(ValidateBindingBehaviorBase));\r\n/**\r\n * Binding behavior. Indicates the bound property will be validated\r\n * manually, by calling controller.validate(). No automatic validation\r\n * triggered by data-entry or blur will occur.\r\n */\r\nvar ValidateManuallyBindingBehavior = /** @class */ (function (_super) {\r\n    __extends(ValidateManuallyBindingBehavior, _super);\r\n    function ValidateManuallyBindingBehavior() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ValidateManuallyBindingBehavior.prototype.getValidateTrigger = function () {\r\n        return validateTrigger.manual;\r\n    };\r\n    ValidateManuallyBindingBehavior.inject = [aurelia_task_queue__WEBPACK_IMPORTED_MODULE_5__[\"TaskQueue\"]];\r\n    ValidateManuallyBindingBehavior = __decorate([\r\n        Object(aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"bindingBehavior\"])('validateManually')\r\n    ], ValidateManuallyBindingBehavior);\r\n    return ValidateManuallyBindingBehavior;\r\n}(ValidateBindingBehaviorBase));\r\n/**\r\n * Binding behavior. Indicates the bound property should be validated\r\n * when the associated element blurs.\r\n */\r\nvar ValidateOnBlurBindingBehavior = /** @class */ (function (_super) {\r\n    __extends(ValidateOnBlurBindingBehavior, _super);\r\n    function ValidateOnBlurBindingBehavior() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ValidateOnBlurBindingBehavior.prototype.getValidateTrigger = function () {\r\n        return validateTrigger.blur;\r\n    };\r\n    ValidateOnBlurBindingBehavior.inject = [aurelia_task_queue__WEBPACK_IMPORTED_MODULE_5__[\"TaskQueue\"]];\r\n    ValidateOnBlurBindingBehavior = __decorate([\r\n        Object(aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"bindingBehavior\"])('validateOnBlur')\r\n    ], ValidateOnBlurBindingBehavior);\r\n    return ValidateOnBlurBindingBehavior;\r\n}(ValidateBindingBehaviorBase));\r\n/**\r\n * Binding behavior. Indicates the bound property should be validated\r\n * when the associated element is changed by the user, causing a change\r\n * to the model.\r\n */\r\nvar ValidateOnChangeBindingBehavior = /** @class */ (function (_super) {\r\n    __extends(ValidateOnChangeBindingBehavior, _super);\r\n    function ValidateOnChangeBindingBehavior() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ValidateOnChangeBindingBehavior.prototype.getValidateTrigger = function () {\r\n        return validateTrigger.change;\r\n    };\r\n    ValidateOnChangeBindingBehavior.inject = [aurelia_task_queue__WEBPACK_IMPORTED_MODULE_5__[\"TaskQueue\"]];\r\n    ValidateOnChangeBindingBehavior = __decorate([\r\n        Object(aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"bindingBehavior\"])('validateOnChange')\r\n    ], ValidateOnChangeBindingBehavior);\r\n    return ValidateOnChangeBindingBehavior;\r\n}(ValidateBindingBehaviorBase));\r\n/**\r\n * Binding behavior. Indicates the bound property should be validated\r\n * when the associated element blurs or is changed by the user, causing\r\n * a change to the model.\r\n */\r\nvar ValidateOnChangeOrBlurBindingBehavior = /** @class */ (function (_super) {\r\n    __extends(ValidateOnChangeOrBlurBindingBehavior, _super);\r\n    function ValidateOnChangeOrBlurBindingBehavior() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ValidateOnChangeOrBlurBindingBehavior.prototype.getValidateTrigger = function () {\r\n        return validateTrigger.changeOrBlur;\r\n    };\r\n    ValidateOnChangeOrBlurBindingBehavior.inject = [aurelia_task_queue__WEBPACK_IMPORTED_MODULE_5__[\"TaskQueue\"]];\r\n    ValidateOnChangeOrBlurBindingBehavior = __decorate([\r\n        Object(aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"bindingBehavior\"])('validateOnChangeOrBlur')\r\n    ], ValidateOnChangeOrBlurBindingBehavior);\r\n    return ValidateOnChangeOrBlurBindingBehavior;\r\n}(ValidateBindingBehaviorBase));\r\nvar ValidateOnFocusoutBindingBehavior = /** @class */ (function (_super) {\r\n    __extends(ValidateOnFocusoutBindingBehavior, _super);\r\n    function ValidateOnFocusoutBindingBehavior() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ValidateOnFocusoutBindingBehavior.prototype.getValidateTrigger = function () {\r\n        return validateTrigger.focusout;\r\n    };\r\n    ValidateOnFocusoutBindingBehavior.inject = [aurelia_task_queue__WEBPACK_IMPORTED_MODULE_5__[\"TaskQueue\"]];\r\n    ValidateOnFocusoutBindingBehavior = __decorate([\r\n        Object(aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"bindingBehavior\"])('validateOnFocusout')\r\n    ], ValidateOnFocusoutBindingBehavior);\r\n    return ValidateOnFocusoutBindingBehavior;\r\n}(ValidateBindingBehaviorBase));\r\nvar ValidateOnChangeOrFocusoutBindingBehavior = /** @class */ (function (_super) {\r\n    __extends(ValidateOnChangeOrFocusoutBindingBehavior, _super);\r\n    function ValidateOnChangeOrFocusoutBindingBehavior() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ValidateOnChangeOrFocusoutBindingBehavior.prototype.getValidateTrigger = function () {\r\n        return validateTrigger.changeOrFocusout;\r\n    };\r\n    ValidateOnChangeOrFocusoutBindingBehavior.inject = [aurelia_task_queue__WEBPACK_IMPORTED_MODULE_5__[\"TaskQueue\"]];\r\n    ValidateOnChangeOrFocusoutBindingBehavior = __decorate([\r\n        Object(aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"bindingBehavior\"])('validateOnChangeOrFocusout')\r\n    ], ValidateOnChangeOrFocusoutBindingBehavior);\r\n    return ValidateOnChangeOrFocusoutBindingBehavior;\r\n}(ValidateBindingBehaviorBase));\n\n/**\r\n * Creates ValidationController instances.\r\n */\r\nvar ValidationControllerFactory = /** @class */ (function () {\r\n    function ValidationControllerFactory(container) {\r\n        this.container = container;\r\n    }\r\n    ValidationControllerFactory.get = function (container) {\r\n        return new ValidationControllerFactory(container);\r\n    };\r\n    /**\r\n     * Creates a new controller instance.\r\n     */\r\n    ValidationControllerFactory.prototype.create = function (validator) {\r\n        if (!validator) {\r\n            validator = this.container.get(Validator);\r\n        }\r\n        var propertyParser = this.container.get(PropertyAccessorParser);\r\n        var config = this.container.get(GlobalValidationConfiguration);\r\n        return new ValidationController(validator, propertyParser, config);\r\n    };\r\n    /**\r\n     * Creates a new controller and registers it in the current element's container so that it's\r\n     * available to the validate binding behavior and renderers.\r\n     */\r\n    ValidationControllerFactory.prototype.createForCurrentScope = function (validator) {\r\n        var controller = this.create(validator);\r\n        this.container.registerInstance(ValidationController, controller);\r\n        return controller;\r\n    };\r\n    return ValidationControllerFactory;\r\n}());\r\nValidationControllerFactory['protocol:aurelia:resolver'] = true;\n\nvar ValidationErrorsCustomAttribute = /** @class */ (function () {\r\n    function ValidationErrorsCustomAttribute(boundaryElement, controllerAccessor) {\r\n        this.boundaryElement = boundaryElement;\r\n        this.controllerAccessor = controllerAccessor;\r\n        this.controller = null;\r\n        this.errors = [];\r\n        this.errorsInternal = [];\r\n    }\r\n    ValidationErrorsCustomAttribute.inject = function () {\r\n        return [aurelia_pal__WEBPACK_IMPORTED_MODULE_3__[\"DOM\"].Element, aurelia_dependency_injection__WEBPACK_IMPORTED_MODULE_4__[\"Lazy\"].of(ValidationController)];\r\n    };\r\n    ValidationErrorsCustomAttribute.prototype.sort = function () {\r\n        this.errorsInternal.sort(function (a, b) {\r\n            if (a.targets[0] === b.targets[0]) {\r\n                return 0;\r\n            }\r\n            // tslint:disable-next-line:no-bitwise\r\n            return a.targets[0].compareDocumentPosition(b.targets[0]) & 2 ? 1 : -1;\r\n        });\r\n    };\r\n    ValidationErrorsCustomAttribute.prototype.interestingElements = function (elements) {\r\n        var _this = this;\r\n        return elements.filter(function (e) { return _this.boundaryElement.contains(e); });\r\n    };\r\n    ValidationErrorsCustomAttribute.prototype.render = function (instruction) {\r\n        var _loop_1 = function (result) {\r\n            var index = this_1.errorsInternal.findIndex(function (x) { return x.error === result; });\r\n            if (index !== -1) {\r\n                this_1.errorsInternal.splice(index, 1);\r\n            }\r\n        };\r\n        var this_1 = this;\r\n        for (var _i = 0, _a = instruction.unrender; _i < _a.length; _i++) {\r\n            var result = _a[_i].result;\r\n            _loop_1(result);\r\n        }\r\n        for (var _b = 0, _c = instruction.render; _b < _c.length; _b++) {\r\n            var _d = _c[_b], result = _d.result, elements = _d.elements;\r\n            if (result.valid) {\r\n                continue;\r\n            }\r\n            var targets = this.interestingElements(elements);\r\n            if (targets.length) {\r\n                this.errorsInternal.push({ error: result, targets: targets });\r\n            }\r\n        }\r\n        this.sort();\r\n        this.errors = this.errorsInternal;\r\n    };\r\n    ValidationErrorsCustomAttribute.prototype.bind = function () {\r\n        if (!this.controller) {\r\n            this.controller = this.controllerAccessor();\r\n        }\r\n        // this will call render() with the side-effect of updating this.errors\r\n        this.controller.addRenderer(this);\r\n    };\r\n    ValidationErrorsCustomAttribute.prototype.unbind = function () {\r\n        if (this.controller) {\r\n            this.controller.removeRenderer(this);\r\n        }\r\n    };\r\n    __decorate([\r\n        Object(aurelia_templating__WEBPACK_IMPORTED_MODULE_1__[\"bindable\"])({ defaultBindingMode: aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"bindingMode\"].oneWay })\r\n    ], ValidationErrorsCustomAttribute.prototype, \"controller\", void 0);\r\n    __decorate([\r\n        Object(aurelia_templating__WEBPACK_IMPORTED_MODULE_1__[\"bindable\"])({ primaryProperty: true, defaultBindingMode: aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"bindingMode\"].twoWay })\r\n    ], ValidationErrorsCustomAttribute.prototype, \"errors\", void 0);\r\n    ValidationErrorsCustomAttribute = __decorate([\r\n        Object(aurelia_templating__WEBPACK_IMPORTED_MODULE_1__[\"customAttribute\"])('validation-errors')\r\n    ], ValidationErrorsCustomAttribute);\r\n    return ValidationErrorsCustomAttribute;\r\n}());\n\nvar ValidationRendererCustomAttribute = /** @class */ (function () {\r\n    function ValidationRendererCustomAttribute() {\r\n    }\r\n    ValidationRendererCustomAttribute.prototype.created = function (view) {\r\n        this.container = view.container;\r\n    };\r\n    ValidationRendererCustomAttribute.prototype.bind = function () {\r\n        this.controller = this.container.get(ValidationController);\r\n        this.renderer = this.container.get(this.value);\r\n        this.controller.addRenderer(this.renderer);\r\n    };\r\n    ValidationRendererCustomAttribute.prototype.unbind = function () {\r\n        this.controller.removeRenderer(this.renderer);\r\n        this.controller = null;\r\n        this.renderer = null;\r\n    };\r\n    ValidationRendererCustomAttribute = __decorate([\r\n        Object(aurelia_templating__WEBPACK_IMPORTED_MODULE_1__[\"customAttribute\"])('validation-renderer')\r\n    ], ValidationRendererCustomAttribute);\r\n    return ValidationRendererCustomAttribute;\r\n}());\n\n/**\r\n * Part of the fluent rule API. Enables customizing property rules.\r\n */\r\nvar FluentRuleCustomizer = /** @class */ (function () {\r\n    function FluentRuleCustomizer(property, condition, config, fluentEnsure, fluentRules, parsers) {\r\n        if (config === void 0) { config = {}; }\r\n        this.fluentEnsure = fluentEnsure;\r\n        this.fluentRules = fluentRules;\r\n        this.parsers = parsers;\r\n        this.rule = {\r\n            property: property,\r\n            condition: condition,\r\n            config: config,\r\n            when: null,\r\n            messageKey: 'default',\r\n            message: null,\r\n            sequence: fluentRules.sequence\r\n        };\r\n        this.fluentEnsure._addRule(this.rule);\r\n    }\r\n    /**\r\n     * Validate subsequent rules after previously declared rules have\r\n     * been validated successfully. Use to postpone validation of costly\r\n     * rules until less expensive rules pass validation.\r\n     */\r\n    FluentRuleCustomizer.prototype.then = function () {\r\n        this.fluentRules.sequence++;\r\n        return this;\r\n    };\r\n    /**\r\n     * Specifies the key to use when looking up the rule's validation message.\r\n     */\r\n    FluentRuleCustomizer.prototype.withMessageKey = function (key) {\r\n        this.rule.messageKey = key;\r\n        this.rule.message = null;\r\n        return this;\r\n    };\r\n    /**\r\n     * Specifies rule's validation message.\r\n     */\r\n    FluentRuleCustomizer.prototype.withMessage = function (message) {\r\n        this.rule.messageKey = 'custom';\r\n        this.rule.message = this.parsers.message.parse(message);\r\n        return this;\r\n    };\r\n    /**\r\n     * Specifies a condition that must be met before attempting to validate the rule.\r\n     * @param condition A function that accepts the object as a parameter and returns true\r\n     * or false whether the rule should be evaluated.\r\n     */\r\n    FluentRuleCustomizer.prototype.when = function (condition) {\r\n        this.rule.when = condition;\r\n        return this;\r\n    };\r\n    /**\r\n     * Tags the rule instance, enabling the rule to be found easily\r\n     * using ValidationRules.taggedRules(rules, tag)\r\n     */\r\n    FluentRuleCustomizer.prototype.tag = function (tag) {\r\n        this.rule.tag = tag;\r\n        return this;\r\n    };\r\n    ///// FluentEnsure APIs /////\r\n    /**\r\n     * Target a property with validation rules.\r\n     * @param property The property to target. Can be the property name or a property accessor function.\r\n     */\r\n    FluentRuleCustomizer.prototype.ensure = function (subject) {\r\n        return this.fluentEnsure.ensure(subject);\r\n    };\r\n    /**\r\n     * Targets an object with validation rules.\r\n     */\r\n    FluentRuleCustomizer.prototype.ensureObject = function () {\r\n        return this.fluentEnsure.ensureObject();\r\n    };\r\n    Object.defineProperty(FluentRuleCustomizer.prototype, \"rules\", {\r\n        /**\r\n         * Rules that have been defined using the fluent API.\r\n         */\r\n        get: function () {\r\n            return this.fluentEnsure.rules;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Applies the rules to a class or object, making them discoverable by the StandardValidator.\r\n     * @param target A class or object.\r\n     */\r\n    FluentRuleCustomizer.prototype.on = function (target) {\r\n        return this.fluentEnsure.on(target);\r\n    };\r\n    ///////// FluentRules APIs /////////\r\n    /**\r\n     * Applies an ad-hoc rule function to the ensured property or object.\r\n     * @param condition The function to validate the rule.\r\n     * Will be called with two arguments, the property value and the object.\r\n     * Should return a boolean or a Promise that resolves to a boolean.\r\n     */\r\n    FluentRuleCustomizer.prototype.satisfies = function (condition, config) {\r\n        return this.fluentRules.satisfies(condition, config);\r\n    };\r\n    /**\r\n     * Applies a rule by name.\r\n     * @param name The name of the custom or standard rule.\r\n     * @param args The rule's arguments.\r\n     */\r\n    FluentRuleCustomizer.prototype.satisfiesRule = function (name) {\r\n        var _a;\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        return (_a = this.fluentRules).satisfiesRule.apply(_a, __spreadArrays([name], args));\r\n    };\r\n    /**\r\n     * Applies the \"required\" rule to the property.\r\n     * The value cannot be null, undefined or whitespace.\r\n     */\r\n    FluentRuleCustomizer.prototype.required = function () {\r\n        return this.fluentRules.required();\r\n    };\r\n    /**\r\n     * Applies the \"matches\" rule to the property.\r\n     * Value must match the specified regular expression.\r\n     * null, undefined and empty-string values are considered valid.\r\n     */\r\n    FluentRuleCustomizer.prototype.matches = function (regex) {\r\n        return this.fluentRules.matches(regex);\r\n    };\r\n    /**\r\n     * Applies the \"email\" rule to the property.\r\n     * null, undefined and empty-string values are considered valid.\r\n     */\r\n    FluentRuleCustomizer.prototype.email = function () {\r\n        return this.fluentRules.email();\r\n    };\r\n    /**\r\n     * Applies the \"minLength\" STRING validation rule to the property.\r\n     * null, undefined and empty-string values are considered valid.\r\n     */\r\n    FluentRuleCustomizer.prototype.minLength = function (length) {\r\n        return this.fluentRules.minLength(length);\r\n    };\r\n    /**\r\n     * Applies the \"maxLength\" STRING validation rule to the property.\r\n     * null, undefined and empty-string values are considered valid.\r\n     */\r\n    FluentRuleCustomizer.prototype.maxLength = function (length) {\r\n        return this.fluentRules.maxLength(length);\r\n    };\r\n    /**\r\n     * Applies the \"minItems\" ARRAY validation rule to the property.\r\n     * null and undefined values are considered valid.\r\n     */\r\n    FluentRuleCustomizer.prototype.minItems = function (count) {\r\n        return this.fluentRules.minItems(count);\r\n    };\r\n    /**\r\n     * Applies the \"maxItems\" ARRAY validation rule to the property.\r\n     * null and undefined values are considered valid.\r\n     */\r\n    FluentRuleCustomizer.prototype.maxItems = function (count) {\r\n        return this.fluentRules.maxItems(count);\r\n    };\r\n    /**\r\n     * Applies the \"min\" NUMBER validation rule to the property.\r\n     * Value must be greater than or equal to the specified constraint.\r\n     * null and undefined values are considered valid.\r\n     */\r\n    FluentRuleCustomizer.prototype.min = function (value) {\r\n        return this.fluentRules.min(value);\r\n    };\r\n    /**\r\n     * Applies the \"max\" NUMBER validation rule to the property.\r\n     * Value must be less than or equal to the specified constraint.\r\n     * null and undefined values are considered valid.\r\n     */\r\n    FluentRuleCustomizer.prototype.max = function (value) {\r\n        return this.fluentRules.max(value);\r\n    };\r\n    /**\r\n     * Applies the \"range\" NUMBER validation rule to the property.\r\n     * Value must be between or equal to the specified min and max.\r\n     * null and undefined values are considered valid.\r\n     */\r\n    FluentRuleCustomizer.prototype.range = function (min, max) {\r\n        return this.fluentRules.range(min, max);\r\n    };\r\n    /**\r\n     * Applies the \"between\" NUMBER validation rule to the property.\r\n     * Value must be between but not equal to the specified min and max.\r\n     * null and undefined values are considered valid.\r\n     */\r\n    FluentRuleCustomizer.prototype.between = function (min, max) {\r\n        return this.fluentRules.between(min, max);\r\n    };\r\n    /**\r\n     * Applies the \"equals\" validation rule to the property.\r\n     * null, undefined and empty-string values are considered valid.\r\n     */\r\n    FluentRuleCustomizer.prototype.equals = function (expectedValue) {\r\n        return this.fluentRules.equals(expectedValue);\r\n    };\r\n    return FluentRuleCustomizer;\r\n}());\r\n/**\r\n * Part of the fluent rule API. Enables applying rules to properties and objects.\r\n */\r\nvar FluentRules = /** @class */ (function () {\r\n    function FluentRules(fluentEnsure, parsers, property) {\r\n        this.fluentEnsure = fluentEnsure;\r\n        this.parsers = parsers;\r\n        this.property = property;\r\n        /**\r\n         * Current rule sequence number. Used to postpone evaluation of rules until rules\r\n         * with lower sequence number have successfully validated. The \"then\" fluent API method\r\n         * manages this property, there's usually no need to set it directly.\r\n         */\r\n        this.sequence = 0;\r\n    }\r\n    /**\r\n     * Sets the display name of the ensured property.\r\n     */\r\n    FluentRules.prototype.displayName = function (name) {\r\n        this.property.displayName = name;\r\n        return this;\r\n    };\r\n    /**\r\n     * Applies an ad-hoc rule function to the ensured property or object.\r\n     * @param condition The function to validate the rule.\r\n     * Will be called with two arguments, the property value and the object.\r\n     * Should return a boolean or a Promise that resolves to a boolean.\r\n     */\r\n    FluentRules.prototype.satisfies = function (condition, config) {\r\n        return new FluentRuleCustomizer(this.property, condition, config, this.fluentEnsure, this, this.parsers);\r\n    };\r\n    /**\r\n     * Applies a rule by name.\r\n     * @param name The name of the custom or standard rule.\r\n     * @param args The rule's arguments.\r\n     */\r\n    FluentRules.prototype.satisfiesRule = function (name) {\r\n        var _this = this;\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var rule = FluentRules.customRules[name];\r\n        if (!rule) {\r\n            // standard rule?\r\n            rule = this[name];\r\n            if (rule instanceof Function) {\r\n                return rule.call.apply(rule, __spreadArrays([this], args));\r\n            }\r\n            throw new Error(\"Rule with name \\\"\" + name + \"\\\" does not exist.\");\r\n        }\r\n        var config = rule.argsToConfig ? rule.argsToConfig.apply(rule, args) : undefined;\r\n        return this.satisfies(function (value, obj) {\r\n            var _a;\r\n            return (_a = rule.condition).call.apply(_a, __spreadArrays([_this, value, obj], args));\r\n        }, config)\r\n            .withMessageKey(name);\r\n    };\r\n    /**\r\n     * Applies the \"required\" rule to the property.\r\n     * The value cannot be null, undefined or whitespace.\r\n     */\r\n    FluentRules.prototype.required = function () {\r\n        return this.satisfies(function (value) {\r\n            return value !== null\r\n                && value !== undefined\r\n                && !(isString(value) && !/\\S/.test(value));\r\n        }).withMessageKey('required');\r\n    };\r\n    /**\r\n     * Applies the \"matches\" rule to the property.\r\n     * Value must match the specified regular expression.\r\n     * null, undefined and empty-string values are considered valid.\r\n     */\r\n    FluentRules.prototype.matches = function (regex) {\r\n        return this.satisfies(function (value) { return value === null || value === undefined || value.length === 0 || regex.test(value); })\r\n            .withMessageKey('matches');\r\n    };\r\n    /**\r\n     * Applies the \"email\" rule to the property.\r\n     * null, undefined and empty-string values are considered valid.\r\n     */\r\n    FluentRules.prototype.email = function () {\r\n        // regex from https://html.spec.whatwg.org/multipage/forms.html#valid-e-mail-address\r\n        /* tslint:disable:max-line-length */\r\n        return this.matches(/^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)\r\n            /* tslint:enable:max-line-length */\r\n            .withMessageKey('email');\r\n    };\r\n    /**\r\n     * Applies the \"minLength\" STRING validation rule to the property.\r\n     * null, undefined and empty-string values are considered valid.\r\n     */\r\n    FluentRules.prototype.minLength = function (length) {\r\n        return this.satisfies(function (value) { return value === null || value === undefined || value.length === 0 || value.length >= length; }, { length: length })\r\n            .withMessageKey('minLength');\r\n    };\r\n    /**\r\n     * Applies the \"maxLength\" STRING validation rule to the property.\r\n     * null, undefined and empty-string values are considered valid.\r\n     */\r\n    FluentRules.prototype.maxLength = function (length) {\r\n        return this.satisfies(function (value) { return value === null || value === undefined || value.length === 0 || value.length <= length; }, { length: length })\r\n            .withMessageKey('maxLength');\r\n    };\r\n    /**\r\n     * Applies the \"minItems\" ARRAY validation rule to the property.\r\n     * null and undefined values are considered valid.\r\n     */\r\n    FluentRules.prototype.minItems = function (count) {\r\n        return this.satisfies(function (value) { return value === null || value === undefined || value.length >= count; }, { count: count })\r\n            .withMessageKey('minItems');\r\n    };\r\n    /**\r\n     * Applies the \"maxItems\" ARRAY validation rule to the property.\r\n     * null and undefined values are considered valid.\r\n     */\r\n    FluentRules.prototype.maxItems = function (count) {\r\n        return this.satisfies(function (value) { return value === null || value === undefined || value.length <= count; }, { count: count })\r\n            .withMessageKey('maxItems');\r\n    };\r\n    /**\r\n     * Applies the \"min\" NUMBER validation rule to the property.\r\n     * Value must be greater than or equal to the specified constraint.\r\n     * null and undefined values are considered valid.\r\n     */\r\n    FluentRules.prototype.min = function (constraint) {\r\n        return this.satisfies(function (value) { return value === null || value === undefined || value >= constraint; }, { constraint: constraint })\r\n            .withMessageKey('min');\r\n    };\r\n    /**\r\n     * Applies the \"max\" NUMBER validation rule to the property.\r\n     * Value must be less than or equal to the specified constraint.\r\n     * null and undefined values are considered valid.\r\n     */\r\n    FluentRules.prototype.max = function (constraint) {\r\n        return this.satisfies(function (value) { return value === null || value === undefined || value <= constraint; }, { constraint: constraint })\r\n            .withMessageKey('max');\r\n    };\r\n    /**\r\n     * Applies the \"range\" NUMBER validation rule to the property.\r\n     * Value must be between or equal to the specified min and max.\r\n     * null and undefined values are considered valid.\r\n     */\r\n    FluentRules.prototype.range = function (min, max) {\r\n        return this.satisfies(function (value) { return value === null || value === undefined || (value >= min && value <= max); }, { min: min, max: max })\r\n            .withMessageKey('range');\r\n    };\r\n    /**\r\n     * Applies the \"between\" NUMBER validation rule to the property.\r\n     * Value must be between but not equal to the specified min and max.\r\n     * null and undefined values are considered valid.\r\n     */\r\n    FluentRules.prototype.between = function (min, max) {\r\n        return this.satisfies(function (value) { return value === null || value === undefined || (value > min && value < max); }, { min: min, max: max })\r\n            .withMessageKey('between');\r\n    };\r\n    /**\r\n     * Applies the \"equals\" validation rule to the property.\r\n     * null and undefined values are considered valid.\r\n     */\r\n    FluentRules.prototype.equals = function (expectedValue) {\r\n        return this.satisfies(function (value) { return value === null || value === undefined || value === '' || value === expectedValue; }, { expectedValue: expectedValue })\r\n            .withMessageKey('equals');\r\n    };\r\n    FluentRules.customRules = {};\r\n    return FluentRules;\r\n}());\r\n/**\r\n * Part of the fluent rule API. Enables targeting properties and objects with rules.\r\n */\r\nvar FluentEnsure = /** @class */ (function () {\r\n    function FluentEnsure(parsers) {\r\n        this.parsers = parsers;\r\n        /**\r\n         * Rules that have been defined using the fluent API.\r\n         */\r\n        this.rules = [];\r\n    }\r\n    /**\r\n     * Target a property with validation rules.\r\n     * @param property The property to target. Can be the property name or a property accessor\r\n     * function.\r\n     */\r\n    FluentEnsure.prototype.ensure = function (property) {\r\n        this.assertInitialized();\r\n        var name = this.parsers.property.parse(property);\r\n        var fluentRules = new FluentRules(this, this.parsers, { name: name, displayName: null });\r\n        return this.mergeRules(fluentRules, name);\r\n    };\r\n    /**\r\n     * Targets an object with validation rules.\r\n     */\r\n    FluentEnsure.prototype.ensureObject = function () {\r\n        this.assertInitialized();\r\n        var fluentRules = new FluentRules(this, this.parsers, { name: null, displayName: null });\r\n        return this.mergeRules(fluentRules, null);\r\n    };\r\n    /**\r\n     * Applies the rules to a class or object, making them discoverable by the StandardValidator.\r\n     * @param target A class or object.\r\n     */\r\n    FluentEnsure.prototype.on = function (target) {\r\n        Rules.set(target, this.rules);\r\n        return this;\r\n    };\r\n    /**\r\n     * Adds a rule definition to the sequenced ruleset.\r\n     * @internal\r\n     */\r\n    FluentEnsure.prototype._addRule = function (rule) {\r\n        while (this.rules.length < rule.sequence + 1) {\r\n            this.rules.push([]);\r\n        }\r\n        this.rules[rule.sequence].push(rule);\r\n    };\r\n    FluentEnsure.prototype.assertInitialized = function () {\r\n        if (this.parsers) {\r\n            return;\r\n        }\r\n        throw new Error(\"Did you forget to add \\\".plugin('aurelia-validation')\\\" to your main.js?\");\r\n    };\r\n    FluentEnsure.prototype.mergeRules = function (fluentRules, propertyName) {\r\n        // tslint:disable-next-line:triple-equals | Use loose equality for property keys\r\n        var existingRules = this.rules.find(function (r) { return r.length > 0 && r[0].property.name == propertyName; });\r\n        if (existingRules) {\r\n            var rule = existingRules[existingRules.length - 1];\r\n            fluentRules.sequence = rule.sequence;\r\n            if (rule.property.displayName !== null) {\r\n                fluentRules = fluentRules.displayName(rule.property.displayName);\r\n            }\r\n        }\r\n        return fluentRules;\r\n    };\r\n    return FluentEnsure;\r\n}());\r\n/**\r\n * Fluent rule definition API.\r\n */\r\nvar ValidationRules = /** @class */ (function () {\r\n    function ValidationRules() {\r\n    }\r\n    ValidationRules.initialize = function (messageParser, propertyParser) {\r\n        this.parsers = {\r\n            message: messageParser,\r\n            property: propertyParser\r\n        };\r\n    };\r\n    /**\r\n     * Target a property with validation rules.\r\n     * @param property The property to target. Can be the property name or a property accessor function.\r\n     */\r\n    ValidationRules.ensure = function (property) {\r\n        return new FluentEnsure(ValidationRules.parsers).ensure(property);\r\n    };\r\n    /**\r\n     * Targets an object with validation rules.\r\n     */\r\n    ValidationRules.ensureObject = function () {\r\n        return new FluentEnsure(ValidationRules.parsers).ensureObject();\r\n    };\r\n    /**\r\n     * Defines a custom rule.\r\n     * @param name The name of the custom rule. Also serves as the message key.\r\n     * @param condition The rule function.\r\n     * @param message The message expression\r\n     * @param argsToConfig A function that maps the rule's arguments to a \"config\"\r\n     * object that can be used when evaluating the message expression.\r\n     */\r\n    ValidationRules.customRule = function (name, condition, message, argsToConfig) {\r\n        validationMessages[name] = message;\r\n        FluentRules.customRules[name] = { condition: condition, argsToConfig: argsToConfig };\r\n    };\r\n    /**\r\n     * Returns rules with the matching tag.\r\n     * @param rules The rules to search.\r\n     * @param tag The tag to search for.\r\n     */\r\n    ValidationRules.taggedRules = function (rules, tag) {\r\n        return rules.map(function (x) { return x.filter(function (r) { return r.tag === tag; }); });\r\n    };\r\n    /**\r\n     * Returns rules that have no tag.\r\n     * @param rules The rules to search.\r\n     */\r\n    ValidationRules.untaggedRules = function (rules) {\r\n        return rules.map(function (x) { return x.filter(function (r) { return r.tag === undefined; }); });\r\n    };\r\n    /**\r\n     * Removes the rules from a class or object.\r\n     * @param target A class or object.\r\n     */\r\n    ValidationRules.off = function (target) {\r\n        Rules.unset(target);\r\n    };\r\n    return ValidationRules;\r\n}());\n\n// Exports\r\n/**\r\n * Configures the plugin.\r\n */\r\nfunction configure(\r\n// tslint:disable-next-line:ban-types\r\nframeworkConfig, callback) {\r\n    // the fluent rule definition API needs the parser to translate messages\r\n    // to interpolation expressions.\r\n    var messageParser = frameworkConfig.container.get(ValidationMessageParser);\r\n    var propertyParser = frameworkConfig.container.get(PropertyAccessorParser);\r\n    ValidationRules.initialize(messageParser, propertyParser);\r\n    // configure...\r\n    var config = new GlobalValidationConfiguration();\r\n    if (callback instanceof Function) {\r\n        callback(config);\r\n    }\r\n    config.apply(frameworkConfig.container);\r\n    // globalize the behaviors.\r\n    if (frameworkConfig.globalResources) {\r\n        frameworkConfig.globalResources(ValidateBindingBehavior, ValidateManuallyBindingBehavior, ValidateOnBlurBindingBehavior, ValidateOnFocusoutBindingBehavior, ValidateOnChangeBindingBehavior, ValidateOnChangeOrBlurBindingBehavior, ValidateOnChangeOrFocusoutBindingBehavior, ValidationErrorsCustomAttribute, ValidationRendererCustomAttribute);\r\n    }\r\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXVyZWxpYS12YWxpZGF0aW9uLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2F1cmVsaWEtdmFsaWRhdGlvbi9kaXN0L25hdGl2ZS1tb2R1bGVzL2F1cmVsaWEtdmFsaWRhdGlvbi5qcz9mMGQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExpdGVyYWxTdHJpbmcsIEJpbmFyeSwgQ29uZGl0aW9uYWwsIExpdGVyYWxQcmltaXRpdmUsIENhbGxNZW1iZXIsIEFjY2Vzc01lbWJlciwgQWNjZXNzU2NvcGUsIEFjY2Vzc0tleWVkLCBCaW5kaW5nQmVoYXZpb3IsIFZhbHVlQ29udmVydGVyLCBnZXRDb250ZXh0Rm9yLCBQYXJzZXIsIGJpbmRpbmdCZWhhdmlvciwgYmluZGluZ01vZGUgfSBmcm9tICdhdXJlbGlhLWJpbmRpbmcnO1xuaW1wb3J0IHsgQmluZGluZ0xhbmd1YWdlLCBWaWV3UmVzb3VyY2VzLCBjdXN0b21BdHRyaWJ1dGUsIGJpbmRhYmxlIH0gZnJvbSAnYXVyZWxpYS10ZW1wbGF0aW5nJztcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJ2F1cmVsaWEtbG9nZ2luZyc7XG5pbXBvcnQgeyBET00gfSBmcm9tICdhdXJlbGlhLXBhbCc7XG5pbXBvcnQgeyBPcHRpb25hbCwgTGF6eSB9IGZyb20gJ2F1cmVsaWEtZGVwZW5kZW5jeS1pbmplY3Rpb24nO1xuaW1wb3J0IHsgVGFza1F1ZXVlIH0gZnJvbSAnYXVyZWxpYS10YXNrLXF1ZXVlJztcblxuLyoqXHJcbiAqIFZhbGlkYXRlcyBvYmplY3RzIGFuZCBwcm9wZXJ0aWVzLlxyXG4gKi9cclxudmFyIFZhbGlkYXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFZhbGlkYXRvcigpIHtcclxuICAgIH1cclxuICAgIHJldHVybiBWYWxpZGF0b3I7XHJcbn0oKSk7XG5cbi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cblxuLyoqXHJcbiAqIFRoZSByZXN1bHQgb2YgdmFsaWRhdGluZyBhbiBpbmRpdmlkdWFsIHZhbGlkYXRpb24gcnVsZS5cclxuICovXHJcbnZhciBWYWxpZGF0ZVJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHJ1bGUgVGhlIHJ1bGUgYXNzb2NpYXRlZCB3aXRoIHRoZSByZXN1bHQuIFZhbGlkYXRvciBpbXBsZW1lbnRhdGlvbiBzcGVjaWZpYy5cclxuICAgICAqIEBwYXJhbSBvYmplY3QgVGhlIG9iamVjdCB0aGF0IHdhcyB2YWxpZGF0ZWQuXHJcbiAgICAgKiBAcGFyYW0gcHJvcGVydHlOYW1lIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0aGF0IHdhcyB2YWxpZGF0ZWQuXHJcbiAgICAgKiBAcGFyYW0gZXJyb3IgVGhlIGVycm9yLCBpZiB0aGUgcmVzdWx0IGlzIGEgdmFsaWRhdGlvbiBlcnJvci5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gVmFsaWRhdGVSZXN1bHQocnVsZSwgb2JqZWN0LCBwcm9wZXJ0eU5hbWUsIHZhbGlkLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gbnVsbDsgfVxyXG4gICAgICAgIHRoaXMucnVsZSA9IHJ1bGU7XHJcbiAgICAgICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XHJcbiAgICAgICAgdGhpcy5wcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWU7XHJcbiAgICAgICAgdGhpcy52YWxpZCA9IHZhbGlkO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgdGhpcy5pZCA9IFZhbGlkYXRlUmVzdWx0Lm5leHRJZCsrO1xyXG4gICAgfVxyXG4gICAgVmFsaWRhdGVSZXN1bHQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZhbGlkID8gJ1ZhbGlkLicgOiB0aGlzLm1lc3NhZ2U7XHJcbiAgICB9O1xyXG4gICAgVmFsaWRhdGVSZXN1bHQubmV4dElkID0gMDtcclxuICAgIHJldHVybiBWYWxpZGF0ZVJlc3VsdDtcclxufSgpKTtcblxuLyoqXHJcbiAqIFNldHMsIHVuc2V0cyBhbmQgcmV0cmlldmVzIHJ1bGVzIG9uIGFuIG9iamVjdCBvciBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cclxuICovXHJcbnZhciBSdWxlcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJ1bGVzKCkge1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaWVzIHRoZSBydWxlcyB0byBhIHRhcmdldC5cclxuICAgICAqL1xyXG4gICAgUnVsZXMuc2V0ID0gZnVuY3Rpb24gKHRhcmdldCwgcnVsZXMpIHtcclxuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnByb3RvdHlwZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgUnVsZXMua2V5LCB7IGVudW1lcmFibGU6IGZhbHNlLCBjb25maWd1cmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IHJ1bGVzIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBydWxlcyBmcm9tIGEgdGFyZ2V0LlxyXG4gICAgICovXHJcbiAgICBSdWxlcy51bnNldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnByb3RvdHlwZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFyZ2V0W1J1bGVzLmtleV0gPSBudWxsO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmVzIHRoZSB0YXJnZXQncyBydWxlcy5cclxuICAgICAqL1xyXG4gICAgUnVsZXMuZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIHJldHVybiB0YXJnZXRbUnVsZXMua2V5XSB8fCBudWxsO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRoYXQgc3RvcmVzIHRoZSBydWxlcy5cclxuICAgICAqL1xyXG4gICAgUnVsZXMua2V5ID0gJ19fcnVsZXNfXyc7XHJcbiAgICByZXR1cm4gUnVsZXM7XHJcbn0oKSk7XG5cbi8vIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5XHJcbnZhciBFeHByZXNzaW9uVmlzaXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEV4cHJlc3Npb25WaXNpdG9yKCkge1xyXG4gICAgfVxyXG4gICAgRXhwcmVzc2lvblZpc2l0b3IucHJvdG90eXBlLnZpc2l0Q2hhaW4gPSBmdW5jdGlvbiAoY2hhaW4pIHtcclxuICAgICAgICB0aGlzLnZpc2l0QXJncyhjaGFpbi5leHByZXNzaW9ucyk7XHJcbiAgICB9O1xyXG4gICAgRXhwcmVzc2lvblZpc2l0b3IucHJvdG90eXBlLnZpc2l0QmluZGluZ0JlaGF2aW9yID0gZnVuY3Rpb24gKGJlaGF2aW9yKSB7XHJcbiAgICAgICAgYmVoYXZpb3IuZXhwcmVzc2lvbi5hY2NlcHQodGhpcyk7XHJcbiAgICAgICAgdGhpcy52aXNpdEFyZ3MoYmVoYXZpb3IuYXJncyk7XHJcbiAgICB9O1xyXG4gICAgRXhwcmVzc2lvblZpc2l0b3IucHJvdG90eXBlLnZpc2l0VmFsdWVDb252ZXJ0ZXIgPSBmdW5jdGlvbiAoY29udmVydGVyKSB7XHJcbiAgICAgICAgY29udmVydGVyLmV4cHJlc3Npb24uYWNjZXB0KHRoaXMpO1xyXG4gICAgICAgIHRoaXMudmlzaXRBcmdzKGNvbnZlcnRlci5hcmdzKTtcclxuICAgIH07XHJcbiAgICBFeHByZXNzaW9uVmlzaXRvci5wcm90b3R5cGUudmlzaXRBc3NpZ24gPSBmdW5jdGlvbiAoYXNzaWduKSB7XHJcbiAgICAgICAgYXNzaWduLnRhcmdldC5hY2NlcHQodGhpcyk7XHJcbiAgICAgICAgYXNzaWduLnZhbHVlLmFjY2VwdCh0aGlzKTtcclxuICAgIH07XHJcbiAgICBFeHByZXNzaW9uVmlzaXRvci5wcm90b3R5cGUudmlzaXRDb25kaXRpb25hbCA9IGZ1bmN0aW9uIChjb25kaXRpb25hbCkge1xyXG4gICAgICAgIGNvbmRpdGlvbmFsLmNvbmRpdGlvbi5hY2NlcHQodGhpcyk7XHJcbiAgICAgICAgY29uZGl0aW9uYWwueWVzLmFjY2VwdCh0aGlzKTtcclxuICAgICAgICBjb25kaXRpb25hbC5uby5hY2NlcHQodGhpcyk7XHJcbiAgICB9O1xyXG4gICAgRXhwcmVzc2lvblZpc2l0b3IucHJvdG90eXBlLnZpc2l0QWNjZXNzVGhpcyA9IGZ1bmN0aW9uIChhY2Nlc3MpIHtcclxuICAgICAgICBhY2Nlc3MuYW5jZXN0b3IgPSBhY2Nlc3MuYW5jZXN0b3I7XHJcbiAgICB9O1xyXG4gICAgRXhwcmVzc2lvblZpc2l0b3IucHJvdG90eXBlLnZpc2l0QWNjZXNzU2NvcGUgPSBmdW5jdGlvbiAoYWNjZXNzKSB7XHJcbiAgICAgICAgYWNjZXNzLm5hbWUgPSBhY2Nlc3MubmFtZTtcclxuICAgIH07XHJcbiAgICBFeHByZXNzaW9uVmlzaXRvci5wcm90b3R5cGUudmlzaXRBY2Nlc3NNZW1iZXIgPSBmdW5jdGlvbiAoYWNjZXNzKSB7XHJcbiAgICAgICAgYWNjZXNzLm9iamVjdC5hY2NlcHQodGhpcyk7XHJcbiAgICB9O1xyXG4gICAgRXhwcmVzc2lvblZpc2l0b3IucHJvdG90eXBlLnZpc2l0QWNjZXNzS2V5ZWQgPSBmdW5jdGlvbiAoYWNjZXNzKSB7XHJcbiAgICAgICAgYWNjZXNzLm9iamVjdC5hY2NlcHQodGhpcyk7XHJcbiAgICAgICAgYWNjZXNzLmtleS5hY2NlcHQodGhpcyk7XHJcbiAgICB9O1xyXG4gICAgRXhwcmVzc2lvblZpc2l0b3IucHJvdG90eXBlLnZpc2l0Q2FsbFNjb3BlID0gZnVuY3Rpb24gKGNhbGwpIHtcclxuICAgICAgICB0aGlzLnZpc2l0QXJncyhjYWxsLmFyZ3MpO1xyXG4gICAgfTtcclxuICAgIEV4cHJlc3Npb25WaXNpdG9yLnByb3RvdHlwZS52aXNpdENhbGxGdW5jdGlvbiA9IGZ1bmN0aW9uIChjYWxsKSB7XHJcbiAgICAgICAgY2FsbC5mdW5jLmFjY2VwdCh0aGlzKTtcclxuICAgICAgICB0aGlzLnZpc2l0QXJncyhjYWxsLmFyZ3MpO1xyXG4gICAgfTtcclxuICAgIEV4cHJlc3Npb25WaXNpdG9yLnByb3RvdHlwZS52aXNpdENhbGxNZW1iZXIgPSBmdW5jdGlvbiAoY2FsbCkge1xyXG4gICAgICAgIGNhbGwub2JqZWN0LmFjY2VwdCh0aGlzKTtcclxuICAgICAgICB0aGlzLnZpc2l0QXJncyhjYWxsLmFyZ3MpO1xyXG4gICAgfTtcclxuICAgIEV4cHJlc3Npb25WaXNpdG9yLnByb3RvdHlwZS52aXNpdFByZWZpeCA9IGZ1bmN0aW9uIChwcmVmaXgpIHtcclxuICAgICAgICBwcmVmaXguZXhwcmVzc2lvbi5hY2NlcHQodGhpcyk7XHJcbiAgICB9O1xyXG4gICAgRXhwcmVzc2lvblZpc2l0b3IucHJvdG90eXBlLnZpc2l0QmluYXJ5ID0gZnVuY3Rpb24gKGJpbmFyeSkge1xyXG4gICAgICAgIGJpbmFyeS5sZWZ0LmFjY2VwdCh0aGlzKTtcclxuICAgICAgICBiaW5hcnkucmlnaHQuYWNjZXB0KHRoaXMpO1xyXG4gICAgfTtcclxuICAgIEV4cHJlc3Npb25WaXNpdG9yLnByb3RvdHlwZS52aXNpdExpdGVyYWxQcmltaXRpdmUgPSBmdW5jdGlvbiAobGl0ZXJhbCkge1xyXG4gICAgICAgIGxpdGVyYWwudmFsdWUgPSBsaXRlcmFsLnZhbHVlO1xyXG4gICAgfTtcclxuICAgIEV4cHJlc3Npb25WaXNpdG9yLnByb3RvdHlwZS52aXNpdExpdGVyYWxBcnJheSA9IGZ1bmN0aW9uIChsaXRlcmFsKSB7XHJcbiAgICAgICAgdGhpcy52aXNpdEFyZ3MobGl0ZXJhbC5lbGVtZW50cyk7XHJcbiAgICB9O1xyXG4gICAgRXhwcmVzc2lvblZpc2l0b3IucHJvdG90eXBlLnZpc2l0TGl0ZXJhbE9iamVjdCA9IGZ1bmN0aW9uIChsaXRlcmFsKSB7XHJcbiAgICAgICAgdGhpcy52aXNpdEFyZ3MobGl0ZXJhbC52YWx1ZXMpO1xyXG4gICAgfTtcclxuICAgIEV4cHJlc3Npb25WaXNpdG9yLnByb3RvdHlwZS52aXNpdExpdGVyYWxTdHJpbmcgPSBmdW5jdGlvbiAobGl0ZXJhbCkge1xyXG4gICAgICAgIGxpdGVyYWwudmFsdWUgPSBsaXRlcmFsLnZhbHVlO1xyXG4gICAgfTtcclxuICAgIEV4cHJlc3Npb25WaXNpdG9yLnByb3RvdHlwZS52aXNpdEFyZ3MgPSBmdW5jdGlvbiAoYXJncykge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBhcmdzW2ldLmFjY2VwdCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEV4cHJlc3Npb25WaXNpdG9yO1xyXG59KCkpO1xuXG52YXIgVmFsaWRhdGlvbk1lc3NhZ2VQYXJzZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBWYWxpZGF0aW9uTWVzc2FnZVBhcnNlcihiaW5kaW5xTGFuZ3VhZ2UpIHtcclxuICAgICAgICB0aGlzLmJpbmRpbnFMYW5ndWFnZSA9IGJpbmRpbnFMYW5ndWFnZTtcclxuICAgICAgICB0aGlzLmVtcHR5U3RyaW5nRXhwcmVzc2lvbiA9IG5ldyBMaXRlcmFsU3RyaW5nKCcnKTtcclxuICAgICAgICB0aGlzLm51bGxFeHByZXNzaW9uID0gbmV3IExpdGVyYWxQcmltaXRpdmUobnVsbCk7XHJcbiAgICAgICAgdGhpcy51bmRlZmluZWRFeHByZXNzaW9uID0gbmV3IExpdGVyYWxQcmltaXRpdmUodW5kZWZpbmVkKTtcclxuICAgICAgICB0aGlzLmNhY2hlID0ge307XHJcbiAgICB9XHJcbiAgICBWYWxpZGF0aW9uTWVzc2FnZVBhcnNlci5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmNhY2hlW21lc3NhZ2VdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVbbWVzc2FnZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwYXJ0cyA9IHRoaXMuYmluZGlucUxhbmd1YWdlLnBhcnNlSW50ZXJwb2xhdGlvbihudWxsLCBtZXNzYWdlKTtcclxuICAgICAgICBpZiAocGFydHMgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXRlcmFsU3RyaW5nKG1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZXhwcmVzc2lvbiA9IG5ldyBMaXRlcmFsU3RyaW5nKHBhcnRzWzBdKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHBhcnRzLmxlbmd0aDsgaSArPSAyKSB7XHJcbiAgICAgICAgICAgIGV4cHJlc3Npb24gPSBuZXcgQmluYXJ5KCcrJywgZXhwcmVzc2lvbiwgbmV3IEJpbmFyeSgnKycsIHRoaXMuY29hbGVzY2UocGFydHNbaV0pLCBuZXcgTGl0ZXJhbFN0cmluZyhwYXJ0c1tpICsgMV0pKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIE1lc3NhZ2VFeHByZXNzaW9uVmFsaWRhdG9yLnZhbGlkYXRlKGV4cHJlc3Npb24sIG1lc3NhZ2UpO1xyXG4gICAgICAgIHRoaXMuY2FjaGVbbWVzc2FnZV0gPSBleHByZXNzaW9uO1xyXG4gICAgICAgIHJldHVybiBleHByZXNzaW9uO1xyXG4gICAgfTtcclxuICAgIFZhbGlkYXRpb25NZXNzYWdlUGFyc2VyLnByb3RvdHlwZS5jb2FsZXNjZSA9IGZ1bmN0aW9uIChwYXJ0KSB7XHJcbiAgICAgICAgLy8gcGFydCA9PT0gbnVsbCB8fCBwYXJ0ID09PSB1bmRlZmluZWQgPyAnJyA6IHBhcnRcclxuICAgICAgICByZXR1cm4gbmV3IENvbmRpdGlvbmFsKG5ldyBCaW5hcnkoJ3x8JywgbmV3IEJpbmFyeSgnPT09JywgcGFydCwgdGhpcy5udWxsRXhwcmVzc2lvbiksIG5ldyBCaW5hcnkoJz09PScsIHBhcnQsIHRoaXMudW5kZWZpbmVkRXhwcmVzc2lvbikpLCB0aGlzLmVtcHR5U3RyaW5nRXhwcmVzc2lvbiwgbmV3IENhbGxNZW1iZXIocGFydCwgJ3RvU3RyaW5nJywgW10pKTtcclxuICAgIH07XHJcbiAgICBWYWxpZGF0aW9uTWVzc2FnZVBhcnNlci5pbmplY3QgPSBbQmluZGluZ0xhbmd1YWdlXTtcclxuICAgIHJldHVybiBWYWxpZGF0aW9uTWVzc2FnZVBhcnNlcjtcclxufSgpKTtcclxudmFyIE1lc3NhZ2VFeHByZXNzaW9uVmFsaWRhdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKE1lc3NhZ2VFeHByZXNzaW9uVmFsaWRhdG9yLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gTWVzc2FnZUV4cHJlc3Npb25WYWxpZGF0b3Iob3JpZ2luYWxNZXNzYWdlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5vcmlnaW5hbE1lc3NhZ2UgPSBvcmlnaW5hbE1lc3NhZ2U7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgTWVzc2FnZUV4cHJlc3Npb25WYWxpZGF0b3IudmFsaWRhdGUgPSBmdW5jdGlvbiAoZXhwcmVzc2lvbiwgb3JpZ2luYWxNZXNzYWdlKSB7XHJcbiAgICAgICAgdmFyIHZpc2l0b3IgPSBuZXcgTWVzc2FnZUV4cHJlc3Npb25WYWxpZGF0b3Iob3JpZ2luYWxNZXNzYWdlKTtcclxuICAgICAgICBleHByZXNzaW9uLmFjY2VwdCh2aXNpdG9yKTtcclxuICAgIH07XHJcbiAgICBNZXNzYWdlRXhwcmVzc2lvblZhbGlkYXRvci5wcm90b3R5cGUudmlzaXRBY2Nlc3NTY29wZSA9IGZ1bmN0aW9uIChhY2Nlc3MpIHtcclxuICAgICAgICBpZiAoYWNjZXNzLmFuY2VzdG9yICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignJHBhcmVudCBpcyBub3QgcGVybWl0dGVkIGluIHZhbGlkYXRpb24gbWVzc2FnZSBleHByZXNzaW9ucy4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFsnZGlzcGxheU5hbWUnLCAncHJvcGVydHlOYW1lJywgJ3ZhbHVlJywgJ29iamVjdCcsICdjb25maWcnLCAnZ2V0RGlzcGxheU5hbWUnXS5pbmRleE9mKGFjY2Vzcy5uYW1lKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgZ2V0TG9nZ2VyKCdhdXJlbGlhLXZhbGlkYXRpb24nKVxyXG4gICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxyXG4gICAgICAgICAgICAgICAgLndhcm4oXCJEaWQgeW91IG1lYW4gdG8gdXNlIFxcXCIkXCIgKyBhY2Nlc3MubmFtZSArIFwiXFxcIiBpbnN0ZWFkIG9mIFxcXCJcIiArIGFjY2Vzcy5uYW1lICsgXCJcXFwiIGluIHRoaXMgdmFsaWRhdGlvbiBtZXNzYWdlIHRlbXBsYXRlOiBcXFwiXCIgKyB0aGlzLm9yaWdpbmFsTWVzc2FnZSArIFwiXFxcIj9cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBNZXNzYWdlRXhwcmVzc2lvblZhbGlkYXRvcjtcclxufShFeHByZXNzaW9uVmlzaXRvcikpO1xuXG4vKipcclxuICogRGljdGlvbmFyeSBvZiB2YWxpZGF0aW9uIG1lc3NhZ2VzLiBbbWVzc2FnZUtleV06IG1lc3NhZ2VFeHByZXNzaW9uXHJcbiAqL1xyXG52YXIgdmFsaWRhdGlvbk1lc3NhZ2VzID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZGVmYXVsdCB2YWxpZGF0aW9uIG1lc3NhZ2UuIFVzZWQgd2l0aCBydWxlcyB0aGF0IGhhdmUgbm8gc3RhbmRhcmQgbWVzc2FnZS5cclxuICAgICAqL1xyXG4gICAgZGVmYXVsdDogXCIkeyRkaXNwbGF5TmFtZX0gaXMgaW52YWxpZC5cIixcclxuICAgIHJlcXVpcmVkOiBcIiR7JGRpc3BsYXlOYW1lfSBpcyByZXF1aXJlZC5cIixcclxuICAgIG1hdGNoZXM6IFwiJHskZGlzcGxheU5hbWV9IGlzIG5vdCBjb3JyZWN0bHkgZm9ybWF0dGVkLlwiLFxyXG4gICAgZW1haWw6IFwiJHskZGlzcGxheU5hbWV9IGlzIG5vdCBhIHZhbGlkIGVtYWlsLlwiLFxyXG4gICAgbWluTGVuZ3RoOiBcIiR7JGRpc3BsYXlOYW1lfSBtdXN0IGJlIGF0IGxlYXN0ICR7JGNvbmZpZy5sZW5ndGh9IGNoYXJhY3RlciR7JGNvbmZpZy5sZW5ndGggPT09IDEgPyAnJyA6ICdzJ30uXCIsXHJcbiAgICBtYXhMZW5ndGg6IFwiJHskZGlzcGxheU5hbWV9IGNhbm5vdCBiZSBsb25nZXIgdGhhbiAkeyRjb25maWcubGVuZ3RofSBjaGFyYWN0ZXIkeyRjb25maWcubGVuZ3RoID09PSAxID8gJycgOiAncyd9LlwiLFxyXG4gICAgbWluSXRlbXM6IFwiJHskZGlzcGxheU5hbWV9IG11c3QgY29udGFpbiBhdCBsZWFzdCAkeyRjb25maWcuY291bnR9IGl0ZW0keyRjb25maWcuY291bnQgPT09IDEgPyAnJyA6ICdzJ30uXCIsXHJcbiAgICBtYXhJdGVtczogXCIkeyRkaXNwbGF5TmFtZX0gY2Fubm90IGNvbnRhaW4gbW9yZSB0aGFuICR7JGNvbmZpZy5jb3VudH0gaXRlbSR7JGNvbmZpZy5jb3VudCA9PT0gMSA/ICcnIDogJ3MnfS5cIixcclxuICAgIG1pbjogXCIkeyRkaXNwbGF5TmFtZX0gbXVzdCBiZSBhdCBsZWFzdCAkeyRjb25maWcuY29uc3RyYWludH0uXCIsXHJcbiAgICBtYXg6IFwiJHskZGlzcGxheU5hbWV9IG11c3QgYmUgYXQgbW9zdCAkeyRjb25maWcuY29uc3RyYWludH0uXCIsXHJcbiAgICByYW5nZTogXCIkeyRkaXNwbGF5TmFtZX0gbXVzdCBiZSBiZXR3ZWVuIG9yIGVxdWFsIHRvICR7JGNvbmZpZy5taW59IGFuZCAkeyRjb25maWcubWF4fS5cIixcclxuICAgIGJldHdlZW46IFwiJHskZGlzcGxheU5hbWV9IG11c3QgYmUgYmV0d2VlbiBidXQgbm90IGVxdWFsIHRvICR7JGNvbmZpZy5taW59IGFuZCAkeyRjb25maWcubWF4fS5cIixcclxuICAgIGVxdWFsczogXCIkeyRkaXNwbGF5TmFtZX0gbXVzdCBiZSAkeyRjb25maWcuZXhwZWN0ZWRWYWx1ZX0uXCIsXHJcbn07XHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgdmFsaWRhdGlvbiBtZXNzYWdlcyBhbmQgcHJvcGVydHkgZGlzcGxheSBuYW1lcy5cclxuICovXHJcbnZhciBWYWxpZGF0aW9uTWVzc2FnZVByb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVmFsaWRhdGlvbk1lc3NhZ2VQcm92aWRlcihwYXJzZXIpIHtcclxuICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIG1lc3NhZ2UgYmluZGluZyBleHByZXNzaW9uIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIGtleS5cclxuICAgICAqIEBwYXJhbSBrZXkgVGhlIG1lc3NhZ2Uga2V5LlxyXG4gICAgICovXHJcbiAgICBWYWxpZGF0aW9uTWVzc2FnZVByb3ZpZGVyLnByb3RvdHlwZS5nZXRNZXNzYWdlID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlO1xyXG4gICAgICAgIGlmIChrZXkgaW4gdmFsaWRhdGlvbk1lc3NhZ2VzKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSB2YWxpZGF0aW9uTWVzc2FnZXNba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSB2YWxpZGF0aW9uTWVzc2FnZXNbJ2RlZmF1bHQnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VyLnBhcnNlKG1lc3NhZ2UpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRm9ybXVsYXRlcyBhIHByb3BlcnR5IGRpc3BsYXkgbmFtZSB1c2luZyB0aGUgcHJvcGVydHkgbmFtZSBhbmQgdGhlIGNvbmZpZ3VyZWRcclxuICAgICAqIGRpc3BsYXlOYW1lIChpZiBwcm92aWRlZCkuXHJcbiAgICAgKiBPdmVycmlkZSB0aGlzIHdpdGggeW91ciBvd24gY3VzdG9tIGxvZ2ljLlxyXG4gICAgICogQHBhcmFtIHByb3BlcnR5TmFtZSBUaGUgcHJvcGVydHkgbmFtZS5cclxuICAgICAqL1xyXG4gICAgVmFsaWRhdGlvbk1lc3NhZ2VQcm92aWRlci5wcm90b3R5cGUuZ2V0RGlzcGxheU5hbWUgPSBmdW5jdGlvbiAocHJvcGVydHlOYW1lLCBkaXNwbGF5TmFtZSkge1xyXG4gICAgICAgIGlmIChkaXNwbGF5TmFtZSAhPT0gbnVsbCAmJiBkaXNwbGF5TmFtZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoZGlzcGxheU5hbWUgaW5zdGFuY2VvZiBGdW5jdGlvbikgPyBkaXNwbGF5TmFtZSgpIDogZGlzcGxheU5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHNwbGl0IG9uIHVwcGVyLWNhc2UgbGV0dGVycy5cclxuICAgICAgICB2YXIgd29yZHMgPSBwcm9wZXJ0eU5hbWUudG9TdHJpbmcoKS5zcGxpdCgvKD89W0EtWl0pLykuam9pbignICcpO1xyXG4gICAgICAgIC8vIGNhcGl0YWxpemUgZmlyc3QgbGV0dGVyLlxyXG4gICAgICAgIHJldHVybiB3b3Jkcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmRzLnNsaWNlKDEpO1xyXG4gICAgfTtcclxuICAgIFZhbGlkYXRpb25NZXNzYWdlUHJvdmlkZXIuaW5qZWN0ID0gW1ZhbGlkYXRpb25NZXNzYWdlUGFyc2VyXTtcclxuICAgIHJldHVybiBWYWxpZGF0aW9uTWVzc2FnZVByb3ZpZGVyO1xyXG59KCkpO1xuXG4vKipcclxuICogVmFsaWRhdGVzLlxyXG4gKiBSZXNwb25zaWJsZSBmb3IgdmFsaWRhdGluZyBvYmplY3RzIGFuZCBwcm9wZXJ0aWVzLlxyXG4gKi9cclxudmFyIFN0YW5kYXJkVmFsaWRhdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFN0YW5kYXJkVmFsaWRhdG9yLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU3RhbmRhcmRWYWxpZGF0b3IobWVzc2FnZVByb3ZpZGVyLCByZXNvdXJjZXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLm1lc3NhZ2VQcm92aWRlciA9IG1lc3NhZ2VQcm92aWRlcjtcclxuICAgICAgICBfdGhpcy5sb29rdXBGdW5jdGlvbnMgPSByZXNvdXJjZXMubG9va3VwRnVuY3Rpb25zO1xyXG4gICAgICAgIF90aGlzLmdldERpc3BsYXlOYW1lID0gbWVzc2FnZVByb3ZpZGVyLmdldERpc3BsYXlOYW1lLmJpbmQobWVzc2FnZVByb3ZpZGVyKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFZhbGlkYXRlcyB0aGUgc3BlY2lmaWVkIHByb3BlcnR5LlxyXG4gICAgICogQHBhcmFtIG9iamVjdCBUaGUgb2JqZWN0IHRvIHZhbGlkYXRlLlxyXG4gICAgICogQHBhcmFtIHByb3BlcnR5TmFtZSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gdmFsaWRhdGUuXHJcbiAgICAgKiBAcGFyYW0gcnVsZXMgT3B0aW9uYWwuIElmIHVuc3BlY2lmaWVkLCB0aGUgcnVsZXMgd2lsbCBiZSBsb29rZWQgdXAgdXNpbmcgdGhlIG1ldGFkYXRhXHJcbiAgICAgKiBmb3IgdGhlIG9iamVjdCBjcmVhdGVkIGJ5IFZhbGlkYXRpb25SdWxlcy4uLi5vbihjbGFzcy9vYmplY3QpXHJcbiAgICAgKi9cclxuICAgIFN0YW5kYXJkVmFsaWRhdG9yLnByb3RvdHlwZS52YWxpZGF0ZVByb3BlcnR5ID0gZnVuY3Rpb24gKG9iamVjdCwgcHJvcGVydHlOYW1lLCBydWxlcykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRlKG9iamVjdCwgcHJvcGVydHlOYW1lLCBydWxlcyB8fCBudWxsKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFZhbGlkYXRlcyBhbGwgcnVsZXMgZm9yIHNwZWNpZmllZCBvYmplY3QgYW5kIGl0J3MgcHJvcGVydGllcy5cclxuICAgICAqIEBwYXJhbSBvYmplY3QgVGhlIG9iamVjdCB0byB2YWxpZGF0ZS5cclxuICAgICAqIEBwYXJhbSBydWxlcyBPcHRpb25hbC4gSWYgdW5zcGVjaWZpZWQsIHRoZSBydWxlcyB3aWxsIGJlIGxvb2tlZCB1cCB1c2luZyB0aGUgbWV0YWRhdGFcclxuICAgICAqIGZvciB0aGUgb2JqZWN0IGNyZWF0ZWQgYnkgVmFsaWRhdGlvblJ1bGVzLi4uLm9uKGNsYXNzL29iamVjdClcclxuICAgICAqL1xyXG4gICAgU3RhbmRhcmRWYWxpZGF0b3IucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0ID0gZnVuY3Rpb24gKG9iamVjdCwgcnVsZXMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52YWxpZGF0ZShvYmplY3QsIG51bGwsIHJ1bGVzIHx8IG51bGwpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIGEgcnVsZSBleGlzdHMgaW4gYSBzZXQgb2YgcnVsZXMuXHJcbiAgICAgKiBAcGFyYW0gcnVsZXMgVGhlIHJ1bGVzIHRvIHNlYXJjaC5cclxuICAgICAqIEBwYXJlbSBydWxlIFRoZSBydWxlIHRvIGZpbmQuXHJcbiAgICAgKi9cclxuICAgIFN0YW5kYXJkVmFsaWRhdG9yLnByb3RvdHlwZS5ydWxlRXhpc3RzID0gZnVuY3Rpb24gKHJ1bGVzLCBydWxlKSB7XHJcbiAgICAgICAgdmFyIGkgPSBydWxlcy5sZW5ndGg7XHJcbiAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgICBpZiAocnVsZXNbaV0uaW5kZXhPZihydWxlKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBTdGFuZGFyZFZhbGlkYXRvci5wcm90b3R5cGUuZ2V0TWVzc2FnZSA9IGZ1bmN0aW9uIChydWxlLCBvYmplY3QsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGV4cHJlc3Npb24gPSBydWxlLm1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlUHJvdmlkZXIuZ2V0TWVzc2FnZShydWxlLm1lc3NhZ2VLZXkpO1xyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItY29uc3RcclxuICAgICAgICB2YXIgX2EgPSBydWxlLnByb3BlcnR5LCBwcm9wZXJ0eU5hbWUgPSBfYS5uYW1lLCBkaXNwbGF5TmFtZSA9IF9hLmRpc3BsYXlOYW1lO1xyXG4gICAgICAgIGlmIChwcm9wZXJ0eU5hbWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgPSB0aGlzLm1lc3NhZ2VQcm92aWRlci5nZXREaXNwbGF5TmFtZShwcm9wZXJ0eU5hbWUsIGRpc3BsYXlOYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG92ZXJyaWRlQ29udGV4dCA9IHtcclxuICAgICAgICAgICAgJGRpc3BsYXlOYW1lOiBkaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgJHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lLFxyXG4gICAgICAgICAgICAkdmFsdWU6IHZhbHVlLFxyXG4gICAgICAgICAgICAkb2JqZWN0OiBvYmplY3QsXHJcbiAgICAgICAgICAgICRjb25maWc6IHJ1bGUuY29uZmlnLFxyXG4gICAgICAgICAgICAvLyByZXR1cm5zIHRoZSBuYW1lIG9mIGEgZ2l2ZW4gcHJvcGVydHksIGdpdmVuIGp1c3QgdGhlIHByb3BlcnR5IG5hbWUgKGlycmVzcGVjdGl2ZSBvZiB0aGUgcHJvcGVydHkncyBkaXNwbGF5TmFtZSlcclxuICAgICAgICAgICAgLy8gc3BsaXQgb24gY2FwaXRhbCBsZXR0ZXJzLCBmaXJzdCBsZXR0ZXIgZW5zdXJlZCB0byBiZSBjYXBpdGFsaXplZFxyXG4gICAgICAgICAgICAkZ2V0RGlzcGxheU5hbWU6IHRoaXMuZ2V0RGlzcGxheU5hbWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBleHByZXNzaW9uLmV2YWx1YXRlKHsgYmluZGluZ0NvbnRleHQ6IG9iamVjdCwgb3ZlcnJpZGVDb250ZXh0OiBvdmVycmlkZUNvbnRleHQgfSwgdGhpcy5sb29rdXBGdW5jdGlvbnMpO1xyXG4gICAgfTtcclxuICAgIFN0YW5kYXJkVmFsaWRhdG9yLnByb3RvdHlwZS52YWxpZGF0ZVJ1bGVTZXF1ZW5jZSA9IGZ1bmN0aW9uIChvYmplY3QsIHByb3BlcnR5TmFtZSwgcnVsZVNlcXVlbmNlLCBzZXF1ZW5jZSwgcmVzdWx0cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gYXJlIHdlIHZhbGlkYXRpbmcgYWxsIHByb3BlcnRpZXMgb3IgYSBzaW5nbGUgcHJvcGVydHk/XHJcbiAgICAgICAgdmFyIHZhbGlkYXRlQWxsUHJvcGVydGllcyA9IHByb3BlcnR5TmFtZSA9PT0gbnVsbCB8fCBwcm9wZXJ0eU5hbWUgPT09IHVuZGVmaW5lZDtcclxuICAgICAgICB2YXIgcnVsZXMgPSBydWxlU2VxdWVuY2Vbc2VxdWVuY2VdO1xyXG4gICAgICAgIHZhciBhbGxWYWxpZCA9IHRydWU7XHJcbiAgICAgICAgLy8gdmFsaWRhdGUgZWFjaCBydWxlLlxyXG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICAgICAgdmFyIHJ1bGUgPSBydWxlc1tpXTtcclxuICAgICAgICAgICAgLy8gaXMgdGhlIHJ1bGUgcmVsYXRlZCB0byB0aGUgcHJvcGVydHkgd2UncmUgdmFsaWRhdGluZy5cclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnRyaXBsZS1lcXVhbHMgfCBVc2UgbG9vc2UgZXF1YWxpdHkgZm9yIHByb3BlcnR5IGtleXNcclxuICAgICAgICAgICAgaWYgKCF2YWxpZGF0ZUFsbFByb3BlcnRpZXMgJiYgcnVsZS5wcm9wZXJ0eS5uYW1lICE9IHByb3BlcnR5TmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpcyB0aGlzIGEgY29uZGl0aW9uYWwgcnVsZT8gaXMgdGhlIGNvbmRpdGlvbiBtZXQ/XHJcbiAgICAgICAgICAgIGlmIChydWxlLndoZW4gJiYgIXJ1bGUud2hlbihvYmplY3QpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHZhbGlkYXRlLlxyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBydWxlLnByb3BlcnR5Lm5hbWUgPT09IG51bGwgPyBvYmplY3QgOiBvYmplY3RbcnVsZS5wcm9wZXJ0eS5uYW1lXTtcclxuICAgICAgICAgICAgdmFyIHByb21pc2VPckJvb2xlYW4gPSBydWxlLmNvbmRpdGlvbih2YWx1ZSwgb2JqZWN0KTtcclxuICAgICAgICAgICAgaWYgKCEocHJvbWlzZU9yQm9vbGVhbiBpbnN0YW5jZW9mIFByb21pc2UpKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlT3JCb29sZWFuID0gUHJvbWlzZS5yZXNvbHZlKHByb21pc2VPckJvb2xlYW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2gocHJvbWlzZU9yQm9vbGVhbi50aGVuKGZ1bmN0aW9uICh2YWxpZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB2YWxpZCA/IG51bGwgOiBfdGhpcy5nZXRNZXNzYWdlKHJ1bGUsIG9iamVjdCwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBWYWxpZGF0ZVJlc3VsdChydWxlLCBvYmplY3QsIHJ1bGUucHJvcGVydHkubmFtZSwgdmFsaWQsIG1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgICAgIGFsbFZhbGlkID0gYWxsVmFsaWQgJiYgdmFsaWQ7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWQ7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgX2xvb3BfMShpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlcXVlbmNlKys7XHJcbiAgICAgICAgICAgIGlmIChhbGxWYWxpZCAmJiBzZXF1ZW5jZSA8IHJ1bGVTZXF1ZW5jZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy52YWxpZGF0ZVJ1bGVTZXF1ZW5jZShvYmplY3QsIHByb3BlcnR5TmFtZSwgcnVsZVNlcXVlbmNlLCBzZXF1ZW5jZSwgcmVzdWx0cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU3RhbmRhcmRWYWxpZGF0b3IucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gKG9iamVjdCwgcHJvcGVydHlOYW1lLCBydWxlcykge1xyXG4gICAgICAgIC8vIHJ1bGVzIHNwZWNpZmllZD9cclxuICAgICAgICBpZiAoIXJ1bGVzKSB7XHJcbiAgICAgICAgICAgIC8vIG5vLiBhdHRlbXB0IHRvIGxvY2F0ZSB0aGUgcnVsZXMuXHJcbiAgICAgICAgICAgIHJ1bGVzID0gUnVsZXMuZ2V0KG9iamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGFueSBydWxlcz9cclxuICAgICAgICBpZiAoIXJ1bGVzIHx8IHJ1bGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsaWRhdGVSdWxlU2VxdWVuY2Uob2JqZWN0LCBwcm9wZXJ0eU5hbWUsIHJ1bGVzLCAwLCBbXSk7XHJcbiAgICB9O1xyXG4gICAgU3RhbmRhcmRWYWxpZGF0b3IuaW5qZWN0ID0gW1ZhbGlkYXRpb25NZXNzYWdlUHJvdmlkZXIsIFZpZXdSZXNvdXJjZXNdO1xyXG4gICAgcmV0dXJuIFN0YW5kYXJkVmFsaWRhdG9yO1xyXG59KFZhbGlkYXRvcikpO1xuXG4vKipcclxuICogVmFsaWRhdGlvbiB0cmlnZ2Vycy5cclxuICovXHJcbnZhciB2YWxpZGF0ZVRyaWdnZXI7XHJcbihmdW5jdGlvbiAodmFsaWRhdGVUcmlnZ2VyKSB7XHJcbiAgICAvKipcclxuICAgICAqIE1hbnVhbCB2YWxpZGF0aW9uLiAgVXNlIHRoZSBjb250cm9sbGVyJ3MgYHZhbGlkYXRlKClgIGFuZCAgYHJlc2V0KClgIG1ldGhvZHNcclxuICAgICAqIHRvIHZhbGlkYXRlIGFsbCBiaW5kaW5ncy5cclxuICAgICAqL1xyXG4gICAgdmFsaWRhdGVUcmlnZ2VyW3ZhbGlkYXRlVHJpZ2dlcltcIm1hbnVhbFwiXSA9IDBdID0gXCJtYW51YWxcIjtcclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGUgdGhlIGJpbmRpbmcgd2hlbiB0aGUgYmluZGluZydzIHRhcmdldCBlbGVtZW50IGZpcmVzIGEgRE9NIFwiYmx1clwiIGV2ZW50LlxyXG4gICAgICovXHJcbiAgICB2YWxpZGF0ZVRyaWdnZXJbdmFsaWRhdGVUcmlnZ2VyW1wiYmx1clwiXSA9IDFdID0gXCJibHVyXCI7XHJcbiAgICAvKipcclxuICAgICAqIFZhbGlkYXRlIHRoZSBiaW5kaW5nIHdoZW4gaXQgdXBkYXRlcyB0aGUgbW9kZWwgZHVlIHRvIGEgY2hhbmdlIGluIHRoZSB2aWV3LlxyXG4gICAgICovXHJcbiAgICB2YWxpZGF0ZVRyaWdnZXJbdmFsaWRhdGVUcmlnZ2VyW1wiY2hhbmdlXCJdID0gMl0gPSBcImNoYW5nZVwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBWYWxpZGF0ZSB0aGUgYmluZGluZyB3aGVuIHRoZSBiaW5kaW5nJ3MgdGFyZ2V0IGVsZW1lbnQgZmlyZXMgYSBET00gXCJibHVyXCIgZXZlbnQgYW5kXHJcbiAgICAgKiB3aGVuIGl0IHVwZGF0ZXMgdGhlIG1vZGVsIGR1ZSB0byBhIGNoYW5nZSBpbiB0aGUgdmlldy5cclxuICAgICAqL1xyXG4gICAgdmFsaWRhdGVUcmlnZ2VyW3ZhbGlkYXRlVHJpZ2dlcltcImNoYW5nZU9yQmx1clwiXSA9IDNdID0gXCJjaGFuZ2VPckJsdXJcIjtcclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGUgdGhlIGJpbmRpbmcgd2hlbiB0aGUgYmluZGluZydzIHRhcmdldCBlbGVtZW50IGZpcmVzIGEgRE9NIFwiZm9jdXNvdXRcIiBldmVudC5cclxuICAgICAqIFVubGlrZSBcImJsdXJcIiwgdGhpcyBldmVudCBidWJibGVzLlxyXG4gICAgICovXHJcbiAgICB2YWxpZGF0ZVRyaWdnZXJbdmFsaWRhdGVUcmlnZ2VyW1wiZm9jdXNvdXRcIl0gPSA0XSA9IFwiZm9jdXNvdXRcIjtcclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGUgdGhlIGJpbmRpbmcgd2hlbiB0aGUgYmluZGluZydzIHRhcmdldCBlbGVtZW50IGZpcmVzIGEgRE9NIFwiZm9jdXNvdXRcIiBldmVudCBvclxyXG4gICAgICogd2hlbiBpdCB1cGRhdGVzIHRoZSBtb2RlbCBkdWUgdG8gYSBjaGFuZ2UgaW4gdGhlIHZpZXcuXHJcbiAgICAgKi9cclxuICAgIHZhbGlkYXRlVHJpZ2dlclt2YWxpZGF0ZVRyaWdnZXJbXCJjaGFuZ2VPckZvY3Vzb3V0XCJdID0gNl0gPSBcImNoYW5nZU9yRm9jdXNvdXRcIjtcclxufSkodmFsaWRhdGVUcmlnZ2VyIHx8ICh2YWxpZGF0ZVRyaWdnZXIgPSB7fSkpO1xuXG4vKipcclxuICogQXVyZWxpYSBWYWxpZGF0aW9uIENvbmZpZ3VyYXRpb24gQVBJXHJcbiAqL1xyXG52YXIgR2xvYmFsVmFsaWRhdGlvbkNvbmZpZ3VyYXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBHbG9iYWxWYWxpZGF0aW9uQ29uZmlndXJhdGlvbigpIHtcclxuICAgICAgICB0aGlzLnZhbGlkYXRvclR5cGUgPSBTdGFuZGFyZFZhbGlkYXRvcjtcclxuICAgICAgICB0aGlzLnZhbGlkYXRpb25UcmlnZ2VyID0gR2xvYmFsVmFsaWRhdGlvbkNvbmZpZ3VyYXRpb24uREVGQVVMVF9WQUxJREFUSU9OX1RSSUdHRVI7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZSBhIGN1c3RvbSBWYWxpZGF0b3IgaW1wbGVtZW50YXRpb24uXHJcbiAgICAgKi9cclxuICAgIEdsb2JhbFZhbGlkYXRpb25Db25maWd1cmF0aW9uLnByb3RvdHlwZS5jdXN0b21WYWxpZGF0b3IgPSBmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgICAgIHRoaXMudmFsaWRhdG9yVHlwZSA9IHR5cGU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgR2xvYmFsVmFsaWRhdGlvbkNvbmZpZ3VyYXRpb24ucHJvdG90eXBlLmRlZmF1bHRWYWxpZGF0aW9uVHJpZ2dlciA9IGZ1bmN0aW9uICh0cmlnZ2VyKSB7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0aW9uVHJpZ2dlciA9IHRyaWdnZXI7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgR2xvYmFsVmFsaWRhdGlvbkNvbmZpZ3VyYXRpb24ucHJvdG90eXBlLmdldERlZmF1bHRWYWxpZGF0aW9uVHJpZ2dlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52YWxpZGF0aW9uVHJpZ2dlcjtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgdGhlIGNvbmZpZ3VyYXRpb24uXHJcbiAgICAgKi9cclxuICAgIEdsb2JhbFZhbGlkYXRpb25Db25maWd1cmF0aW9uLnByb3RvdHlwZS5hcHBseSA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcclxuICAgICAgICB2YXIgdmFsaWRhdG9yID0gY29udGFpbmVyLmdldCh0aGlzLnZhbGlkYXRvclR5cGUpO1xyXG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3Rlckluc3RhbmNlKFZhbGlkYXRvciwgdmFsaWRhdG9yKTtcclxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXJJbnN0YW5jZShHbG9iYWxWYWxpZGF0aW9uQ29uZmlndXJhdGlvbiwgdGhpcyk7XHJcbiAgICB9O1xyXG4gICAgR2xvYmFsVmFsaWRhdGlvbkNvbmZpZ3VyYXRpb24uREVGQVVMVF9WQUxJREFUSU9OX1RSSUdHRVIgPSB2YWxpZGF0ZVRyaWdnZXIuYmx1cjtcclxuICAgIHJldHVybiBHbG9iYWxWYWxpZGF0aW9uQ29uZmlndXJhdGlvbjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEdldHMgdGhlIERPTSBlbGVtZW50IGFzc29jaWF0ZWQgd2l0aCB0aGUgZGF0YS1iaW5kaW5nLiBNb3N0IG9mIHRoZSB0aW1lIGl0J3NcclxuICogdGhlIGJpbmRpbmcudGFyZ2V0IGJ1dCBzb21ldGltZXMgYmluZGluZy50YXJnZXQgaXMgYW4gYXVyZWxpYSBjdXN0b20gZWxlbWVudCxcclxuICogb3IgY3VzdG9tIGF0dHJpYnV0ZSB3aGljaCBpcyBhIGphdmFzY3JpcHQgXCJjbGFzc1wiIGluc3RhbmNlLCBzbyB3ZSBuZWVkIHRvIHVzZVxyXG4gKiB0aGUgY29udHJvbGxlcidzIGNvbnRhaW5lciB0byByZXRyaWV2ZSB0aGUgYWN0dWFsIERPTSBlbGVtZW50LlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VGFyZ2V0RE9NRWxlbWVudChiaW5kaW5nLCB2aWV3KSB7XHJcbiAgICB2YXIgdGFyZ2V0ID0gYmluZGluZy50YXJnZXQ7XHJcbiAgICAvLyBET00gZWxlbWVudFxyXG4gICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xyXG4gICAgfVxyXG4gICAgLy8gY3VzdG9tIGVsZW1lbnQgb3IgY3VzdG9tIGF0dHJpYnV0ZVxyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnByZWZlci1jb25zdFxyXG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdmlldy5jb250cm9sbGVycy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSB2aWV3LmNvbnRyb2xsZXJzW2ldO1xyXG4gICAgICAgIGlmIChjb250cm9sbGVyLnZpZXdNb2RlbCA9PT0gdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gY29udHJvbGxlci5jb250YWluZXIuZ2V0KERPTS5FbGVtZW50KTtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBsb2NhdGUgdGFyZ2V0IGVsZW1lbnQgZm9yIFxcXCJcIiArIGJpbmRpbmcuc291cmNlRXhwcmVzc2lvbiArIFwiXFxcIi5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGxvY2F0ZSB0YXJnZXQgZWxlbWVudCBmb3IgXFxcIlwiICsgYmluZGluZy5zb3VyY2VFeHByZXNzaW9uICsgXCJcXFwiLlwiKTtcclxufVxuXG5mdW5jdGlvbiBnZXRPYmplY3QoZXhwcmVzc2lvbiwgb2JqZWN0RXhwcmVzc2lvbiwgc291cmNlKSB7XHJcbiAgICB2YXIgdmFsdWUgPSBvYmplY3RFeHByZXNzaW9uLmV2YWx1YXRlKHNvdXJjZSwgbnVsbCk7XHJcbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSBpbnN0YW5jZW9mIE9iamVjdCkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcclxuICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSAnXCIgKyBvYmplY3RFeHByZXNzaW9uICsgXCInIHBhcnQgb2YgJ1wiICsgZXhwcmVzc2lvbiArIFwiJyBldmFsdWF0ZXMgdG8gXCIgKyB2YWx1ZSArIFwiIGluc3RlYWQgb2YgYW4gb2JqZWN0LCBudWxsIG9yIHVuZGVmaW5lZC5cIik7XHJcbn1cclxuLyoqXHJcbiAqIFJldHJpZXZlcyB0aGUgb2JqZWN0IGFuZCBwcm9wZXJ0eSBuYW1lIGZvciB0aGUgc3BlY2lmaWVkIGV4cHJlc3Npb24uXHJcbiAqIEBwYXJhbSBleHByZXNzaW9uIFRoZSBleHByZXNzaW9uXHJcbiAqIEBwYXJhbSBzb3VyY2UgVGhlIHNjb3BlXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRQcm9wZXJ0eUluZm8oZXhwcmVzc2lvbiwgc291cmNlKSB7XHJcbiAgICB2YXIgb3JpZ2luYWxFeHByZXNzaW9uID0gZXhwcmVzc2lvbjtcclxuICAgIHdoaWxlIChleHByZXNzaW9uIGluc3RhbmNlb2YgQmluZGluZ0JlaGF2aW9yIHx8IGV4cHJlc3Npb24gaW5zdGFuY2VvZiBWYWx1ZUNvbnZlcnRlcikge1xyXG4gICAgICAgIGV4cHJlc3Npb24gPSBleHByZXNzaW9uLmV4cHJlc3Npb247XHJcbiAgICB9XHJcbiAgICB2YXIgb2JqZWN0O1xyXG4gICAgdmFyIHByb3BlcnR5TmFtZTtcclxuICAgIGlmIChleHByZXNzaW9uIGluc3RhbmNlb2YgQWNjZXNzU2NvcGUpIHtcclxuICAgICAgICBvYmplY3QgPSBnZXRDb250ZXh0Rm9yKGV4cHJlc3Npb24ubmFtZSwgc291cmNlLCBleHByZXNzaW9uLmFuY2VzdG9yKTtcclxuICAgICAgICBwcm9wZXJ0eU5hbWUgPSBleHByZXNzaW9uLm5hbWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChleHByZXNzaW9uIGluc3RhbmNlb2YgQWNjZXNzTWVtYmVyKSB7XHJcbiAgICAgICAgb2JqZWN0ID0gZ2V0T2JqZWN0KG9yaWdpbmFsRXhwcmVzc2lvbiwgZXhwcmVzc2lvbi5vYmplY3QsIHNvdXJjZSk7XHJcbiAgICAgICAgcHJvcGVydHlOYW1lID0gZXhwcmVzc2lvbi5uYW1lO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZXhwcmVzc2lvbiBpbnN0YW5jZW9mIEFjY2Vzc0tleWVkKSB7XHJcbiAgICAgICAgb2JqZWN0ID0gZ2V0T2JqZWN0KG9yaWdpbmFsRXhwcmVzc2lvbiwgZXhwcmVzc2lvbi5vYmplY3QsIHNvdXJjZSk7XHJcbiAgICAgICAgcHJvcGVydHlOYW1lID0gZXhwcmVzc2lvbi5rZXkuZXZhbHVhdGUoc291cmNlKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4cHJlc3Npb24gJ1wiICsgb3JpZ2luYWxFeHByZXNzaW9uICsgXCInIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIHZhbGlkYXRlIGJpbmRpbmctYmVoYXZpb3IuXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHsgb2JqZWN0OiBvYmplY3QsIHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lIH07XHJcbn1cblxuZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtcclxuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBTdHJpbmddJztcclxufVxyXG5mdW5jdGlvbiBpc051bWJlcih2YWx1ZSkge1xyXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IE51bWJlcl0nO1xyXG59XG5cbnZhciBQcm9wZXJ0eUFjY2Vzc29yUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUHJvcGVydHlBY2Nlc3NvclBhcnNlcihwYXJzZXIpIHtcclxuICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcclxuICAgIH1cclxuICAgIFByb3BlcnR5QWNjZXNzb3JQYXJzZXIucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKHByb3BlcnR5KSB7XHJcbiAgICAgICAgaWYgKGlzU3RyaW5nKHByb3BlcnR5KSB8fCBpc051bWJlcihwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHByb3BlcnR5O1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYWNjZXNzb3JUZXh0ID0gZ2V0QWNjZXNzb3JFeHByZXNzaW9uKHByb3BlcnR5LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHZhciBhY2Nlc3NvciA9IHRoaXMucGFyc2VyLnBhcnNlKGFjY2Vzc29yVGV4dCk7XHJcbiAgICAgICAgaWYgKGFjY2Vzc29yIGluc3RhbmNlb2YgQWNjZXNzU2NvcGVcclxuICAgICAgICAgICAgfHwgYWNjZXNzb3IgaW5zdGFuY2VvZiBBY2Nlc3NNZW1iZXIgJiYgYWNjZXNzb3Iub2JqZWN0IGluc3RhbmNlb2YgQWNjZXNzU2NvcGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFjY2Vzc29yLm5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcHJvcGVydHkgZXhwcmVzc2lvbjogXFxcIlwiICsgYWNjZXNzb3IgKyBcIlxcXCJcIik7XHJcbiAgICB9O1xyXG4gICAgUHJvcGVydHlBY2Nlc3NvclBhcnNlci5pbmplY3QgPSBbUGFyc2VyXTtcclxuICAgIHJldHVybiBQcm9wZXJ0eUFjY2Vzc29yUGFyc2VyO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBnZXRBY2Nlc3NvckV4cHJlc3Npb24oZm4pIHtcclxuICAgIC8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG4gICAgdmFyIGNsYXNzaWMgPSAvXmZ1bmN0aW9uXFxzKlxcKFskX1xcd1xcZF0rXFwpXFxzKlxceyg/OlxccypcInVzZSBzdHJpY3RcIjspPyg/OlskX1xcc1xcd1xcZFxcL1xcKi5bJ1wiXFxdKztdKyk/XFxzKnJldHVyblxccytbJF9cXHdcXGRdK1xcLihbJF9cXHdcXGRdKylcXHMqOz9cXHMqXFx9JC87XHJcbiAgICAvKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG4gICAgdmFyIGFycm93ID0gL15cXCg/WyRfXFx3XFxkXStcXCk/XFxzKj0+XFxzKlskX1xcd1xcZF0rXFwuKFskX1xcd1xcZF0rKSQvO1xyXG4gICAgdmFyIG1hdGNoID0gY2xhc3NpYy5leGVjKGZuKSB8fCBhcnJvdy5leGVjKGZuKTtcclxuICAgIGlmIChtYXRjaCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBwYXJzZSBhY2Nlc3NvciBmdW5jdGlvbjpcXG5cIiArIGZuKTtcclxuICAgIH1cclxuICAgIHJldHVybiBtYXRjaFsxXTtcclxufVxuXG52YXIgVmFsaWRhdGVFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFZhbGlkYXRlRXZlbnQoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSB0eXBlIG9mIHZhbGlkYXRlIGV2ZW50LiBFaXRoZXIgXCJ2YWxpZGF0ZVwiIG9yIFwicmVzZXRcIi5cclxuICAgICAqL1xyXG4gICAgdHlwZSwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBjb250cm9sbGVyJ3MgY3VycmVudCBhcnJheSBvZiBlcnJvcnMuIEZvciBhbiBhcnJheSBjb250YWluaW5nIGJvdGhcclxuICAgICAqIGZhaWxlZCBydWxlcyBhbmQgcGFzc2VkIHJ1bGVzLCB1c2UgdGhlIFwicmVzdWx0c1wiIHByb3BlcnR5LlxyXG4gICAgICovXHJcbiAgICBlcnJvcnMsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY29udHJvbGxlcidzIGN1cnJlbnQgYXJyYXkgb2YgdmFsaWRhdGUgcmVzdWx0cy4gVGhpc1xyXG4gICAgICogaW5jbHVkZXMgYm90aCBwYXNzZWQgcnVsZXMgYW5kIGZhaWxlZCBydWxlcy4gRm9yIGFuIGFycmF5IG9mIG9ubHkgZmFpbGVkIHJ1bGVzLFxyXG4gICAgICogdXNlIHRoZSBcImVycm9yc1wiIHByb3BlcnR5LlxyXG4gICAgICovXHJcbiAgICByZXN1bHRzLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluc3RydWN0aW9uIHBhc3NlZCB0byB0aGUgXCJ2YWxpZGF0ZVwiIG9yIFwicmVzZXRcIiBldmVudC4gV2lsbCBiZSBudWxsIHdoZW5cclxuICAgICAqIHRoZSBjb250cm9sbGVyJ3MgdmFsaWRhdGUvcmVzZXQgbWV0aG9kIHdhcyBjYWxsZWQgd2l0aCBubyBpbnN0cnVjdGlvbiBhcmd1bWVudC5cclxuICAgICAqL1xyXG4gICAgaW5zdHJ1Y3Rpb24sIFxyXG4gICAgLyoqXHJcbiAgICAgKiBJbiBldmVudHMgd2l0aCB0eXBlID09PSBcInZhbGlkYXRlXCIsIHRoaXMgcHJvcGVydHkgd2lsbCBjb250YWluIHRoZSByZXN1bHRcclxuICAgICAqIG9mIHZhbGlkYXRpbmcgdGhlIGluc3RydWN0aW9uIChzZWUgXCJpbnN0cnVjdGlvblwiIHByb3BlcnR5KS4gVXNlIHRoZSBjb250cm9sbGVyVmFsaWRhdGVSZXN1bHRcclxuICAgICAqIHRvIGFjY2VzcyB0aGUgdmFsaWRhdGUgcmVzdWx0cyBzcGVjaWZpYyB0byB0aGUgY2FsbCB0byBcInZhbGlkYXRlXCJcclxuICAgICAqIChhcyBvcHBvc2VkIHRvIHVzaW5nIHRoZSBcInJlc3VsdHNcIiBhbmQgXCJlcnJvcnNcIiBwcm9wZXJ0aWVzIHRvIGFjY2VzcyB0aGUgY29udHJvbGxlcidzIGVudGlyZVxyXG4gICAgICogc2V0IG9mIHJlc3VsdHMvZXJyb3JzKS5cclxuICAgICAqL1xyXG4gICAgY29udHJvbGxlclZhbGlkYXRlUmVzdWx0KSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcclxuICAgICAgICB0aGlzLnJlc3VsdHMgPSByZXN1bHRzO1xyXG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb24gPSBpbnN0cnVjdGlvbjtcclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXJWYWxpZGF0ZVJlc3VsdCA9IGNvbnRyb2xsZXJWYWxpZGF0ZVJlc3VsdDtcclxuICAgIH1cclxuICAgIHJldHVybiBWYWxpZGF0ZUV2ZW50O1xyXG59KCkpO1xuXG4vKipcclxuICogT3JjaGVzdHJhdGVzIHZhbGlkYXRpb24uXHJcbiAqIE1hbmFnZXMgYSBzZXQgb2YgYmluZGluZ3MsIHJlbmRlcmVycyBhbmQgb2JqZWN0cy5cclxuICogRXhwb3NlcyB0aGUgY3VycmVudCBsaXN0IG9mIHZhbGlkYXRpb24gcmVzdWx0cyBmb3IgYmluZGluZyBwdXJwb3Nlcy5cclxuICovXHJcbnZhciBWYWxpZGF0aW9uQ29udHJvbGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFZhbGlkYXRpb25Db250cm9sbGVyKHZhbGlkYXRvciwgcHJvcGVydHlQYXJzZXIsIGNvbmZpZykge1xyXG4gICAgICAgIHRoaXMudmFsaWRhdG9yID0gdmFsaWRhdG9yO1xyXG4gICAgICAgIHRoaXMucHJvcGVydHlQYXJzZXIgPSBwcm9wZXJ0eVBhcnNlcjtcclxuICAgICAgICAvLyBSZWdpc3RlcmVkIGJpbmRpbmdzICh2aWEgdGhlIHZhbGlkYXRlIGJpbmRpbmcgYmVoYXZpb3IpXHJcbiAgICAgICAgdGhpcy5iaW5kaW5ncyA9IG5ldyBNYXAoKTtcclxuICAgICAgICAvLyBSZW5kZXJlcnMgdGhhdCBoYXZlIGJlZW4gYWRkZWQgdG8gdGhlIGNvbnRyb2xsZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgdGhpcy5yZW5kZXJlcnMgPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBWYWxpZGF0aW9uIHJlc3VsdHMgdGhhdCBoYXZlIGJlZW4gcmVuZGVyZWQgYnkgdGhlIGNvbnRyb2xsZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5yZXN1bHRzID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVmFsaWRhdGlvbiBlcnJvcnMgdGhhdCBoYXZlIGJlZW4gcmVuZGVyZWQgYnkgdGhlIGNvbnRyb2xsZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiAgV2hldGhlciB0aGUgY29udHJvbGxlciBpcyBjdXJyZW50bHkgdmFsaWRhdGluZy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnZhbGlkYXRpbmcgPSBmYWxzZTtcclxuICAgICAgICAvLyBFbGVtZW50cyByZWxhdGVkIHRvIHZhbGlkYXRpb24gcmVzdWx0cyB0aGF0IGhhdmUgYmVlbiByZW5kZXJlZC5cclxuICAgICAgICB0aGlzLmVsZW1lbnRzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIC8vIE9iamVjdHMgdGhhdCBoYXZlIGJlZW4gYWRkZWQgdG8gdGhlIGNvbnRyb2xsZXIgaW5zdGFuY2UgKGVudGl0eS1zdHlsZSB2YWxpZGF0aW9uKS5cclxuICAgICAgICB0aGlzLm9iamVjdHMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgLy8gUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdmFsaWRhdGlvbiBoYXMgY29tcGxldGVkLlxyXG4gICAgICAgIHRoaXMuZmluaXNoVmFsaWRhdGluZyA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRDYWxsYmFja3MgPSBbXTtcclxuICAgICAgICB0aGlzLnZhbGlkYXRlVHJpZ2dlciA9IGNvbmZpZyBpbnN0YW5jZW9mIEdsb2JhbFZhbGlkYXRpb25Db25maWd1cmF0aW9uXHJcbiAgICAgICAgICAgID8gY29uZmlnLmdldERlZmF1bHRWYWxpZGF0aW9uVHJpZ2dlcigpXHJcbiAgICAgICAgICAgIDogR2xvYmFsVmFsaWRhdGlvbkNvbmZpZ3VyYXRpb24uREVGQVVMVF9WQUxJREFUSU9OX1RSSUdHRVI7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSB0byBjb250cm9sbGVyIHZhbGlkYXRlIGFuZCByZXNldCBldmVudHMuIFRoZXNlIGV2ZW50cyBvY2N1ciB3aGVuIHRoZVxyXG4gICAgICogY29udHJvbGxlcidzIFwidmFsaWRhdGVcIlwiIGFuZCBcInJlc2V0XCIgbWV0aG9kcyBhcmUgY2FsbGVkLlxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBiZSBpbnZva2VkIHdoZW4gdGhlIGNvbnRyb2xsZXIgdmFsaWRhdGVzIG9yIHJlc2V0cy5cclxuICAgICAqL1xyXG4gICAgVmFsaWRhdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5ldmVudENhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBfdGhpcy5ldmVudENhbGxiYWNrcy5pbmRleE9mKGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5ldmVudENhbGxiYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYW4gb2JqZWN0IHRvIHRoZSBzZXQgb2Ygb2JqZWN0cyB0aGF0IHNob3VsZCBiZSB2YWxpZGF0ZWQgd2hlbiB2YWxpZGF0ZSBpcyBjYWxsZWQuXHJcbiAgICAgKiBAcGFyYW0gb2JqZWN0IFRoZSBvYmplY3QuXHJcbiAgICAgKiBAcGFyYW0gcnVsZXMgT3B0aW9uYWwuIFRoZSBydWxlcy4gSWYgcnVsZXMgYXJlbid0IHN1cHBsaWVkIHRoZSBWYWxpZGF0b3IgaW1wbGVtZW50YXRpb24gd2lsbCBsb29rdXAgdGhlIHJ1bGVzLlxyXG4gICAgICovXHJcbiAgICBWYWxpZGF0aW9uQ29udHJvbGxlci5wcm90b3R5cGUuYWRkT2JqZWN0ID0gZnVuY3Rpb24gKG9iamVjdCwgcnVsZXMpIHtcclxuICAgICAgICB0aGlzLm9iamVjdHMuc2V0KG9iamVjdCwgcnVsZXMpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBhbiBvYmplY3QgZnJvbSB0aGUgc2V0IG9mIG9iamVjdHMgdGhhdCBzaG91bGQgYmUgdmFsaWRhdGVkIHdoZW4gdmFsaWRhdGUgaXMgY2FsbGVkLlxyXG4gICAgICogQHBhcmFtIG9iamVjdCBUaGUgb2JqZWN0LlxyXG4gICAgICovXHJcbiAgICBWYWxpZGF0aW9uQ29udHJvbGxlci5wcm90b3R5cGUucmVtb3ZlT2JqZWN0ID0gZnVuY3Rpb24gKG9iamVjdCkge1xyXG4gICAgICAgIHRoaXMub2JqZWN0cy5kZWxldGUob2JqZWN0KTtcclxuICAgICAgICB0aGlzLnByb2Nlc3NSZXN1bHREZWx0YSgncmVzZXQnLCB0aGlzLnJlc3VsdHMuZmlsdGVyKGZ1bmN0aW9uIChyZXN1bHQpIHsgcmV0dXJuIHJlc3VsdC5vYmplY3QgPT09IG9iamVjdDsgfSksIFtdKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYW5kIHJlbmRlcnMgYW4gZXJyb3IuXHJcbiAgICAgKi9cclxuICAgIFZhbGlkYXRpb25Db250cm9sbGVyLnByb3RvdHlwZS5hZGRFcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlLCBvYmplY3QsIHByb3BlcnR5TmFtZSkge1xyXG4gICAgICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09IHZvaWQgMCkgeyBwcm9wZXJ0eU5hbWUgPSBudWxsOyB9XHJcbiAgICAgICAgdmFyIHJlc29sdmVkUHJvcGVydHlOYW1lO1xyXG4gICAgICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmVzb2x2ZWRQcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXNvbHZlZFByb3BlcnR5TmFtZSA9IHRoaXMucHJvcGVydHlQYXJzZXIucGFyc2UocHJvcGVydHlOYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBWYWxpZGF0ZVJlc3VsdCh7IF9fbWFudWFsbHlBZGRlZF9fOiB0cnVlIH0sIG9iamVjdCwgcmVzb2x2ZWRQcm9wZXJ0eU5hbWUsIGZhbHNlLCBtZXNzYWdlKTtcclxuICAgICAgICB0aGlzLnByb2Nlc3NSZXN1bHREZWx0YSgndmFsaWRhdGUnLCBbXSwgW3Jlc3VsdF0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGFuZCB1bnJlbmRlcnMgYW4gZXJyb3IuXHJcbiAgICAgKi9cclxuICAgIFZhbGlkYXRpb25Db250cm9sbGVyLnByb3RvdHlwZS5yZW1vdmVFcnJvciA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICBpZiAodGhpcy5yZXN1bHRzLmluZGV4T2YocmVzdWx0KSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVzdWx0RGVsdGEoJ3Jlc2V0JywgW3Jlc3VsdF0sIFtdKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgcmVuZGVyZXIuXHJcbiAgICAgKiBAcGFyYW0gcmVuZGVyZXIgVGhlIHJlbmRlcmVyLlxyXG4gICAgICovXHJcbiAgICBWYWxpZGF0aW9uQ29udHJvbGxlci5wcm90b3R5cGUuYWRkUmVuZGVyZXIgPSBmdW5jdGlvbiAocmVuZGVyZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXJzLnB1c2gocmVuZGVyZXIpO1xyXG4gICAgICAgIHJlbmRlcmVyLnJlbmRlcih7XHJcbiAgICAgICAgICAgIGtpbmQ6ICd2YWxpZGF0ZScsXHJcbiAgICAgICAgICAgIHJlbmRlcjogdGhpcy5yZXN1bHRzLm1hcChmdW5jdGlvbiAocmVzdWx0KSB7IHJldHVybiAoeyByZXN1bHQ6IHJlc3VsdCwgZWxlbWVudHM6IF90aGlzLmVsZW1lbnRzLmdldChyZXN1bHQpIH0pOyB9KSxcclxuICAgICAgICAgICAgdW5yZW5kZXI6IFtdXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGEgcmVuZGVyZXIuXHJcbiAgICAgKiBAcGFyYW0gcmVuZGVyZXIgVGhlIHJlbmRlcmVyLlxyXG4gICAgICovXHJcbiAgICBWYWxpZGF0aW9uQ29udHJvbGxlci5wcm90b3R5cGUucmVtb3ZlUmVuZGVyZXIgPSBmdW5jdGlvbiAocmVuZGVyZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXJzLnNwbGljZSh0aGlzLnJlbmRlcmVycy5pbmRleE9mKHJlbmRlcmVyKSwgMSk7XHJcbiAgICAgICAgcmVuZGVyZXIucmVuZGVyKHtcclxuICAgICAgICAgICAga2luZDogJ3Jlc2V0JyxcclxuICAgICAgICAgICAgcmVuZGVyOiBbXSxcclxuICAgICAgICAgICAgdW5yZW5kZXI6IHRoaXMucmVzdWx0cy5tYXAoZnVuY3Rpb24gKHJlc3VsdCkgeyByZXR1cm4gKHsgcmVzdWx0OiByZXN1bHQsIGVsZW1lbnRzOiBfdGhpcy5lbGVtZW50cy5nZXQocmVzdWx0KSB9KTsgfSlcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlZ2lzdGVycyBhIGJpbmRpbmcgd2l0aCB0aGUgY29udHJvbGxlci5cclxuICAgICAqIEBwYXJhbSBiaW5kaW5nIFRoZSBiaW5kaW5nIGluc3RhbmNlLlxyXG4gICAgICogQHBhcmFtIHRhcmdldCBUaGUgRE9NIGVsZW1lbnQuXHJcbiAgICAgKiBAcGFyYW0gcnVsZXMgKG9wdGlvbmFsKSBydWxlcyBhc3NvY2lhdGVkIHdpdGggdGhlIGJpbmRpbmcuIFZhbGlkYXRvciBpbXBsZW1lbnRhdGlvbiBzcGVjaWZpYy5cclxuICAgICAqL1xyXG4gICAgVmFsaWRhdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlLnJlZ2lzdGVyQmluZGluZyA9IGZ1bmN0aW9uIChiaW5kaW5nLCB0YXJnZXQsIHJ1bGVzKSB7XHJcbiAgICAgICAgdGhpcy5iaW5kaW5ncy5zZXQoYmluZGluZywgeyB0YXJnZXQ6IHRhcmdldCwgcnVsZXM6IHJ1bGVzLCBwcm9wZXJ0eUluZm86IG51bGwgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVbnJlZ2lzdGVycyBhIGJpbmRpbmcgd2l0aCB0aGUgY29udHJvbGxlci5cclxuICAgICAqIEBwYXJhbSBiaW5kaW5nIFRoZSBiaW5kaW5nIGluc3RhbmNlLlxyXG4gICAgICovXHJcbiAgICBWYWxpZGF0aW9uQ29udHJvbGxlci5wcm90b3R5cGUudW5yZWdpc3RlckJpbmRpbmcgPSBmdW5jdGlvbiAoYmluZGluZykge1xyXG4gICAgICAgIHRoaXMucmVzZXRCaW5kaW5nKGJpbmRpbmcpO1xyXG4gICAgICAgIHRoaXMuYmluZGluZ3MuZGVsZXRlKGJpbmRpbmcpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSW50ZXJwcmV0cyB0aGUgaW5zdHJ1Y3Rpb24gYW5kIHJldHVybnMgYSBwcmVkaWNhdGUgdGhhdCB3aWxsIGlkZW50aWZ5XHJcbiAgICAgKiByZWxldmFudCByZXN1bHRzIGluIHRoZSBsaXN0IG9mIHJlbmRlcmVkIHZhbGlkYXRpb24gcmVzdWx0cy5cclxuICAgICAqL1xyXG4gICAgVmFsaWRhdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlLmdldEluc3RydWN0aW9uUHJlZGljYXRlID0gZnVuY3Rpb24gKGluc3RydWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoaW5zdHJ1Y3Rpb24pIHtcclxuICAgICAgICAgICAgdmFyIG9iamVjdF8xID0gaW5zdHJ1Y3Rpb24ub2JqZWN0LCBwcm9wZXJ0eU5hbWVfMSA9IGluc3RydWN0aW9uLnByb3BlcnR5TmFtZSwgcnVsZXNfMSA9IGluc3RydWN0aW9uLnJ1bGVzO1xyXG4gICAgICAgICAgICB2YXIgcHJlZGljYXRlXzE7XHJcbiAgICAgICAgICAgIGlmIChpbnN0cnVjdGlvbi5wcm9wZXJ0eU5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHByZWRpY2F0ZV8xID0gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgub2JqZWN0ID09PSBvYmplY3RfMSAmJiB4LnByb3BlcnR5TmFtZSA9PT0gcHJvcGVydHlOYW1lXzE7IH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwcmVkaWNhdGVfMSA9IGZ1bmN0aW9uICh4KSB7IHJldHVybiB4Lm9iamVjdCA9PT0gb2JqZWN0XzE7IH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHJ1bGVzXzEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoeCkgeyByZXR1cm4gcHJlZGljYXRlXzEoeCkgJiYgX3RoaXMudmFsaWRhdG9yLnJ1bGVFeGlzdHMocnVsZXNfMSwgeC5ydWxlKTsgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcHJlZGljYXRlXzE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBWYWxpZGF0ZXMgYW5kIHJlbmRlcnMgcmVzdWx0cy5cclxuICAgICAqIEBwYXJhbSBpbnN0cnVjdGlvbiBPcHRpb25hbC4gSW5zdHJ1Y3Rpb25zIG9uIHdoYXQgdG8gdmFsaWRhdGUuIElmIHVuZGVmaW5lZCwgYWxsXHJcbiAgICAgKiBvYmplY3RzIGFuZCBiaW5kaW5ncyB3aWxsIGJlIHZhbGlkYXRlZC5cclxuICAgICAqL1xyXG4gICAgVmFsaWRhdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gKGluc3RydWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBHZXQgYSBmdW5jdGlvbiB0aGF0IHdpbGwgcHJvY2VzcyB0aGUgdmFsaWRhdGlvbiBpbnN0cnVjdGlvbi5cclxuICAgICAgICB2YXIgZXhlY3V0ZTtcclxuICAgICAgICBpZiAoaW5zdHJ1Y3Rpb24pIHtcclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnByZWZlci1jb25zdFxyXG4gICAgICAgICAgICB2YXIgb2JqZWN0XzIgPSBpbnN0cnVjdGlvbi5vYmplY3QsIHByb3BlcnR5TmFtZV8yID0gaW5zdHJ1Y3Rpb24ucHJvcGVydHlOYW1lLCBydWxlc18yID0gaW5zdHJ1Y3Rpb24ucnVsZXM7XHJcbiAgICAgICAgICAgIC8vIGlmIHJ1bGVzIHdlcmUgbm90IHNwZWNpZmllZCwgY2hlY2sgdGhlIG9iamVjdCBtYXAuXHJcbiAgICAgICAgICAgIHJ1bGVzXzIgPSBydWxlc18yIHx8IHRoaXMub2JqZWN0cy5nZXQob2JqZWN0XzIpO1xyXG4gICAgICAgICAgICAvLyBwcm9wZXJ0eSBzcGVjaWZpZWQ/XHJcbiAgICAgICAgICAgIGlmIChpbnN0cnVjdGlvbi5wcm9wZXJ0eU5hbWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gdmFsaWRhdGUgdGhlIHNwZWNpZmllZCBvYmplY3QuXHJcbiAgICAgICAgICAgICAgICBleGVjdXRlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMudmFsaWRhdG9yLnZhbGlkYXRlT2JqZWN0KG9iamVjdF8yLCBydWxlc18yKTsgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHZhbGlkYXRlIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkuXHJcbiAgICAgICAgICAgICAgICBleGVjdXRlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMudmFsaWRhdG9yLnZhbGlkYXRlUHJvcGVydHkob2JqZWN0XzIsIHByb3BlcnR5TmFtZV8yLCBydWxlc18yKTsgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gdmFsaWRhdGUgYWxsIG9iamVjdHMgYW5kIGJpbmRpbmdzLlxyXG4gICAgICAgICAgICBleGVjdXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gQXJyYXkuZnJvbShfdGhpcy5vYmplY3RzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX2IgPSBfYVtfaV0sIG9iamVjdCA9IF9iWzBdLCBydWxlcyA9IF9iWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMudmFsaWRhdG9yLnZhbGlkYXRlT2JqZWN0KG9iamVjdCwgcnVsZXMpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9jID0gMCwgX2QgPSBBcnJheS5mcm9tKF90aGlzLmJpbmRpbmdzKTsgX2MgPCBfZC5sZW5ndGg7IF9jKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX2UgPSBfZFtfY10sIGJpbmRpbmcgPSBfZVswXSwgcnVsZXMgPSBfZVsxXS5ydWxlcztcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcGVydHlJbmZvID0gZ2V0UHJvcGVydHlJbmZvKGJpbmRpbmcuc291cmNlRXhwcmVzc2lvbiwgYmluZGluZy5zb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJvcGVydHlJbmZvIHx8IF90aGlzLm9iamVjdHMuaGFzKHByb3BlcnR5SW5mby5vYmplY3QpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzLnZhbGlkYXRvci52YWxpZGF0ZVByb3BlcnR5KHByb3BlcnR5SW5mby5vYmplY3QsIHByb3BlcnR5SW5mby5wcm9wZXJ0eU5hbWUsIHJ1bGVzKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdFNldHMpIHsgcmV0dXJuIHJlc3VsdFNldHMucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmNvbmNhdChiKTsgfSwgW10pOyB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gV2FpdCBmb3IgYW55IGV4aXN0aW5nIHZhbGlkYXRpb24gdG8gZmluaXNoLCBleGVjdXRlIHRoZSBpbnN0cnVjdGlvbiwgcmVuZGVyIHRoZSByZXN1bHRzLlxyXG4gICAgICAgIHRoaXMudmFsaWRhdGluZyA9IHRydWU7XHJcbiAgICAgICAgdmFyIHJldHVyblByb21pc2UgPSB0aGlzLmZpbmlzaFZhbGlkYXRpbmdcclxuICAgICAgICAgICAgLnRoZW4oZXhlY3V0ZSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKG5ld1Jlc3VsdHMpIHtcclxuICAgICAgICAgICAgdmFyIHByZWRpY2F0ZSA9IF90aGlzLmdldEluc3RydWN0aW9uUHJlZGljYXRlKGluc3RydWN0aW9uKTtcclxuICAgICAgICAgICAgdmFyIG9sZFJlc3VsdHMgPSBfdGhpcy5yZXN1bHRzLmZpbHRlcihwcmVkaWNhdGUpO1xyXG4gICAgICAgICAgICBfdGhpcy5wcm9jZXNzUmVzdWx0RGVsdGEoJ3ZhbGlkYXRlJywgb2xkUmVzdWx0cywgbmV3UmVzdWx0cyk7XHJcbiAgICAgICAgICAgIGlmIChyZXR1cm5Qcm9taXNlID09PSBfdGhpcy5maW5pc2hWYWxpZGF0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy52YWxpZGF0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiBpbnN0cnVjdGlvbixcclxuICAgICAgICAgICAgICAgIHZhbGlkOiBuZXdSZXN1bHRzLmZpbmQoZnVuY3Rpb24gKHgpIHsgcmV0dXJuICF4LnZhbGlkOyB9KSA9PT0gdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0czogbmV3UmVzdWx0c1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBfdGhpcy5pbnZva2VDYWxsYmFja3MoaW5zdHJ1Y3Rpb24sIHJlc3VsdCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChleGNlcHRpb24pIHtcclxuICAgICAgICAgICAgLy8gcmVjb3ZlciwgdG8gZW5hYmxlIHN1YnNlcXVlbnQgY2FsbHMgdG8gdmFsaWRhdGUoKVxyXG4gICAgICAgICAgICBfdGhpcy52YWxpZGF0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIF90aGlzLmZpbmlzaFZhbGlkYXRpbmcgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGV4Y2VwdGlvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5maW5pc2hWYWxpZGF0aW5nID0gcmV0dXJuUHJvbWlzZTtcclxuICAgICAgICByZXR1cm4gcmV0dXJuUHJvbWlzZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0cyBhbnkgcmVuZGVyZWQgdmFsaWRhdGlvbiByZXN1bHRzICh1bnJlbmRlcnMpLlxyXG4gICAgICogQHBhcmFtIGluc3RydWN0aW9uIE9wdGlvbmFsLiBJbnN0cnVjdGlvbnMgb24gd2hhdCB0byByZXNldC4gSWYgdW5zcGVjaWZpZWQgYWxsIHJlbmRlcmVkIHJlc3VsdHNcclxuICAgICAqIHdpbGwgYmUgdW5yZW5kZXJlZC5cclxuICAgICAqL1xyXG4gICAgVmFsaWRhdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKGluc3RydWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIHByZWRpY2F0ZSA9IHRoaXMuZ2V0SW5zdHJ1Y3Rpb25QcmVkaWNhdGUoaW5zdHJ1Y3Rpb24pO1xyXG4gICAgICAgIHZhciBvbGRSZXN1bHRzID0gdGhpcy5yZXN1bHRzLmZpbHRlcihwcmVkaWNhdGUpO1xyXG4gICAgICAgIHRoaXMucHJvY2Vzc1Jlc3VsdERlbHRhKCdyZXNldCcsIG9sZFJlc3VsdHMsIFtdKTtcclxuICAgICAgICB0aGlzLmludm9rZUNhbGxiYWNrcyhpbnN0cnVjdGlvbiwgbnVsbCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSBlbGVtZW50cyBhc3NvY2lhdGVkIHdpdGggYW4gb2JqZWN0IGFuZCBwcm9wZXJ0eU5hbWUgKGlmIGFueSkuXHJcbiAgICAgKi9cclxuICAgIFZhbGlkYXRpb25Db250cm9sbGVyLnByb3RvdHlwZS5nZXRBc3NvY2lhdGVkRWxlbWVudHMgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICB2YXIgb2JqZWN0ID0gX2Eub2JqZWN0LCBwcm9wZXJ0eU5hbWUgPSBfYS5wcm9wZXJ0eU5hbWU7XHJcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYiA9IEFycmF5LmZyb20odGhpcy5iaW5kaW5ncyk7IF9pIDwgX2IubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBfYyA9IF9iW19pXSwgYmluZGluZyA9IF9jWzBdLCB0YXJnZXQgPSBfY1sxXS50YXJnZXQ7XHJcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eUluZm8gPSBnZXRQcm9wZXJ0eUluZm8oYmluZGluZy5zb3VyY2VFeHByZXNzaW9uLCBiaW5kaW5nLnNvdXJjZSk7XHJcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eUluZm8gJiYgcHJvcGVydHlJbmZvLm9iamVjdCA9PT0gb2JqZWN0ICYmIHByb3BlcnR5SW5mby5wcm9wZXJ0eU5hbWUgPT09IHByb3BlcnR5TmFtZSkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudHMucHVzaCh0YXJnZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlbGVtZW50cztcclxuICAgIH07XHJcbiAgICBWYWxpZGF0aW9uQ29udHJvbGxlci5wcm90b3R5cGUucHJvY2Vzc1Jlc3VsdERlbHRhID0gZnVuY3Rpb24gKGtpbmQsIG9sZFJlc3VsdHMsIG5ld1Jlc3VsdHMpIHtcclxuICAgICAgICAvLyBwcmVwYXJlIHRoZSBpbnN0cnVjdGlvbi5cclxuICAgICAgICB2YXIgaW5zdHJ1Y3Rpb24gPSB7XHJcbiAgICAgICAgICAgIGtpbmQ6IGtpbmQsXHJcbiAgICAgICAgICAgIHJlbmRlcjogW10sXHJcbiAgICAgICAgICAgIHVucmVuZGVyOiBbXVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gY3JlYXRlIGEgc2hhbGxvdyBjb3B5IG9mIG5ld1Jlc3VsdHMgc28gd2UgY2FuIG11dGF0ZSBpdCB3aXRob3V0IGNhdXNpbmcgc2lkZS1lZmZlY3RzLlxyXG4gICAgICAgIG5ld1Jlc3VsdHMgPSBuZXdSZXN1bHRzLnNsaWNlKDApO1xyXG4gICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKG9sZFJlc3VsdCkge1xyXG4gICAgICAgICAgICAvLyBnZXQgdGhlIGVsZW1lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgb2xkIHJlc3VsdC5cclxuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gdGhpc18xLmVsZW1lbnRzLmdldChvbGRSZXN1bHQpO1xyXG4gICAgICAgICAgICAvLyByZW1vdmUgdGhlIG9sZCByZXN1bHQgZnJvbSB0aGUgZWxlbWVudCBtYXAuXHJcbiAgICAgICAgICAgIHRoaXNfMS5lbGVtZW50cy5kZWxldGUob2xkUmVzdWx0KTtcclxuICAgICAgICAgICAgLy8gY3JlYXRlIHRoZSB1bnJlbmRlciBpbnN0cnVjdGlvbi5cclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb24udW5yZW5kZXIucHVzaCh7IHJlc3VsdDogb2xkUmVzdWx0LCBlbGVtZW50czogZWxlbWVudHMgfSk7XHJcbiAgICAgICAgICAgIC8vIGRldGVybWluZSBpZiB0aGVyZSdzIGEgY29ycmVzcG9uZGluZyBuZXcgcmVzdWx0IGZvciB0aGUgb2xkIHJlc3VsdCB3ZSBhcmUgdW5yZW5kZXJpbmcuXHJcbiAgICAgICAgICAgIHZhciBuZXdSZXN1bHRJbmRleCA9IG5ld1Jlc3VsdHMuZmluZEluZGV4KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnJ1bGUgPT09IG9sZFJlc3VsdC5ydWxlICYmIHgub2JqZWN0ID09PSBvbGRSZXN1bHQub2JqZWN0ICYmIHgucHJvcGVydHlOYW1lID09PSBvbGRSZXN1bHQucHJvcGVydHlOYW1lOyB9KTtcclxuICAgICAgICAgICAgaWYgKG5ld1Jlc3VsdEluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gbm8gY29ycmVzcG9uZGluZyBuZXcgcmVzdWx0Li4uIHNpbXBsZSByZW1vdmUuXHJcbiAgICAgICAgICAgICAgICB0aGlzXzEucmVzdWx0cy5zcGxpY2UodGhpc18xLnJlc3VsdHMuaW5kZXhPZihvbGRSZXN1bHQpLCAxKTtcclxuICAgICAgICAgICAgICAgIGlmICghb2xkUmVzdWx0LnZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc18xLmVycm9ycy5zcGxpY2UodGhpc18xLmVycm9ycy5pbmRleE9mKG9sZFJlc3VsdCksIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhlcmUgaXMgYSBjb3JyZXNwb25kaW5nIG5ldyByZXN1bHQuLi5cclxuICAgICAgICAgICAgICAgIHZhciBuZXdSZXN1bHQgPSBuZXdSZXN1bHRzLnNwbGljZShuZXdSZXN1bHRJbmRleCwgMSlbMF07XHJcbiAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIGVsZW1lbnRzIHRoYXQgYXJlIGFzc29jaWF0ZWQgd2l0aCB0aGUgbmV3IHJlc3VsdC5cclxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50c18xID0gdGhpc18xLmdldEFzc29jaWF0ZWRFbGVtZW50cyhuZXdSZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgdGhpc18xLmVsZW1lbnRzLnNldChuZXdSZXN1bHQsIGVsZW1lbnRzXzEpO1xyXG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIGEgcmVuZGVyIGluc3RydWN0aW9uIGZvciB0aGUgbmV3IHJlc3VsdC5cclxuICAgICAgICAgICAgICAgIGluc3RydWN0aW9uLnJlbmRlci5wdXNoKHsgcmVzdWx0OiBuZXdSZXN1bHQsIGVsZW1lbnRzOiBlbGVtZW50c18xIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gZG8gYW4gaW4tcGxhY2UgcmVwbGFjZW1lbnQgb2YgdGhlIG9sZCByZXN1bHQgd2l0aCB0aGUgbmV3IHJlc3VsdC5cclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgZW5zdXJlcyBhbnkgcmVwZWF0cyBib3VuZCB0byB0aGlzLnJlc3VsdHMgd2lsbCBub3QgdGhyYXNoLlxyXG4gICAgICAgICAgICAgICAgdGhpc18xLnJlc3VsdHMuc3BsaWNlKHRoaXNfMS5yZXN1bHRzLmluZGV4T2Yob2xkUmVzdWx0KSwgMSwgbmV3UmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIGlmICghb2xkUmVzdWx0LnZhbGlkICYmIG5ld1Jlc3VsdC52YWxpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNfMS5lcnJvcnMuc3BsaWNlKHRoaXNfMS5lcnJvcnMuaW5kZXhPZihvbGRSZXN1bHQpLCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFvbGRSZXN1bHQudmFsaWQgJiYgIW5ld1Jlc3VsdC52YWxpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNfMS5lcnJvcnMuc3BsaWNlKHRoaXNfMS5lcnJvcnMuaW5kZXhPZihvbGRSZXN1bHQpLCAxLCBuZXdSZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIW5ld1Jlc3VsdC52YWxpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNfMS5lcnJvcnMucHVzaChuZXdSZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgdGhpc18xID0gdGhpcztcclxuICAgICAgICAvLyBjcmVhdGUgdW5yZW5kZXIgaW5zdHJ1Y3Rpb25zIGZyb20gdGhlIG9sZCByZXN1bHRzLlxyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgb2xkUmVzdWx0c18xID0gb2xkUmVzdWx0czsgX2kgPCBvbGRSZXN1bHRzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBvbGRSZXN1bHQgPSBvbGRSZXN1bHRzXzFbX2ldO1xyXG4gICAgICAgICAgICBfbG9vcF8xKG9sZFJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNyZWF0ZSByZW5kZXIgaW5zdHJ1Y3Rpb25zIGZyb20gdGhlIHJlbWFpbmluZyBuZXcgcmVzdWx0cy5cclxuICAgICAgICBmb3IgKHZhciBfYSA9IDAsIG5ld1Jlc3VsdHNfMSA9IG5ld1Jlc3VsdHM7IF9hIDwgbmV3UmVzdWx0c18xLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gbmV3UmVzdWx0c18xW19hXTtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcy5nZXRBc3NvY2lhdGVkRWxlbWVudHMocmVzdWx0KTtcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb24ucmVuZGVyLnB1c2goeyByZXN1bHQ6IHJlc3VsdCwgZWxlbWVudHM6IGVsZW1lbnRzIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLnNldChyZXN1bHQsIGVsZW1lbnRzKTtcclxuICAgICAgICAgICAgdGhpcy5yZXN1bHRzLnB1c2gocmVzdWx0KTtcclxuICAgICAgICAgICAgaWYgKCFyZXN1bHQudmFsaWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JzLnB1c2gocmVzdWx0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyByZW5kZXIuXHJcbiAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBfYyA9IHRoaXMucmVuZGVyZXJzOyBfYiA8IF9jLmxlbmd0aDsgX2IrKykge1xyXG4gICAgICAgICAgICB2YXIgcmVuZGVyZXIgPSBfY1tfYl07XHJcbiAgICAgICAgICAgIHJlbmRlcmVyLnJlbmRlcihpbnN0cnVjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGVzIHRoZSBwcm9wZXJ0eSBhc3NvY2lhdGVkIHdpdGggYSBiaW5kaW5nLlxyXG4gICAgICovXHJcbiAgICBWYWxpZGF0aW9uQ29udHJvbGxlci5wcm90b3R5cGUudmFsaWRhdGVCaW5kaW5nID0gZnVuY3Rpb24gKGJpbmRpbmcpIHtcclxuICAgICAgICBpZiAoIWJpbmRpbmcuaXNCb3VuZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwcm9wZXJ0eUluZm8gPSBnZXRQcm9wZXJ0eUluZm8oYmluZGluZy5zb3VyY2VFeHByZXNzaW9uLCBiaW5kaW5nLnNvdXJjZSk7XHJcbiAgICAgICAgdmFyIHJ1bGVzO1xyXG4gICAgICAgIHZhciByZWdpc3RlcmVkQmluZGluZyA9IHRoaXMuYmluZGluZ3MuZ2V0KGJpbmRpbmcpO1xyXG4gICAgICAgIGlmIChyZWdpc3RlcmVkQmluZGluZykge1xyXG4gICAgICAgICAgICBydWxlcyA9IHJlZ2lzdGVyZWRCaW5kaW5nLnJ1bGVzO1xyXG4gICAgICAgICAgICByZWdpc3RlcmVkQmluZGluZy5wcm9wZXJ0eUluZm8gPSBwcm9wZXJ0eUluZm87XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghcHJvcGVydHlJbmZvKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG9iamVjdCA9IHByb3BlcnR5SW5mby5vYmplY3QsIHByb3BlcnR5TmFtZSA9IHByb3BlcnR5SW5mby5wcm9wZXJ0eU5hbWU7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZSh7IG9iamVjdDogb2JqZWN0LCBwcm9wZXJ0eU5hbWU6IHByb3BlcnR5TmFtZSwgcnVsZXM6IHJ1bGVzIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVzZXRzIHRoZSByZXN1bHRzIGZvciBhIHByb3BlcnR5IGFzc29jaWF0ZWQgd2l0aCBhIGJpbmRpbmcuXHJcbiAgICAgKi9cclxuICAgIFZhbGlkYXRpb25Db250cm9sbGVyLnByb3RvdHlwZS5yZXNldEJpbmRpbmcgPSBmdW5jdGlvbiAoYmluZGluZykge1xyXG4gICAgICAgIHZhciByZWdpc3RlcmVkQmluZGluZyA9IHRoaXMuYmluZGluZ3MuZ2V0KGJpbmRpbmcpO1xyXG4gICAgICAgIHZhciBwcm9wZXJ0eUluZm8gPSBnZXRQcm9wZXJ0eUluZm8oYmluZGluZy5zb3VyY2VFeHByZXNzaW9uLCBiaW5kaW5nLnNvdXJjZSk7XHJcbiAgICAgICAgaWYgKCFwcm9wZXJ0eUluZm8gJiYgcmVnaXN0ZXJlZEJpbmRpbmcpIHtcclxuICAgICAgICAgICAgcHJvcGVydHlJbmZvID0gcmVnaXN0ZXJlZEJpbmRpbmcucHJvcGVydHlJbmZvO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVnaXN0ZXJlZEJpbmRpbmcpIHtcclxuICAgICAgICAgICAgcmVnaXN0ZXJlZEJpbmRpbmcucHJvcGVydHlJbmZvID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFwcm9wZXJ0eUluZm8pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgb2JqZWN0ID0gcHJvcGVydHlJbmZvLm9iamVjdCwgcHJvcGVydHlOYW1lID0gcHJvcGVydHlJbmZvLnByb3BlcnR5TmFtZTtcclxuICAgICAgICB0aGlzLnJlc2V0KHsgb2JqZWN0OiBvYmplY3QsIHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2hhbmdlcyB0aGUgY29udHJvbGxlcidzIHZhbGlkYXRlVHJpZ2dlci5cclxuICAgICAqIEBwYXJhbSBuZXdUcmlnZ2VyIFRoZSBuZXcgdmFsaWRhdGVUcmlnZ2VyXHJcbiAgICAgKi9cclxuICAgIFZhbGlkYXRpb25Db250cm9sbGVyLnByb3RvdHlwZS5jaGFuZ2VUcmlnZ2VyID0gZnVuY3Rpb24gKG5ld1RyaWdnZXIpIHtcclxuICAgICAgICB0aGlzLnZhbGlkYXRlVHJpZ2dlciA9IG5ld1RyaWdnZXI7XHJcbiAgICAgICAgdmFyIGJpbmRpbmdzID0gQXJyYXkuZnJvbSh0aGlzLmJpbmRpbmdzLmtleXMoKSk7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBiaW5kaW5nc18xID0gYmluZGluZ3M7IF9pIDwgYmluZGluZ3NfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGJpbmRpbmcgPSBiaW5kaW5nc18xW19pXTtcclxuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGJpbmRpbmcuc291cmNlO1xyXG4gICAgICAgICAgICBiaW5kaW5nLnVuYmluZCgpO1xyXG4gICAgICAgICAgICBiaW5kaW5nLmJpbmQoc291cmNlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXZhbGlkYXRlcyB0aGUgY29udHJvbGxlcidzIGN1cnJlbnQgc2V0IG9mIGVycm9ycy5cclxuICAgICAqL1xyXG4gICAgVmFsaWRhdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlLnJldmFsaWRhdGVFcnJvcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZXJyb3JzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgX2IgPSBfYVtfaV0sIG9iamVjdCA9IF9iLm9iamVjdCwgcHJvcGVydHlOYW1lID0gX2IucHJvcGVydHlOYW1lLCBydWxlID0gX2IucnVsZTtcclxuICAgICAgICAgICAgaWYgKHJ1bGUuX19tYW51YWxseUFkZGVkX18pIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBydWxlcyA9IFtbcnVsZV1dO1xyXG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlKHsgb2JqZWN0OiBvYmplY3QsIHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lLCBydWxlczogcnVsZXMgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFZhbGlkYXRpb25Db250cm9sbGVyLnByb3RvdHlwZS5pbnZva2VDYWxsYmFja3MgPSBmdW5jdGlvbiAoaW5zdHJ1Y3Rpb24sIHJlc3VsdCkge1xyXG4gICAgICAgIGlmICh0aGlzLmV2ZW50Q2FsbGJhY2tzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBldmVudCA9IG5ldyBWYWxpZGF0ZUV2ZW50KHJlc3VsdCA/ICd2YWxpZGF0ZScgOiAncmVzZXQnLCB0aGlzLmVycm9ycywgdGhpcy5yZXN1bHRzLCBpbnN0cnVjdGlvbiB8fCBudWxsLCByZXN1bHQpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ldmVudENhbGxiYWNrcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50Q2FsbGJhY2tzW2ldKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVmFsaWRhdGlvbkNvbnRyb2xsZXIuaW5qZWN0ID0gW1ZhbGlkYXRvciwgUHJvcGVydHlBY2Nlc3NvclBhcnNlciwgR2xvYmFsVmFsaWRhdGlvbkNvbmZpZ3VyYXRpb25dO1xyXG4gICAgcmV0dXJuIFZhbGlkYXRpb25Db250cm9sbGVyO1xyXG59KCkpO1xuXG4vLyB0c2xpbnQ6ZGlzYWJsZTpuby1iaXR3aXNlXHJcbi8qKlxyXG4gKiBCaW5kaW5nIGJlaGF2aW9yLiBJbmRpY2F0ZXMgdGhlIGJvdW5kIHByb3BlcnR5IHNob3VsZCBiZSB2YWxpZGF0ZWQuXHJcbiAqL1xyXG52YXIgVmFsaWRhdGVCaW5kaW5nQmVoYXZpb3JCYXNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVmFsaWRhdGVCaW5kaW5nQmVoYXZpb3JCYXNlKHRhc2tRdWV1ZSkge1xyXG4gICAgICAgIHRoaXMudGFza1F1ZXVlID0gdGFza1F1ZXVlO1xyXG4gICAgfVxyXG4gICAgVmFsaWRhdGVCaW5kaW5nQmVoYXZpb3JCYXNlLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGJpbmRpbmcsIHNvdXJjZSwgcnVsZXNPckNvbnRyb2xsZXIsIHJ1bGVzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBpZGVudGlmeSB0aGUgdGFyZ2V0IGVsZW1lbnQuXHJcbiAgICAgICAgdmFyIHRhcmdldCA9IGdldFRhcmdldERPTUVsZW1lbnQoYmluZGluZywgc291cmNlKTtcclxuICAgICAgICAvLyBsb2NhdGUgdGhlIGNvbnRyb2xsZXIuXHJcbiAgICAgICAgdmFyIGNvbnRyb2xsZXI7XHJcbiAgICAgICAgaWYgKHJ1bGVzT3JDb250cm9sbGVyIGluc3RhbmNlb2YgVmFsaWRhdGlvbkNvbnRyb2xsZXIpIHtcclxuICAgICAgICAgICAgY29udHJvbGxlciA9IHJ1bGVzT3JDb250cm9sbGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29udHJvbGxlciA9IHNvdXJjZS5jb250YWluZXIuZ2V0KE9wdGlvbmFsLm9mKFZhbGlkYXRpb25Db250cm9sbGVyKSk7XHJcbiAgICAgICAgICAgIHJ1bGVzID0gcnVsZXNPckNvbnRyb2xsZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb250cm9sbGVyID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkEgVmFsaWRhdGlvbkNvbnRyb2xsZXIgaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb250cm9sbGVyLnJlZ2lzdGVyQmluZGluZyhiaW5kaW5nLCB0YXJnZXQsIHJ1bGVzKTtcclxuICAgICAgICBiaW5kaW5nLnZhbGlkYXRpb25Db250cm9sbGVyID0gY29udHJvbGxlcjtcclxuICAgICAgICB2YXIgdHJpZ2dlciA9IHRoaXMuZ2V0VmFsaWRhdGVUcmlnZ2VyKGNvbnRyb2xsZXIpO1xyXG4gICAgICAgIHZhciBldmVudCA9ICh0cmlnZ2VyICYgdmFsaWRhdGVUcmlnZ2VyLmJsdXIpID09PSB2YWxpZGF0ZVRyaWdnZXIuYmx1ciA/ICdibHVyJ1xyXG4gICAgICAgICAgICA6ICh0cmlnZ2VyICYgdmFsaWRhdGVUcmlnZ2VyLmZvY3Vzb3V0KSA9PT0gdmFsaWRhdGVUcmlnZ2VyLmZvY3Vzb3V0ID8gJ2ZvY3Vzb3V0J1xyXG4gICAgICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgIHZhciBoYXNDaGFuZ2VUcmlnZ2VyID0gKHRyaWdnZXIgJiB2YWxpZGF0ZVRyaWdnZXIuY2hhbmdlKSA9PT0gdmFsaWRhdGVUcmlnZ2VyLmNoYW5nZTtcclxuICAgICAgICBiaW5kaW5nLmlzRGlydHkgPSAhaGFzQ2hhbmdlVHJpZ2dlcjtcclxuICAgICAgICAvLyB2YWxpZGF0ZWRPbmNlIGlzIHVzZWQgdG8gY29udHJvbCB3aGV0aGVyIGNvbnRyb2xsZXIgc2hvdWxkIHZhbGlkYXRlIHVwb24gdXNlciBpbnB1dFxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gYWx3YXlzIHRydWUgd2hlbiB2YWxpZGF0aW9uIHRyaWdnZXIgZG9lc24ndCBpbmNsdWRlIFwiYmx1clwiIGV2ZW50IChibHVyL2ZvY3Vzb3V0KVxyXG4gICAgICAgIC8vIGVsc2UgaXQgd2lsbCBiZSBzZXQgdG8gdHJ1ZSBhZnRlciAoYSkgdGhlIGZpcnN0IHVzZXIgaW5wdXQgJiBsb3NzIG9mIGZvY3VzIG9yIChiKSB2YWxpZGF0aW9uXHJcbiAgICAgICAgYmluZGluZy52YWxpZGF0ZWRPbmNlID0gaGFzQ2hhbmdlVHJpZ2dlciAmJiBldmVudCA9PT0gbnVsbDtcclxuICAgICAgICBpZiAoaGFzQ2hhbmdlVHJpZ2dlcikge1xyXG4gICAgICAgICAgICBiaW5kaW5nLnZiYlVwZGF0ZVNvdXJjZSA9IGJpbmRpbmcudXBkYXRlU291cmNlO1xyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6b25seS1hcnJvdy1mdW5jdGlvbnNcclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnNwYWNlLWJlZm9yZS1mdW5jdGlvbi1wYXJlblxyXG4gICAgICAgICAgICBiaW5kaW5nLnVwZGF0ZVNvdXJjZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YmJVcGRhdGVTb3VyY2UodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0RpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbGlkYXRlZE9uY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRpb25Db250cm9sbGVyLnZhbGlkYXRlQmluZGluZyh0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGV2ZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGJpbmRpbmcuZm9jdXNMb3NzSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnRhc2tRdWV1ZS5xdWV1ZU1pY3JvVGFzayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJpbmRpbmcuaXNEaXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLnZhbGlkYXRlQmluZGluZyhiaW5kaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmluZGluZy52YWxpZGF0ZWRPbmNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYmluZGluZy52YWxpZGF0aW9uVHJpZ2dlckV2ZW50ID0gZXZlbnQ7XHJcbiAgICAgICAgICAgIGJpbmRpbmcudmFsaWRhdGVUYXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBiaW5kaW5nLmZvY3VzTG9zc0hhbmRsZXIpO1xyXG4gICAgICAgICAgICBpZiAoaGFzQ2hhbmdlVHJpZ2dlcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHByb3BlcnR5TmFtZV8xID0gZ2V0UHJvcGVydHlJbmZvKGJpbmRpbmcuc291cmNlRXhwcmVzc2lvbiwgYmluZGluZy5zb3VyY2UpLnByb3BlcnR5TmFtZTtcclxuICAgICAgICAgICAgICAgIGJpbmRpbmcudmFsaWRhdGlvblN1YnNjcmlwdGlvbiA9IGNvbnRyb2xsZXIuc3Vic2NyaWJlKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYmluZGluZy52YWxpZGF0ZWRPbmNlICYmIGV2ZW50LnR5cGUgPT09ICd2YWxpZGF0ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmluZGluZy52YWxpZGF0ZWRPbmNlID0gZXZlbnQuZXJyb3JzLmZpbmRJbmRleChmdW5jdGlvbiAoZSkgeyByZXR1cm4gZS5wcm9wZXJ0eU5hbWUgPT09IHByb3BlcnR5TmFtZV8xOyB9KSA+IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0cmlnZ2VyICE9PSB2YWxpZGF0ZVRyaWdnZXIubWFudWFsKSB7XHJcbiAgICAgICAgICAgIGJpbmRpbmcuc3RhbmRhcmRVcGRhdGVUYXJnZXQgPSBiaW5kaW5nLnVwZGF0ZVRhcmdldDtcclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm9ubHktYXJyb3ctZnVuY3Rpb25zXHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpzcGFjZS1iZWZvcmUtZnVuY3Rpb24tcGFyZW5cclxuICAgICAgICAgICAgYmluZGluZy51cGRhdGVUYXJnZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRVcGRhdGVUYXJnZXQodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0aW9uQ29udHJvbGxlci5yZXNldEJpbmRpbmcodGhpcyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFZhbGlkYXRlQmluZGluZ0JlaGF2aW9yQmFzZS5wcm90b3R5cGUudW5iaW5kID0gZnVuY3Rpb24gKGJpbmRpbmcpIHtcclxuICAgICAgICAvLyByZXNldCB0aGUgYmluZGluZyB0byBpdCdzIG9yaWdpbmFsIHN0YXRlLlxyXG4gICAgICAgIGlmIChiaW5kaW5nLnZiYlVwZGF0ZVNvdXJjZSkge1xyXG4gICAgICAgICAgICBiaW5kaW5nLnVwZGF0ZVNvdXJjZSA9IGJpbmRpbmcudmJiVXBkYXRlU291cmNlO1xyXG4gICAgICAgICAgICBiaW5kaW5nLnZiYlVwZGF0ZVNvdXJjZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChiaW5kaW5nLnN0YW5kYXJkVXBkYXRlVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGJpbmRpbmcudXBkYXRlVGFyZ2V0ID0gYmluZGluZy5zdGFuZGFyZFVwZGF0ZVRhcmdldDtcclxuICAgICAgICAgICAgYmluZGluZy5zdGFuZGFyZFVwZGF0ZVRhcmdldCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChiaW5kaW5nLmZvY3VzTG9zc0hhbmRsZXIpIHtcclxuICAgICAgICAgICAgYmluZGluZy52YWxpZGF0ZVRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGJpbmRpbmcudmFsaWRhdGlvblRyaWdnZXJFdmVudCwgYmluZGluZy5mb2N1c0xvc3NIYW5kbGVyKTtcclxuICAgICAgICAgICAgYmluZGluZy5mb2N1c0xvc3NIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAgICAgYmluZGluZy52YWxpZGF0ZVRhcmdldCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChiaW5kaW5nLnZhbGlkYXRpb25TdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgYmluZGluZy52YWxpZGF0aW9uU3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgYmluZGluZy52YWxpZGF0aW9uU3Vic2NyaXB0aW9uID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgYmluZGluZy52YWxpZGF0aW9uQ29udHJvbGxlci51bnJlZ2lzdGVyQmluZGluZyhiaW5kaW5nKTtcclxuICAgICAgICBiaW5kaW5nLnZhbGlkYXRpb25Db250cm9sbGVyID0gbnVsbDtcclxuICAgICAgICBiaW5kaW5nLmlzRGlydHkgPSBudWxsO1xyXG4gICAgICAgIGJpbmRpbmcudmFsaWRhdGVkT25jZSA9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFZhbGlkYXRlQmluZGluZ0JlaGF2aW9yQmFzZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEJpbmRpbmcgYmVoYXZpb3IuIEluZGljYXRlcyB0aGUgYm91bmQgcHJvcGVydHkgc2hvdWxkIGJlIHZhbGlkYXRlZFxyXG4gKiB3aGVuIHRoZSB2YWxpZGF0ZSB0cmlnZ2VyIHNwZWNpZmllZCBieSB0aGUgYXNzb2NpYXRlZCBjb250cm9sbGVyJ3NcclxuICogdmFsaWRhdGVUcmlnZ2VyIHByb3BlcnR5IG9jY3Vycy5cclxuICovXHJcbnZhciBWYWxpZGF0ZUJpbmRpbmdCZWhhdmlvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhWYWxpZGF0ZUJpbmRpbmdCZWhhdmlvciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFZhbGlkYXRlQmluZGluZ0JlaGF2aW9yKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIFZhbGlkYXRlQmluZGluZ0JlaGF2aW9yLnByb3RvdHlwZS5nZXRWYWxpZGF0ZVRyaWdnZXIgPSBmdW5jdGlvbiAoY29udHJvbGxlcikge1xyXG4gICAgICAgIHJldHVybiBjb250cm9sbGVyLnZhbGlkYXRlVHJpZ2dlcjtcclxuICAgIH07XHJcbiAgICBWYWxpZGF0ZUJpbmRpbmdCZWhhdmlvci5pbmplY3QgPSBbVGFza1F1ZXVlXTtcclxuICAgIFZhbGlkYXRlQmluZGluZ0JlaGF2aW9yID0gX19kZWNvcmF0ZShbXHJcbiAgICAgICAgYmluZGluZ0JlaGF2aW9yKCd2YWxpZGF0ZScpXHJcbiAgICBdLCBWYWxpZGF0ZUJpbmRpbmdCZWhhdmlvcik7XHJcbiAgICByZXR1cm4gVmFsaWRhdGVCaW5kaW5nQmVoYXZpb3I7XHJcbn0oVmFsaWRhdGVCaW5kaW5nQmVoYXZpb3JCYXNlKSk7XHJcbi8qKlxyXG4gKiBCaW5kaW5nIGJlaGF2aW9yLiBJbmRpY2F0ZXMgdGhlIGJvdW5kIHByb3BlcnR5IHdpbGwgYmUgdmFsaWRhdGVkXHJcbiAqIG1hbnVhbGx5LCBieSBjYWxsaW5nIGNvbnRyb2xsZXIudmFsaWRhdGUoKS4gTm8gYXV0b21hdGljIHZhbGlkYXRpb25cclxuICogdHJpZ2dlcmVkIGJ5IGRhdGEtZW50cnkgb3IgYmx1ciB3aWxsIG9jY3VyLlxyXG4gKi9cclxudmFyIFZhbGlkYXRlTWFudWFsbHlCaW5kaW5nQmVoYXZpb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoVmFsaWRhdGVNYW51YWxseUJpbmRpbmdCZWhhdmlvciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFZhbGlkYXRlTWFudWFsbHlCaW5kaW5nQmVoYXZpb3IoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgVmFsaWRhdGVNYW51YWxseUJpbmRpbmdCZWhhdmlvci5wcm90b3R5cGUuZ2V0VmFsaWRhdGVUcmlnZ2VyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB2YWxpZGF0ZVRyaWdnZXIubWFudWFsO1xyXG4gICAgfTtcclxuICAgIFZhbGlkYXRlTWFudWFsbHlCaW5kaW5nQmVoYXZpb3IuaW5qZWN0ID0gW1Rhc2tRdWV1ZV07XHJcbiAgICBWYWxpZGF0ZU1hbnVhbGx5QmluZGluZ0JlaGF2aW9yID0gX19kZWNvcmF0ZShbXHJcbiAgICAgICAgYmluZGluZ0JlaGF2aW9yKCd2YWxpZGF0ZU1hbnVhbGx5JylcclxuICAgIF0sIFZhbGlkYXRlTWFudWFsbHlCaW5kaW5nQmVoYXZpb3IpO1xyXG4gICAgcmV0dXJuIFZhbGlkYXRlTWFudWFsbHlCaW5kaW5nQmVoYXZpb3I7XHJcbn0oVmFsaWRhdGVCaW5kaW5nQmVoYXZpb3JCYXNlKSk7XHJcbi8qKlxyXG4gKiBCaW5kaW5nIGJlaGF2aW9yLiBJbmRpY2F0ZXMgdGhlIGJvdW5kIHByb3BlcnR5IHNob3VsZCBiZSB2YWxpZGF0ZWRcclxuICogd2hlbiB0aGUgYXNzb2NpYXRlZCBlbGVtZW50IGJsdXJzLlxyXG4gKi9cclxudmFyIFZhbGlkYXRlT25CbHVyQmluZGluZ0JlaGF2aW9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFZhbGlkYXRlT25CbHVyQmluZGluZ0JlaGF2aW9yLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVmFsaWRhdGVPbkJsdXJCaW5kaW5nQmVoYXZpb3IoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgVmFsaWRhdGVPbkJsdXJCaW5kaW5nQmVoYXZpb3IucHJvdG90eXBlLmdldFZhbGlkYXRlVHJpZ2dlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdmFsaWRhdGVUcmlnZ2VyLmJsdXI7XHJcbiAgICB9O1xyXG4gICAgVmFsaWRhdGVPbkJsdXJCaW5kaW5nQmVoYXZpb3IuaW5qZWN0ID0gW1Rhc2tRdWV1ZV07XHJcbiAgICBWYWxpZGF0ZU9uQmx1ckJpbmRpbmdCZWhhdmlvciA9IF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGJpbmRpbmdCZWhhdmlvcigndmFsaWRhdGVPbkJsdXInKVxyXG4gICAgXSwgVmFsaWRhdGVPbkJsdXJCaW5kaW5nQmVoYXZpb3IpO1xyXG4gICAgcmV0dXJuIFZhbGlkYXRlT25CbHVyQmluZGluZ0JlaGF2aW9yO1xyXG59KFZhbGlkYXRlQmluZGluZ0JlaGF2aW9yQmFzZSkpO1xyXG4vKipcclxuICogQmluZGluZyBiZWhhdmlvci4gSW5kaWNhdGVzIHRoZSBib3VuZCBwcm9wZXJ0eSBzaG91bGQgYmUgdmFsaWRhdGVkXHJcbiAqIHdoZW4gdGhlIGFzc29jaWF0ZWQgZWxlbWVudCBpcyBjaGFuZ2VkIGJ5IHRoZSB1c2VyLCBjYXVzaW5nIGEgY2hhbmdlXHJcbiAqIHRvIHRoZSBtb2RlbC5cclxuICovXHJcbnZhciBWYWxpZGF0ZU9uQ2hhbmdlQmluZGluZ0JlaGF2aW9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFZhbGlkYXRlT25DaGFuZ2VCaW5kaW5nQmVoYXZpb3IsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBWYWxpZGF0ZU9uQ2hhbmdlQmluZGluZ0JlaGF2aW9yKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIFZhbGlkYXRlT25DaGFuZ2VCaW5kaW5nQmVoYXZpb3IucHJvdG90eXBlLmdldFZhbGlkYXRlVHJpZ2dlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdmFsaWRhdGVUcmlnZ2VyLmNoYW5nZTtcclxuICAgIH07XHJcbiAgICBWYWxpZGF0ZU9uQ2hhbmdlQmluZGluZ0JlaGF2aW9yLmluamVjdCA9IFtUYXNrUXVldWVdO1xyXG4gICAgVmFsaWRhdGVPbkNoYW5nZUJpbmRpbmdCZWhhdmlvciA9IF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGJpbmRpbmdCZWhhdmlvcigndmFsaWRhdGVPbkNoYW5nZScpXHJcbiAgICBdLCBWYWxpZGF0ZU9uQ2hhbmdlQmluZGluZ0JlaGF2aW9yKTtcclxuICAgIHJldHVybiBWYWxpZGF0ZU9uQ2hhbmdlQmluZGluZ0JlaGF2aW9yO1xyXG59KFZhbGlkYXRlQmluZGluZ0JlaGF2aW9yQmFzZSkpO1xyXG4vKipcclxuICogQmluZGluZyBiZWhhdmlvci4gSW5kaWNhdGVzIHRoZSBib3VuZCBwcm9wZXJ0eSBzaG91bGQgYmUgdmFsaWRhdGVkXHJcbiAqIHdoZW4gdGhlIGFzc29jaWF0ZWQgZWxlbWVudCBibHVycyBvciBpcyBjaGFuZ2VkIGJ5IHRoZSB1c2VyLCBjYXVzaW5nXHJcbiAqIGEgY2hhbmdlIHRvIHRoZSBtb2RlbC5cclxuICovXHJcbnZhciBWYWxpZGF0ZU9uQ2hhbmdlT3JCbHVyQmluZGluZ0JlaGF2aW9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFZhbGlkYXRlT25DaGFuZ2VPckJsdXJCaW5kaW5nQmVoYXZpb3IsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBWYWxpZGF0ZU9uQ2hhbmdlT3JCbHVyQmluZGluZ0JlaGF2aW9yKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIFZhbGlkYXRlT25DaGFuZ2VPckJsdXJCaW5kaW5nQmVoYXZpb3IucHJvdG90eXBlLmdldFZhbGlkYXRlVHJpZ2dlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdmFsaWRhdGVUcmlnZ2VyLmNoYW5nZU9yQmx1cjtcclxuICAgIH07XHJcbiAgICBWYWxpZGF0ZU9uQ2hhbmdlT3JCbHVyQmluZGluZ0JlaGF2aW9yLmluamVjdCA9IFtUYXNrUXVldWVdO1xyXG4gICAgVmFsaWRhdGVPbkNoYW5nZU9yQmx1ckJpbmRpbmdCZWhhdmlvciA9IF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGJpbmRpbmdCZWhhdmlvcigndmFsaWRhdGVPbkNoYW5nZU9yQmx1cicpXHJcbiAgICBdLCBWYWxpZGF0ZU9uQ2hhbmdlT3JCbHVyQmluZGluZ0JlaGF2aW9yKTtcclxuICAgIHJldHVybiBWYWxpZGF0ZU9uQ2hhbmdlT3JCbHVyQmluZGluZ0JlaGF2aW9yO1xyXG59KFZhbGlkYXRlQmluZGluZ0JlaGF2aW9yQmFzZSkpO1xyXG52YXIgVmFsaWRhdGVPbkZvY3Vzb3V0QmluZGluZ0JlaGF2aW9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFZhbGlkYXRlT25Gb2N1c291dEJpbmRpbmdCZWhhdmlvciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFZhbGlkYXRlT25Gb2N1c291dEJpbmRpbmdCZWhhdmlvcigpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBWYWxpZGF0ZU9uRm9jdXNvdXRCaW5kaW5nQmVoYXZpb3IucHJvdG90eXBlLmdldFZhbGlkYXRlVHJpZ2dlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdmFsaWRhdGVUcmlnZ2VyLmZvY3Vzb3V0O1xyXG4gICAgfTtcclxuICAgIFZhbGlkYXRlT25Gb2N1c291dEJpbmRpbmdCZWhhdmlvci5pbmplY3QgPSBbVGFza1F1ZXVlXTtcclxuICAgIFZhbGlkYXRlT25Gb2N1c291dEJpbmRpbmdCZWhhdmlvciA9IF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGJpbmRpbmdCZWhhdmlvcigndmFsaWRhdGVPbkZvY3Vzb3V0JylcclxuICAgIF0sIFZhbGlkYXRlT25Gb2N1c291dEJpbmRpbmdCZWhhdmlvcik7XHJcbiAgICByZXR1cm4gVmFsaWRhdGVPbkZvY3Vzb3V0QmluZGluZ0JlaGF2aW9yO1xyXG59KFZhbGlkYXRlQmluZGluZ0JlaGF2aW9yQmFzZSkpO1xyXG52YXIgVmFsaWRhdGVPbkNoYW5nZU9yRm9jdXNvdXRCaW5kaW5nQmVoYXZpb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoVmFsaWRhdGVPbkNoYW5nZU9yRm9jdXNvdXRCaW5kaW5nQmVoYXZpb3IsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBWYWxpZGF0ZU9uQ2hhbmdlT3JGb2N1c291dEJpbmRpbmdCZWhhdmlvcigpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBWYWxpZGF0ZU9uQ2hhbmdlT3JGb2N1c291dEJpbmRpbmdCZWhhdmlvci5wcm90b3R5cGUuZ2V0VmFsaWRhdGVUcmlnZ2VyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB2YWxpZGF0ZVRyaWdnZXIuY2hhbmdlT3JGb2N1c291dDtcclxuICAgIH07XHJcbiAgICBWYWxpZGF0ZU9uQ2hhbmdlT3JGb2N1c291dEJpbmRpbmdCZWhhdmlvci5pbmplY3QgPSBbVGFza1F1ZXVlXTtcclxuICAgIFZhbGlkYXRlT25DaGFuZ2VPckZvY3Vzb3V0QmluZGluZ0JlaGF2aW9yID0gX19kZWNvcmF0ZShbXHJcbiAgICAgICAgYmluZGluZ0JlaGF2aW9yKCd2YWxpZGF0ZU9uQ2hhbmdlT3JGb2N1c291dCcpXHJcbiAgICBdLCBWYWxpZGF0ZU9uQ2hhbmdlT3JGb2N1c291dEJpbmRpbmdCZWhhdmlvcik7XHJcbiAgICByZXR1cm4gVmFsaWRhdGVPbkNoYW5nZU9yRm9jdXNvdXRCaW5kaW5nQmVoYXZpb3I7XHJcbn0oVmFsaWRhdGVCaW5kaW5nQmVoYXZpb3JCYXNlKSk7XG5cbi8qKlxyXG4gKiBDcmVhdGVzIFZhbGlkYXRpb25Db250cm9sbGVyIGluc3RhbmNlcy5cclxuICovXHJcbnZhciBWYWxpZGF0aW9uQ29udHJvbGxlckZhY3RvcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBWYWxpZGF0aW9uQ29udHJvbGxlckZhY3RvcnkoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcbiAgICBWYWxpZGF0aW9uQ29udHJvbGxlckZhY3RvcnkuZ2V0ID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmFsaWRhdGlvbkNvbnRyb2xsZXJGYWN0b3J5KGNvbnRhaW5lcik7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGNvbnRyb2xsZXIgaW5zdGFuY2UuXHJcbiAgICAgKi9cclxuICAgIFZhbGlkYXRpb25Db250cm9sbGVyRmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKHZhbGlkYXRvcikge1xyXG4gICAgICAgIGlmICghdmFsaWRhdG9yKSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRvciA9IHRoaXMuY29udGFpbmVyLmdldChWYWxpZGF0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcHJvcGVydHlQYXJzZXIgPSB0aGlzLmNvbnRhaW5lci5nZXQoUHJvcGVydHlBY2Nlc3NvclBhcnNlcik7XHJcbiAgICAgICAgdmFyIGNvbmZpZyA9IHRoaXMuY29udGFpbmVyLmdldChHbG9iYWxWYWxpZGF0aW9uQ29uZmlndXJhdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWYWxpZGF0aW9uQ29udHJvbGxlcih2YWxpZGF0b3IsIHByb3BlcnR5UGFyc2VyLCBjb25maWcpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBjb250cm9sbGVyIGFuZCByZWdpc3RlcnMgaXQgaW4gdGhlIGN1cnJlbnQgZWxlbWVudCdzIGNvbnRhaW5lciBzbyB0aGF0IGl0J3NcclxuICAgICAqIGF2YWlsYWJsZSB0byB0aGUgdmFsaWRhdGUgYmluZGluZyBiZWhhdmlvciBhbmQgcmVuZGVyZXJzLlxyXG4gICAgICovXHJcbiAgICBWYWxpZGF0aW9uQ29udHJvbGxlckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZUZvckN1cnJlbnRTY29wZSA9IGZ1bmN0aW9uICh2YWxpZGF0b3IpIHtcclxuICAgICAgICB2YXIgY29udHJvbGxlciA9IHRoaXMuY3JlYXRlKHZhbGlkYXRvcik7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXJJbnN0YW5jZShWYWxpZGF0aW9uQ29udHJvbGxlciwgY29udHJvbGxlcik7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFZhbGlkYXRpb25Db250cm9sbGVyRmFjdG9yeTtcclxufSgpKTtcclxuVmFsaWRhdGlvbkNvbnRyb2xsZXJGYWN0b3J5Wydwcm90b2NvbDphdXJlbGlhOnJlc29sdmVyJ10gPSB0cnVlO1xuXG52YXIgVmFsaWRhdGlvbkVycm9yc0N1c3RvbUF0dHJpYnV0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFZhbGlkYXRpb25FcnJvcnNDdXN0b21BdHRyaWJ1dGUoYm91bmRhcnlFbGVtZW50LCBjb250cm9sbGVyQWNjZXNzb3IpIHtcclxuICAgICAgICB0aGlzLmJvdW5kYXJ5RWxlbWVudCA9IGJvdW5kYXJ5RWxlbWVudDtcclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXJBY2Nlc3NvciA9IGNvbnRyb2xsZXJBY2Nlc3NvcjtcclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZXJyb3JzID0gW107XHJcbiAgICAgICAgdGhpcy5lcnJvcnNJbnRlcm5hbCA9IFtdO1xyXG4gICAgfVxyXG4gICAgVmFsaWRhdGlvbkVycm9yc0N1c3RvbUF0dHJpYnV0ZS5pbmplY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtET00uRWxlbWVudCwgTGF6eS5vZihWYWxpZGF0aW9uQ29udHJvbGxlcildO1xyXG4gICAgfTtcclxuICAgIFZhbGlkYXRpb25FcnJvcnNDdXN0b21BdHRyaWJ1dGUucHJvdG90eXBlLnNvcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5lcnJvcnNJbnRlcm5hbC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIGlmIChhLnRhcmdldHNbMF0gPT09IGIudGFyZ2V0c1swXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWJpdHdpc2VcclxuICAgICAgICAgICAgcmV0dXJuIGEudGFyZ2V0c1swXS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiLnRhcmdldHNbMF0pICYgMiA/IDEgOiAtMTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBWYWxpZGF0aW9uRXJyb3JzQ3VzdG9tQXR0cmlidXRlLnByb3RvdHlwZS5pbnRlcmVzdGluZ0VsZW1lbnRzID0gZnVuY3Rpb24gKGVsZW1lbnRzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gZWxlbWVudHMuZmlsdGVyKGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5ib3VuZGFyeUVsZW1lbnQuY29udGFpbnMoZSk7IH0pO1xyXG4gICAgfTtcclxuICAgIFZhbGlkYXRpb25FcnJvcnNDdXN0b21BdHRyaWJ1dGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChpbnN0cnVjdGlvbikge1xyXG4gICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzXzEuZXJyb3JzSW50ZXJuYWwuZmluZEluZGV4KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmVycm9yID09PSByZXN1bHQ7IH0pO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzXzEuZXJyb3JzSW50ZXJuYWwuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHRoaXNfMSA9IHRoaXM7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGluc3RydWN0aW9uLnVucmVuZGVyOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gX2FbX2ldLnJlc3VsdDtcclxuICAgICAgICAgICAgX2xvb3BfMShyZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBfYiA9IDAsIF9jID0gaW5zdHJ1Y3Rpb24ucmVuZGVyOyBfYiA8IF9jLmxlbmd0aDsgX2IrKykge1xyXG4gICAgICAgICAgICB2YXIgX2QgPSBfY1tfYl0sIHJlc3VsdCA9IF9kLnJlc3VsdCwgZWxlbWVudHMgPSBfZC5lbGVtZW50cztcclxuICAgICAgICAgICAgaWYgKHJlc3VsdC52YWxpZCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHRhcmdldHMgPSB0aGlzLmludGVyZXN0aW5nRWxlbWVudHMoZWxlbWVudHMpO1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JzSW50ZXJuYWwucHVzaCh7IGVycm9yOiByZXN1bHQsIHRhcmdldHM6IHRhcmdldHMgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zb3J0KCk7XHJcbiAgICAgICAgdGhpcy5lcnJvcnMgPSB0aGlzLmVycm9yc0ludGVybmFsO1xyXG4gICAgfTtcclxuICAgIFZhbGlkYXRpb25FcnJvcnNDdXN0b21BdHRyaWJ1dGUucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRyb2xsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyID0gdGhpcy5jb250cm9sbGVyQWNjZXNzb3IoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhpcyB3aWxsIGNhbGwgcmVuZGVyKCkgd2l0aCB0aGUgc2lkZS1lZmZlY3Qgb2YgdXBkYXRpbmcgdGhpcy5lcnJvcnNcclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXIuYWRkUmVuZGVyZXIodGhpcyk7XHJcbiAgICB9O1xyXG4gICAgVmFsaWRhdGlvbkVycm9yc0N1c3RvbUF0dHJpYnV0ZS5wcm90b3R5cGUudW5iaW5kID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLnJlbW92ZVJlbmRlcmVyKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBfX2RlY29yYXRlKFtcclxuICAgICAgICBiaW5kYWJsZSh7IGRlZmF1bHRCaW5kaW5nTW9kZTogYmluZGluZ01vZGUub25lV2F5IH0pXHJcbiAgICBdLCBWYWxpZGF0aW9uRXJyb3JzQ3VzdG9tQXR0cmlidXRlLnByb3RvdHlwZSwgXCJjb250cm9sbGVyXCIsIHZvaWQgMCk7XHJcbiAgICBfX2RlY29yYXRlKFtcclxuICAgICAgICBiaW5kYWJsZSh7IHByaW1hcnlQcm9wZXJ0eTogdHJ1ZSwgZGVmYXVsdEJpbmRpbmdNb2RlOiBiaW5kaW5nTW9kZS50d29XYXkgfSlcclxuICAgIF0sIFZhbGlkYXRpb25FcnJvcnNDdXN0b21BdHRyaWJ1dGUucHJvdG90eXBlLCBcImVycm9yc1wiLCB2b2lkIDApO1xyXG4gICAgVmFsaWRhdGlvbkVycm9yc0N1c3RvbUF0dHJpYnV0ZSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIGN1c3RvbUF0dHJpYnV0ZSgndmFsaWRhdGlvbi1lcnJvcnMnKVxyXG4gICAgXSwgVmFsaWRhdGlvbkVycm9yc0N1c3RvbUF0dHJpYnV0ZSk7XHJcbiAgICByZXR1cm4gVmFsaWRhdGlvbkVycm9yc0N1c3RvbUF0dHJpYnV0ZTtcclxufSgpKTtcblxudmFyIFZhbGlkYXRpb25SZW5kZXJlckN1c3RvbUF0dHJpYnV0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFZhbGlkYXRpb25SZW5kZXJlckN1c3RvbUF0dHJpYnV0ZSgpIHtcclxuICAgIH1cclxuICAgIFZhbGlkYXRpb25SZW5kZXJlckN1c3RvbUF0dHJpYnV0ZS5wcm90b3R5cGUuY3JlYXRlZCA9IGZ1bmN0aW9uICh2aWV3KSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSB2aWV3LmNvbnRhaW5lcjtcclxuICAgIH07XHJcbiAgICBWYWxpZGF0aW9uUmVuZGVyZXJDdXN0b21BdHRyaWJ1dGUucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gdGhpcy5jb250YWluZXIuZ2V0KFZhbGlkYXRpb25Db250cm9sbGVyKTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gdGhpcy5jb250YWluZXIuZ2V0KHRoaXMudmFsdWUpO1xyXG4gICAgICAgIHRoaXMuY29udHJvbGxlci5hZGRSZW5kZXJlcih0aGlzLnJlbmRlcmVyKTtcclxuICAgIH07XHJcbiAgICBWYWxpZGF0aW9uUmVuZGVyZXJDdXN0b21BdHRyaWJ1dGUucHJvdG90eXBlLnVuYmluZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXIucmVtb3ZlUmVuZGVyZXIodGhpcy5yZW5kZXJlcik7XHJcbiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbnVsbDtcclxuICAgIH07XHJcbiAgICBWYWxpZGF0aW9uUmVuZGVyZXJDdXN0b21BdHRyaWJ1dGUgPSBfX2RlY29yYXRlKFtcclxuICAgICAgICBjdXN0b21BdHRyaWJ1dGUoJ3ZhbGlkYXRpb24tcmVuZGVyZXInKVxyXG4gICAgXSwgVmFsaWRhdGlvblJlbmRlcmVyQ3VzdG9tQXR0cmlidXRlKTtcclxuICAgIHJldHVybiBWYWxpZGF0aW9uUmVuZGVyZXJDdXN0b21BdHRyaWJ1dGU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBQYXJ0IG9mIHRoZSBmbHVlbnQgcnVsZSBBUEkuIEVuYWJsZXMgY3VzdG9taXppbmcgcHJvcGVydHkgcnVsZXMuXHJcbiAqL1xyXG52YXIgRmx1ZW50UnVsZUN1c3RvbWl6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGbHVlbnRSdWxlQ3VzdG9taXplcihwcm9wZXJ0eSwgY29uZGl0aW9uLCBjb25maWcsIGZsdWVudEVuc3VyZSwgZmx1ZW50UnVsZXMsIHBhcnNlcnMpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB0aGlzLmZsdWVudEVuc3VyZSA9IGZsdWVudEVuc3VyZTtcclxuICAgICAgICB0aGlzLmZsdWVudFJ1bGVzID0gZmx1ZW50UnVsZXM7XHJcbiAgICAgICAgdGhpcy5wYXJzZXJzID0gcGFyc2VycztcclxuICAgICAgICB0aGlzLnJ1bGUgPSB7XHJcbiAgICAgICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSxcclxuICAgICAgICAgICAgY29uZGl0aW9uOiBjb25kaXRpb24sXHJcbiAgICAgICAgICAgIGNvbmZpZzogY29uZmlnLFxyXG4gICAgICAgICAgICB3aGVuOiBudWxsLFxyXG4gICAgICAgICAgICBtZXNzYWdlS2V5OiAnZGVmYXVsdCcsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IG51bGwsXHJcbiAgICAgICAgICAgIHNlcXVlbmNlOiBmbHVlbnRSdWxlcy5zZXF1ZW5jZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5mbHVlbnRFbnN1cmUuX2FkZFJ1bGUodGhpcy5ydWxlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGUgc3Vic2VxdWVudCBydWxlcyBhZnRlciBwcmV2aW91c2x5IGRlY2xhcmVkIHJ1bGVzIGhhdmVcclxuICAgICAqIGJlZW4gdmFsaWRhdGVkIHN1Y2Nlc3NmdWxseS4gVXNlIHRvIHBvc3Rwb25lIHZhbGlkYXRpb24gb2YgY29zdGx5XHJcbiAgICAgKiBydWxlcyB1bnRpbCBsZXNzIGV4cGVuc2l2ZSBydWxlcyBwYXNzIHZhbGlkYXRpb24uXHJcbiAgICAgKi9cclxuICAgIEZsdWVudFJ1bGVDdXN0b21pemVyLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZmx1ZW50UnVsZXMuc2VxdWVuY2UrKztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNwZWNpZmllcyB0aGUga2V5IHRvIHVzZSB3aGVuIGxvb2tpbmcgdXAgdGhlIHJ1bGUncyB2YWxpZGF0aW9uIG1lc3NhZ2UuXHJcbiAgICAgKi9cclxuICAgIEZsdWVudFJ1bGVDdXN0b21pemVyLnByb3RvdHlwZS53aXRoTWVzc2FnZUtleSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB0aGlzLnJ1bGUubWVzc2FnZUtleSA9IGtleTtcclxuICAgICAgICB0aGlzLnJ1bGUubWVzc2FnZSA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTcGVjaWZpZXMgcnVsZSdzIHZhbGlkYXRpb24gbWVzc2FnZS5cclxuICAgICAqL1xyXG4gICAgRmx1ZW50UnVsZUN1c3RvbWl6ZXIucHJvdG90eXBlLndpdGhNZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgICAgICB0aGlzLnJ1bGUubWVzc2FnZUtleSA9ICdjdXN0b20nO1xyXG4gICAgICAgIHRoaXMucnVsZS5tZXNzYWdlID0gdGhpcy5wYXJzZXJzLm1lc3NhZ2UucGFyc2UobWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTcGVjaWZpZXMgYSBjb25kaXRpb24gdGhhdCBtdXN0IGJlIG1ldCBiZWZvcmUgYXR0ZW1wdGluZyB0byB2YWxpZGF0ZSB0aGUgcnVsZS5cclxuICAgICAqIEBwYXJhbSBjb25kaXRpb24gQSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgdGhlIG9iamVjdCBhcyBhIHBhcmFtZXRlciBhbmQgcmV0dXJucyB0cnVlXHJcbiAgICAgKiBvciBmYWxzZSB3aGV0aGVyIHRoZSBydWxlIHNob3VsZCBiZSBldmFsdWF0ZWQuXHJcbiAgICAgKi9cclxuICAgIEZsdWVudFJ1bGVDdXN0b21pemVyLnByb3RvdHlwZS53aGVuID0gZnVuY3Rpb24gKGNvbmRpdGlvbikge1xyXG4gICAgICAgIHRoaXMucnVsZS53aGVuID0gY29uZGl0aW9uO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGFncyB0aGUgcnVsZSBpbnN0YW5jZSwgZW5hYmxpbmcgdGhlIHJ1bGUgdG8gYmUgZm91bmQgZWFzaWx5XHJcbiAgICAgKiB1c2luZyBWYWxpZGF0aW9uUnVsZXMudGFnZ2VkUnVsZXMocnVsZXMsIHRhZylcclxuICAgICAqL1xyXG4gICAgRmx1ZW50UnVsZUN1c3RvbWl6ZXIucHJvdG90eXBlLnRhZyA9IGZ1bmN0aW9uICh0YWcpIHtcclxuICAgICAgICB0aGlzLnJ1bGUudGFnID0gdGFnO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIC8vLy8vIEZsdWVudEVuc3VyZSBBUElzIC8vLy8vXHJcbiAgICAvKipcclxuICAgICAqIFRhcmdldCBhIHByb3BlcnR5IHdpdGggdmFsaWRhdGlvbiBydWxlcy5cclxuICAgICAqIEBwYXJhbSBwcm9wZXJ0eSBUaGUgcHJvcGVydHkgdG8gdGFyZ2V0LiBDYW4gYmUgdGhlIHByb3BlcnR5IG5hbWUgb3IgYSBwcm9wZXJ0eSBhY2Nlc3NvciBmdW5jdGlvbi5cclxuICAgICAqL1xyXG4gICAgRmx1ZW50UnVsZUN1c3RvbWl6ZXIucHJvdG90eXBlLmVuc3VyZSA9IGZ1bmN0aW9uIChzdWJqZWN0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmx1ZW50RW5zdXJlLmVuc3VyZShzdWJqZWN0KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRhcmdldHMgYW4gb2JqZWN0IHdpdGggdmFsaWRhdGlvbiBydWxlcy5cclxuICAgICAqL1xyXG4gICAgRmx1ZW50UnVsZUN1c3RvbWl6ZXIucHJvdG90eXBlLmVuc3VyZU9iamVjdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mbHVlbnRFbnN1cmUuZW5zdXJlT2JqZWN0KCk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZsdWVudFJ1bGVDdXN0b21pemVyLnByb3RvdHlwZSwgXCJydWxlc1wiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUnVsZXMgdGhhdCBoYXZlIGJlZW4gZGVmaW5lZCB1c2luZyB0aGUgZmx1ZW50IEFQSS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmx1ZW50RW5zdXJlLnJ1bGVzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaWVzIHRoZSBydWxlcyB0byBhIGNsYXNzIG9yIG9iamVjdCwgbWFraW5nIHRoZW0gZGlzY292ZXJhYmxlIGJ5IHRoZSBTdGFuZGFyZFZhbGlkYXRvci5cclxuICAgICAqIEBwYXJhbSB0YXJnZXQgQSBjbGFzcyBvciBvYmplY3QuXHJcbiAgICAgKi9cclxuICAgIEZsdWVudFJ1bGVDdXN0b21pemVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mbHVlbnRFbnN1cmUub24odGFyZ2V0KTtcclxuICAgIH07XHJcbiAgICAvLy8vLy8vLy8gRmx1ZW50UnVsZXMgQVBJcyAvLy8vLy8vLy9cclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyBhbiBhZC1ob2MgcnVsZSBmdW5jdGlvbiB0byB0aGUgZW5zdXJlZCBwcm9wZXJ0eSBvciBvYmplY3QuXHJcbiAgICAgKiBAcGFyYW0gY29uZGl0aW9uIFRoZSBmdW5jdGlvbiB0byB2YWxpZGF0ZSB0aGUgcnVsZS5cclxuICAgICAqIFdpbGwgYmUgY2FsbGVkIHdpdGggdHdvIGFyZ3VtZW50cywgdGhlIHByb3BlcnR5IHZhbHVlIGFuZCB0aGUgb2JqZWN0LlxyXG4gICAgICogU2hvdWxkIHJldHVybiBhIGJvb2xlYW4gb3IgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBib29sZWFuLlxyXG4gICAgICovXHJcbiAgICBGbHVlbnRSdWxlQ3VzdG9taXplci5wcm90b3R5cGUuc2F0aXNmaWVzID0gZnVuY3Rpb24gKGNvbmRpdGlvbiwgY29uZmlnKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmx1ZW50UnVsZXMuc2F0aXNmaWVzKGNvbmRpdGlvbiwgY29uZmlnKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgYSBydWxlIGJ5IG5hbWUuXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgY3VzdG9tIG9yIHN0YW5kYXJkIHJ1bGUuXHJcbiAgICAgKiBAcGFyYW0gYXJncyBUaGUgcnVsZSdzIGFyZ3VtZW50cy5cclxuICAgICAqL1xyXG4gICAgRmx1ZW50UnVsZUN1c3RvbWl6ZXIucHJvdG90eXBlLnNhdGlzZmllc1J1bGUgPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoX2EgPSB0aGlzLmZsdWVudFJ1bGVzKS5zYXRpc2ZpZXNSdWxlLmFwcGx5KF9hLCBfX3NwcmVhZEFycmF5cyhbbmFtZV0sIGFyZ3MpKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgdGhlIFwicmVxdWlyZWRcIiBydWxlIHRvIHRoZSBwcm9wZXJ0eS5cclxuICAgICAqIFRoZSB2YWx1ZSBjYW5ub3QgYmUgbnVsbCwgdW5kZWZpbmVkIG9yIHdoaXRlc3BhY2UuXHJcbiAgICAgKi9cclxuICAgIEZsdWVudFJ1bGVDdXN0b21pemVyLnByb3RvdHlwZS5yZXF1aXJlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mbHVlbnRSdWxlcy5yZXF1aXJlZCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyB0aGUgXCJtYXRjaGVzXCIgcnVsZSB0byB0aGUgcHJvcGVydHkuXHJcbiAgICAgKiBWYWx1ZSBtdXN0IG1hdGNoIHRoZSBzcGVjaWZpZWQgcmVndWxhciBleHByZXNzaW9uLlxyXG4gICAgICogbnVsbCwgdW5kZWZpbmVkIGFuZCBlbXB0eS1zdHJpbmcgdmFsdWVzIGFyZSBjb25zaWRlcmVkIHZhbGlkLlxyXG4gICAgICovXHJcbiAgICBGbHVlbnRSdWxlQ3VzdG9taXplci5wcm90b3R5cGUubWF0Y2hlcyA9IGZ1bmN0aW9uIChyZWdleCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZsdWVudFJ1bGVzLm1hdGNoZXMocmVnZXgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyB0aGUgXCJlbWFpbFwiIHJ1bGUgdG8gdGhlIHByb3BlcnR5LlxyXG4gICAgICogbnVsbCwgdW5kZWZpbmVkIGFuZCBlbXB0eS1zdHJpbmcgdmFsdWVzIGFyZSBjb25zaWRlcmVkIHZhbGlkLlxyXG4gICAgICovXHJcbiAgICBGbHVlbnRSdWxlQ3VzdG9taXplci5wcm90b3R5cGUuZW1haWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmx1ZW50UnVsZXMuZW1haWwoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgdGhlIFwibWluTGVuZ3RoXCIgU1RSSU5HIHZhbGlkYXRpb24gcnVsZSB0byB0aGUgcHJvcGVydHkuXHJcbiAgICAgKiBudWxsLCB1bmRlZmluZWQgYW5kIGVtcHR5LXN0cmluZyB2YWx1ZXMgYXJlIGNvbnNpZGVyZWQgdmFsaWQuXHJcbiAgICAgKi9cclxuICAgIEZsdWVudFJ1bGVDdXN0b21pemVyLnByb3RvdHlwZS5taW5MZW5ndGggPSBmdW5jdGlvbiAobGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmx1ZW50UnVsZXMubWluTGVuZ3RoKGxlbmd0aCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaWVzIHRoZSBcIm1heExlbmd0aFwiIFNUUklORyB2YWxpZGF0aW9uIHJ1bGUgdG8gdGhlIHByb3BlcnR5LlxyXG4gICAgICogbnVsbCwgdW5kZWZpbmVkIGFuZCBlbXB0eS1zdHJpbmcgdmFsdWVzIGFyZSBjb25zaWRlcmVkIHZhbGlkLlxyXG4gICAgICovXHJcbiAgICBGbHVlbnRSdWxlQ3VzdG9taXplci5wcm90b3R5cGUubWF4TGVuZ3RoID0gZnVuY3Rpb24gKGxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZsdWVudFJ1bGVzLm1heExlbmd0aChsZW5ndGgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyB0aGUgXCJtaW5JdGVtc1wiIEFSUkFZIHZhbGlkYXRpb24gcnVsZSB0byB0aGUgcHJvcGVydHkuXHJcbiAgICAgKiBudWxsIGFuZCB1bmRlZmluZWQgdmFsdWVzIGFyZSBjb25zaWRlcmVkIHZhbGlkLlxyXG4gICAgICovXHJcbiAgICBGbHVlbnRSdWxlQ3VzdG9taXplci5wcm90b3R5cGUubWluSXRlbXMgPSBmdW5jdGlvbiAoY291bnQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mbHVlbnRSdWxlcy5taW5JdGVtcyhjb3VudCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaWVzIHRoZSBcIm1heEl0ZW1zXCIgQVJSQVkgdmFsaWRhdGlvbiBydWxlIHRvIHRoZSBwcm9wZXJ0eS5cclxuICAgICAqIG51bGwgYW5kIHVuZGVmaW5lZCB2YWx1ZXMgYXJlIGNvbnNpZGVyZWQgdmFsaWQuXHJcbiAgICAgKi9cclxuICAgIEZsdWVudFJ1bGVDdXN0b21pemVyLnByb3RvdHlwZS5tYXhJdGVtcyA9IGZ1bmN0aW9uIChjb3VudCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZsdWVudFJ1bGVzLm1heEl0ZW1zKGNvdW50KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgdGhlIFwibWluXCIgTlVNQkVSIHZhbGlkYXRpb24gcnVsZSB0byB0aGUgcHJvcGVydHkuXHJcbiAgICAgKiBWYWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgc3BlY2lmaWVkIGNvbnN0cmFpbnQuXHJcbiAgICAgKiBudWxsIGFuZCB1bmRlZmluZWQgdmFsdWVzIGFyZSBjb25zaWRlcmVkIHZhbGlkLlxyXG4gICAgICovXHJcbiAgICBGbHVlbnRSdWxlQ3VzdG9taXplci5wcm90b3R5cGUubWluID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmx1ZW50UnVsZXMubWluKHZhbHVlKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgdGhlIFwibWF4XCIgTlVNQkVSIHZhbGlkYXRpb24gcnVsZSB0byB0aGUgcHJvcGVydHkuXHJcbiAgICAgKiBWYWx1ZSBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgc3BlY2lmaWVkIGNvbnN0cmFpbnQuXHJcbiAgICAgKiBudWxsIGFuZCB1bmRlZmluZWQgdmFsdWVzIGFyZSBjb25zaWRlcmVkIHZhbGlkLlxyXG4gICAgICovXHJcbiAgICBGbHVlbnRSdWxlQ3VzdG9taXplci5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmx1ZW50UnVsZXMubWF4KHZhbHVlKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgdGhlIFwicmFuZ2VcIiBOVU1CRVIgdmFsaWRhdGlvbiBydWxlIHRvIHRoZSBwcm9wZXJ0eS5cclxuICAgICAqIFZhbHVlIG11c3QgYmUgYmV0d2VlbiBvciBlcXVhbCB0byB0aGUgc3BlY2lmaWVkIG1pbiBhbmQgbWF4LlxyXG4gICAgICogbnVsbCBhbmQgdW5kZWZpbmVkIHZhbHVlcyBhcmUgY29uc2lkZXJlZCB2YWxpZC5cclxuICAgICAqL1xyXG4gICAgRmx1ZW50UnVsZUN1c3RvbWl6ZXIucHJvdG90eXBlLnJhbmdlID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmx1ZW50UnVsZXMucmFuZ2UobWluLCBtYXgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyB0aGUgXCJiZXR3ZWVuXCIgTlVNQkVSIHZhbGlkYXRpb24gcnVsZSB0byB0aGUgcHJvcGVydHkuXHJcbiAgICAgKiBWYWx1ZSBtdXN0IGJlIGJldHdlZW4gYnV0IG5vdCBlcXVhbCB0byB0aGUgc3BlY2lmaWVkIG1pbiBhbmQgbWF4LlxyXG4gICAgICogbnVsbCBhbmQgdW5kZWZpbmVkIHZhbHVlcyBhcmUgY29uc2lkZXJlZCB2YWxpZC5cclxuICAgICAqL1xyXG4gICAgRmx1ZW50UnVsZUN1c3RvbWl6ZXIucHJvdG90eXBlLmJldHdlZW4gPSBmdW5jdGlvbiAobWluLCBtYXgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mbHVlbnRSdWxlcy5iZXR3ZWVuKG1pbiwgbWF4KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgdGhlIFwiZXF1YWxzXCIgdmFsaWRhdGlvbiBydWxlIHRvIHRoZSBwcm9wZXJ0eS5cclxuICAgICAqIG51bGwsIHVuZGVmaW5lZCBhbmQgZW1wdHktc3RyaW5nIHZhbHVlcyBhcmUgY29uc2lkZXJlZCB2YWxpZC5cclxuICAgICAqL1xyXG4gICAgRmx1ZW50UnVsZUN1c3RvbWl6ZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChleHBlY3RlZFZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmx1ZW50UnVsZXMuZXF1YWxzKGV4cGVjdGVkVmFsdWUpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGbHVlbnRSdWxlQ3VzdG9taXplcjtcclxufSgpKTtcclxuLyoqXHJcbiAqIFBhcnQgb2YgdGhlIGZsdWVudCBydWxlIEFQSS4gRW5hYmxlcyBhcHBseWluZyBydWxlcyB0byBwcm9wZXJ0aWVzIGFuZCBvYmplY3RzLlxyXG4gKi9cclxudmFyIEZsdWVudFJ1bGVzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmx1ZW50UnVsZXMoZmx1ZW50RW5zdXJlLCBwYXJzZXJzLCBwcm9wZXJ0eSkge1xyXG4gICAgICAgIHRoaXMuZmx1ZW50RW5zdXJlID0gZmx1ZW50RW5zdXJlO1xyXG4gICAgICAgIHRoaXMucGFyc2VycyA9IHBhcnNlcnM7XHJcbiAgICAgICAgdGhpcy5wcm9wZXJ0eSA9IHByb3BlcnR5O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEN1cnJlbnQgcnVsZSBzZXF1ZW5jZSBudW1iZXIuIFVzZWQgdG8gcG9zdHBvbmUgZXZhbHVhdGlvbiBvZiBydWxlcyB1bnRpbCBydWxlc1xyXG4gICAgICAgICAqIHdpdGggbG93ZXIgc2VxdWVuY2UgbnVtYmVyIGhhdmUgc3VjY2Vzc2Z1bGx5IHZhbGlkYXRlZC4gVGhlIFwidGhlblwiIGZsdWVudCBBUEkgbWV0aG9kXHJcbiAgICAgICAgICogbWFuYWdlcyB0aGlzIHByb3BlcnR5LCB0aGVyZSdzIHVzdWFsbHkgbm8gbmVlZCB0byBzZXQgaXQgZGlyZWN0bHkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zZXF1ZW5jZSA9IDA7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGRpc3BsYXkgbmFtZSBvZiB0aGUgZW5zdXJlZCBwcm9wZXJ0eS5cclxuICAgICAqL1xyXG4gICAgRmx1ZW50UnVsZXMucHJvdG90eXBlLmRpc3BsYXlOYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICB0aGlzLnByb3BlcnR5LmRpc3BsYXlOYW1lID0gbmFtZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgYW4gYWQtaG9jIHJ1bGUgZnVuY3Rpb24gdG8gdGhlIGVuc3VyZWQgcHJvcGVydHkgb3Igb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIGNvbmRpdGlvbiBUaGUgZnVuY3Rpb24gdG8gdmFsaWRhdGUgdGhlIHJ1bGUuXHJcbiAgICAgKiBXaWxsIGJlIGNhbGxlZCB3aXRoIHR3byBhcmd1bWVudHMsIHRoZSBwcm9wZXJ0eSB2YWx1ZSBhbmQgdGhlIG9iamVjdC5cclxuICAgICAqIFNob3VsZCByZXR1cm4gYSBib29sZWFuIG9yIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgYm9vbGVhbi5cclxuICAgICAqL1xyXG4gICAgRmx1ZW50UnVsZXMucHJvdG90eXBlLnNhdGlzZmllcyA9IGZ1bmN0aW9uIChjb25kaXRpb24sIGNvbmZpZykge1xyXG4gICAgICAgIHJldHVybiBuZXcgRmx1ZW50UnVsZUN1c3RvbWl6ZXIodGhpcy5wcm9wZXJ0eSwgY29uZGl0aW9uLCBjb25maWcsIHRoaXMuZmx1ZW50RW5zdXJlLCB0aGlzLCB0aGlzLnBhcnNlcnMpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyBhIHJ1bGUgYnkgbmFtZS5cclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBjdXN0b20gb3Igc3RhbmRhcmQgcnVsZS5cclxuICAgICAqIEBwYXJhbSBhcmdzIFRoZSBydWxlJ3MgYXJndW1lbnRzLlxyXG4gICAgICovXHJcbiAgICBGbHVlbnRSdWxlcy5wcm90b3R5cGUuc2F0aXNmaWVzUnVsZSA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBydWxlID0gRmx1ZW50UnVsZXMuY3VzdG9tUnVsZXNbbmFtZV07XHJcbiAgICAgICAgaWYgKCFydWxlKSB7XHJcbiAgICAgICAgICAgIC8vIHN0YW5kYXJkIHJ1bGU/XHJcbiAgICAgICAgICAgIHJ1bGUgPSB0aGlzW25hbWVdO1xyXG4gICAgICAgICAgICBpZiAocnVsZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcnVsZS5jYWxsLmFwcGx5KHJ1bGUsIF9fc3ByZWFkQXJyYXlzKFt0aGlzXSwgYXJncykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJ1bGUgd2l0aCBuYW1lIFxcXCJcIiArIG5hbWUgKyBcIlxcXCIgZG9lcyBub3QgZXhpc3QuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY29uZmlnID0gcnVsZS5hcmdzVG9Db25maWcgPyBydWxlLmFyZ3NUb0NvbmZpZy5hcHBseShydWxlLCBhcmdzKSA6IHVuZGVmaW5lZDtcclxuICAgICAgICByZXR1cm4gdGhpcy5zYXRpc2ZpZXMoZnVuY3Rpb24gKHZhbHVlLCBvYmopIHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICByZXR1cm4gKF9hID0gcnVsZS5jb25kaXRpb24pLmNhbGwuYXBwbHkoX2EsIF9fc3ByZWFkQXJyYXlzKFtfdGhpcywgdmFsdWUsIG9ial0sIGFyZ3MpKTtcclxuICAgICAgICB9LCBjb25maWcpXHJcbiAgICAgICAgICAgIC53aXRoTWVzc2FnZUtleShuYW1lKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgdGhlIFwicmVxdWlyZWRcIiBydWxlIHRvIHRoZSBwcm9wZXJ0eS5cclxuICAgICAqIFRoZSB2YWx1ZSBjYW5ub3QgYmUgbnVsbCwgdW5kZWZpbmVkIG9yIHdoaXRlc3BhY2UuXHJcbiAgICAgKi9cclxuICAgIEZsdWVudFJ1bGVzLnByb3RvdHlwZS5yZXF1aXJlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zYXRpc2ZpZXMoZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSAhPT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgJiYgdmFsdWUgIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgJiYgIShpc1N0cmluZyh2YWx1ZSkgJiYgIS9cXFMvLnRlc3QodmFsdWUpKTtcclxuICAgICAgICB9KS53aXRoTWVzc2FnZUtleSgncmVxdWlyZWQnKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgdGhlIFwibWF0Y2hlc1wiIHJ1bGUgdG8gdGhlIHByb3BlcnR5LlxyXG4gICAgICogVmFsdWUgbXVzdCBtYXRjaCB0aGUgc3BlY2lmaWVkIHJlZ3VsYXIgZXhwcmVzc2lvbi5cclxuICAgICAqIG51bGwsIHVuZGVmaW5lZCBhbmQgZW1wdHktc3RyaW5nIHZhbHVlcyBhcmUgY29uc2lkZXJlZCB2YWxpZC5cclxuICAgICAqL1xyXG4gICAgRmx1ZW50UnVsZXMucHJvdG90eXBlLm1hdGNoZXMgPSBmdW5jdGlvbiAocmVnZXgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zYXRpc2ZpZXMoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlLmxlbmd0aCA9PT0gMCB8fCByZWdleC50ZXN0KHZhbHVlKTsgfSlcclxuICAgICAgICAgICAgLndpdGhNZXNzYWdlS2V5KCdtYXRjaGVzJyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaWVzIHRoZSBcImVtYWlsXCIgcnVsZSB0byB0aGUgcHJvcGVydHkuXHJcbiAgICAgKiBudWxsLCB1bmRlZmluZWQgYW5kIGVtcHR5LXN0cmluZyB2YWx1ZXMgYXJlIGNvbnNpZGVyZWQgdmFsaWQuXHJcbiAgICAgKi9cclxuICAgIEZsdWVudFJ1bGVzLnByb3RvdHlwZS5lbWFpbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyByZWdleCBmcm9tIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2Zvcm1zLmh0bWwjdmFsaWQtZS1tYWlsLWFkZHJlc3NcclxuICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cclxuICAgICAgICByZXR1cm4gdGhpcy5tYXRjaGVzKC9eW2EtekEtWjAtOS4hIyQlJicqK1xcLz0/Xl9ge3x9fi1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiQvKVxyXG4gICAgICAgICAgICAvKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG4gICAgICAgICAgICAud2l0aE1lc3NhZ2VLZXkoJ2VtYWlsJyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaWVzIHRoZSBcIm1pbkxlbmd0aFwiIFNUUklORyB2YWxpZGF0aW9uIHJ1bGUgdG8gdGhlIHByb3BlcnR5LlxyXG4gICAgICogbnVsbCwgdW5kZWZpbmVkIGFuZCBlbXB0eS1zdHJpbmcgdmFsdWVzIGFyZSBjb25zaWRlcmVkIHZhbGlkLlxyXG4gICAgICovXHJcbiAgICBGbHVlbnRSdWxlcy5wcm90b3R5cGUubWluTGVuZ3RoID0gZnVuY3Rpb24gKGxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNhdGlzZmllcyhmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUubGVuZ3RoID09PSAwIHx8IHZhbHVlLmxlbmd0aCA+PSBsZW5ndGg7IH0sIHsgbGVuZ3RoOiBsZW5ndGggfSlcclxuICAgICAgICAgICAgLndpdGhNZXNzYWdlS2V5KCdtaW5MZW5ndGgnKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgdGhlIFwibWF4TGVuZ3RoXCIgU1RSSU5HIHZhbGlkYXRpb24gcnVsZSB0byB0aGUgcHJvcGVydHkuXHJcbiAgICAgKiBudWxsLCB1bmRlZmluZWQgYW5kIGVtcHR5LXN0cmluZyB2YWx1ZXMgYXJlIGNvbnNpZGVyZWQgdmFsaWQuXHJcbiAgICAgKi9cclxuICAgIEZsdWVudFJ1bGVzLnByb3RvdHlwZS5tYXhMZW5ndGggPSBmdW5jdGlvbiAobGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F0aXNmaWVzKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZS5sZW5ndGggPT09IDAgfHwgdmFsdWUubGVuZ3RoIDw9IGxlbmd0aDsgfSwgeyBsZW5ndGg6IGxlbmd0aCB9KVxyXG4gICAgICAgICAgICAud2l0aE1lc3NhZ2VLZXkoJ21heExlbmd0aCcpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyB0aGUgXCJtaW5JdGVtc1wiIEFSUkFZIHZhbGlkYXRpb24gcnVsZSB0byB0aGUgcHJvcGVydHkuXHJcbiAgICAgKiBudWxsIGFuZCB1bmRlZmluZWQgdmFsdWVzIGFyZSBjb25zaWRlcmVkIHZhbGlkLlxyXG4gICAgICovXHJcbiAgICBGbHVlbnRSdWxlcy5wcm90b3R5cGUubWluSXRlbXMgPSBmdW5jdGlvbiAoY291bnQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zYXRpc2ZpZXMoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlLmxlbmd0aCA+PSBjb3VudDsgfSwgeyBjb3VudDogY291bnQgfSlcclxuICAgICAgICAgICAgLndpdGhNZXNzYWdlS2V5KCdtaW5JdGVtcycpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyB0aGUgXCJtYXhJdGVtc1wiIEFSUkFZIHZhbGlkYXRpb24gcnVsZSB0byB0aGUgcHJvcGVydHkuXHJcbiAgICAgKiBudWxsIGFuZCB1bmRlZmluZWQgdmFsdWVzIGFyZSBjb25zaWRlcmVkIHZhbGlkLlxyXG4gICAgICovXHJcbiAgICBGbHVlbnRSdWxlcy5wcm90b3R5cGUubWF4SXRlbXMgPSBmdW5jdGlvbiAoY291bnQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zYXRpc2ZpZXMoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlLmxlbmd0aCA8PSBjb3VudDsgfSwgeyBjb3VudDogY291bnQgfSlcclxuICAgICAgICAgICAgLndpdGhNZXNzYWdlS2V5KCdtYXhJdGVtcycpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyB0aGUgXCJtaW5cIiBOVU1CRVIgdmFsaWRhdGlvbiBydWxlIHRvIHRoZSBwcm9wZXJ0eS5cclxuICAgICAqIFZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBzcGVjaWZpZWQgY29uc3RyYWludC5cclxuICAgICAqIG51bGwgYW5kIHVuZGVmaW5lZCB2YWx1ZXMgYXJlIGNvbnNpZGVyZWQgdmFsaWQuXHJcbiAgICAgKi9cclxuICAgIEZsdWVudFJ1bGVzLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbiAoY29uc3RyYWludCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNhdGlzZmllcyhmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPj0gY29uc3RyYWludDsgfSwgeyBjb25zdHJhaW50OiBjb25zdHJhaW50IH0pXHJcbiAgICAgICAgICAgIC53aXRoTWVzc2FnZUtleSgnbWluJyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaWVzIHRoZSBcIm1heFwiIE5VTUJFUiB2YWxpZGF0aW9uIHJ1bGUgdG8gdGhlIHByb3BlcnR5LlxyXG4gICAgICogVmFsdWUgbXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNwZWNpZmllZCBjb25zdHJhaW50LlxyXG4gICAgICogbnVsbCBhbmQgdW5kZWZpbmVkIHZhbHVlcyBhcmUgY29uc2lkZXJlZCB2YWxpZC5cclxuICAgICAqL1xyXG4gICAgRmx1ZW50UnVsZXMucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uIChjb25zdHJhaW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F0aXNmaWVzKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA8PSBjb25zdHJhaW50OyB9LCB7IGNvbnN0cmFpbnQ6IGNvbnN0cmFpbnQgfSlcclxuICAgICAgICAgICAgLndpdGhNZXNzYWdlS2V5KCdtYXgnKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgdGhlIFwicmFuZ2VcIiBOVU1CRVIgdmFsaWRhdGlvbiBydWxlIHRvIHRoZSBwcm9wZXJ0eS5cclxuICAgICAqIFZhbHVlIG11c3QgYmUgYmV0d2VlbiBvciBlcXVhbCB0byB0aGUgc3BlY2lmaWVkIG1pbiBhbmQgbWF4LlxyXG4gICAgICogbnVsbCBhbmQgdW5kZWZpbmVkIHZhbHVlcyBhcmUgY29uc2lkZXJlZCB2YWxpZC5cclxuICAgICAqL1xyXG4gICAgRmx1ZW50UnVsZXMucHJvdG90eXBlLnJhbmdlID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F0aXNmaWVzKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCB8fCAodmFsdWUgPj0gbWluICYmIHZhbHVlIDw9IG1heCk7IH0sIHsgbWluOiBtaW4sIG1heDogbWF4IH0pXHJcbiAgICAgICAgICAgIC53aXRoTWVzc2FnZUtleSgncmFuZ2UnKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgdGhlIFwiYmV0d2VlblwiIE5VTUJFUiB2YWxpZGF0aW9uIHJ1bGUgdG8gdGhlIHByb3BlcnR5LlxyXG4gICAgICogVmFsdWUgbXVzdCBiZSBiZXR3ZWVuIGJ1dCBub3QgZXF1YWwgdG8gdGhlIHNwZWNpZmllZCBtaW4gYW5kIG1heC5cclxuICAgICAqIG51bGwgYW5kIHVuZGVmaW5lZCB2YWx1ZXMgYXJlIGNvbnNpZGVyZWQgdmFsaWQuXHJcbiAgICAgKi9cclxuICAgIEZsdWVudFJ1bGVzLnByb3RvdHlwZS5iZXR3ZWVuID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F0aXNmaWVzKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCB8fCAodmFsdWUgPiBtaW4gJiYgdmFsdWUgPCBtYXgpOyB9LCB7IG1pbjogbWluLCBtYXg6IG1heCB9KVxyXG4gICAgICAgICAgICAud2l0aE1lc3NhZ2VLZXkoJ2JldHdlZW4nKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgdGhlIFwiZXF1YWxzXCIgdmFsaWRhdGlvbiBydWxlIHRvIHRoZSBwcm9wZXJ0eS5cclxuICAgICAqIG51bGwgYW5kIHVuZGVmaW5lZCB2YWx1ZXMgYXJlIGNvbnNpZGVyZWQgdmFsaWQuXHJcbiAgICAgKi9cclxuICAgIEZsdWVudFJ1bGVzLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAoZXhwZWN0ZWRWYWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNhdGlzZmllcyhmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09ICcnIHx8IHZhbHVlID09PSBleHBlY3RlZFZhbHVlOyB9LCB7IGV4cGVjdGVkVmFsdWU6IGV4cGVjdGVkVmFsdWUgfSlcclxuICAgICAgICAgICAgLndpdGhNZXNzYWdlS2V5KCdlcXVhbHMnKTtcclxuICAgIH07XHJcbiAgICBGbHVlbnRSdWxlcy5jdXN0b21SdWxlcyA9IHt9O1xyXG4gICAgcmV0dXJuIEZsdWVudFJ1bGVzO1xyXG59KCkpO1xyXG4vKipcclxuICogUGFydCBvZiB0aGUgZmx1ZW50IHJ1bGUgQVBJLiBFbmFibGVzIHRhcmdldGluZyBwcm9wZXJ0aWVzIGFuZCBvYmplY3RzIHdpdGggcnVsZXMuXHJcbiAqL1xyXG52YXIgRmx1ZW50RW5zdXJlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmx1ZW50RW5zdXJlKHBhcnNlcnMpIHtcclxuICAgICAgICB0aGlzLnBhcnNlcnMgPSBwYXJzZXJzO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJ1bGVzIHRoYXQgaGF2ZSBiZWVuIGRlZmluZWQgdXNpbmcgdGhlIGZsdWVudCBBUEkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5ydWxlcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUYXJnZXQgYSBwcm9wZXJ0eSB3aXRoIHZhbGlkYXRpb24gcnVsZXMuXHJcbiAgICAgKiBAcGFyYW0gcHJvcGVydHkgVGhlIHByb3BlcnR5IHRvIHRhcmdldC4gQ2FuIGJlIHRoZSBwcm9wZXJ0eSBuYW1lIG9yIGEgcHJvcGVydHkgYWNjZXNzb3JcclxuICAgICAqIGZ1bmN0aW9uLlxyXG4gICAgICovXHJcbiAgICBGbHVlbnRFbnN1cmUucHJvdG90eXBlLmVuc3VyZSA9IGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0SW5pdGlhbGl6ZWQoKTtcclxuICAgICAgICB2YXIgbmFtZSA9IHRoaXMucGFyc2Vycy5wcm9wZXJ0eS5wYXJzZShwcm9wZXJ0eSk7XHJcbiAgICAgICAgdmFyIGZsdWVudFJ1bGVzID0gbmV3IEZsdWVudFJ1bGVzKHRoaXMsIHRoaXMucGFyc2VycywgeyBuYW1lOiBuYW1lLCBkaXNwbGF5TmFtZTogbnVsbCB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5tZXJnZVJ1bGVzKGZsdWVudFJ1bGVzLCBuYW1lKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRhcmdldHMgYW4gb2JqZWN0IHdpdGggdmFsaWRhdGlvbiBydWxlcy5cclxuICAgICAqL1xyXG4gICAgRmx1ZW50RW5zdXJlLnByb3RvdHlwZS5lbnN1cmVPYmplY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnRJbml0aWFsaXplZCgpO1xyXG4gICAgICAgIHZhciBmbHVlbnRSdWxlcyA9IG5ldyBGbHVlbnRSdWxlcyh0aGlzLCB0aGlzLnBhcnNlcnMsIHsgbmFtZTogbnVsbCwgZGlzcGxheU5hbWU6IG51bGwgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWVyZ2VSdWxlcyhmbHVlbnRSdWxlcywgbnVsbCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaWVzIHRoZSBydWxlcyB0byBhIGNsYXNzIG9yIG9iamVjdCwgbWFraW5nIHRoZW0gZGlzY292ZXJhYmxlIGJ5IHRoZSBTdGFuZGFyZFZhbGlkYXRvci5cclxuICAgICAqIEBwYXJhbSB0YXJnZXQgQSBjbGFzcyBvciBvYmplY3QuXHJcbiAgICAgKi9cclxuICAgIEZsdWVudEVuc3VyZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgUnVsZXMuc2V0KHRhcmdldCwgdGhpcy5ydWxlcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgcnVsZSBkZWZpbml0aW9uIHRvIHRoZSBzZXF1ZW5jZWQgcnVsZXNldC5cclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBGbHVlbnRFbnN1cmUucHJvdG90eXBlLl9hZGRSdWxlID0gZnVuY3Rpb24gKHJ1bGUpIHtcclxuICAgICAgICB3aGlsZSAodGhpcy5ydWxlcy5sZW5ndGggPCBydWxlLnNlcXVlbmNlICsgMSkge1xyXG4gICAgICAgICAgICB0aGlzLnJ1bGVzLnB1c2goW10pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJ1bGVzW3J1bGUuc2VxdWVuY2VdLnB1c2gocnVsZSk7XHJcbiAgICB9O1xyXG4gICAgRmx1ZW50RW5zdXJlLnByb3RvdHlwZS5hc3NlcnRJbml0aWFsaXplZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5wYXJzZXJzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGlkIHlvdSBmb3JnZXQgdG8gYWRkIFxcXCIucGx1Z2luKCdhdXJlbGlhLXZhbGlkYXRpb24nKVxcXCIgdG8geW91ciBtYWluLmpzP1wiKTtcclxuICAgIH07XHJcbiAgICBGbHVlbnRFbnN1cmUucHJvdG90eXBlLm1lcmdlUnVsZXMgPSBmdW5jdGlvbiAoZmx1ZW50UnVsZXMsIHByb3BlcnR5TmFtZSkge1xyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp0cmlwbGUtZXF1YWxzIHwgVXNlIGxvb3NlIGVxdWFsaXR5IGZvciBwcm9wZXJ0eSBrZXlzXHJcbiAgICAgICAgdmFyIGV4aXN0aW5nUnVsZXMgPSB0aGlzLnJ1bGVzLmZpbmQoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIubGVuZ3RoID4gMCAmJiByWzBdLnByb3BlcnR5Lm5hbWUgPT0gcHJvcGVydHlOYW1lOyB9KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdSdWxlcykge1xyXG4gICAgICAgICAgICB2YXIgcnVsZSA9IGV4aXN0aW5nUnVsZXNbZXhpc3RpbmdSdWxlcy5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgZmx1ZW50UnVsZXMuc2VxdWVuY2UgPSBydWxlLnNlcXVlbmNlO1xyXG4gICAgICAgICAgICBpZiAocnVsZS5wcm9wZXJ0eS5kaXNwbGF5TmFtZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgZmx1ZW50UnVsZXMgPSBmbHVlbnRSdWxlcy5kaXNwbGF5TmFtZShydWxlLnByb3BlcnR5LmRpc3BsYXlOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmx1ZW50UnVsZXM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZsdWVudEVuc3VyZTtcclxufSgpKTtcclxuLyoqXHJcbiAqIEZsdWVudCBydWxlIGRlZmluaXRpb24gQVBJLlxyXG4gKi9cclxudmFyIFZhbGlkYXRpb25SdWxlcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFZhbGlkYXRpb25SdWxlcygpIHtcclxuICAgIH1cclxuICAgIFZhbGlkYXRpb25SdWxlcy5pbml0aWFsaXplID0gZnVuY3Rpb24gKG1lc3NhZ2VQYXJzZXIsIHByb3BlcnR5UGFyc2VyKSB7XHJcbiAgICAgICAgdGhpcy5wYXJzZXJzID0ge1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlUGFyc2VyLFxyXG4gICAgICAgICAgICBwcm9wZXJ0eTogcHJvcGVydHlQYXJzZXJcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGFyZ2V0IGEgcHJvcGVydHkgd2l0aCB2YWxpZGF0aW9uIHJ1bGVzLlxyXG4gICAgICogQHBhcmFtIHByb3BlcnR5IFRoZSBwcm9wZXJ0eSB0byB0YXJnZXQuIENhbiBiZSB0aGUgcHJvcGVydHkgbmFtZSBvciBhIHByb3BlcnR5IGFjY2Vzc29yIGZ1bmN0aW9uLlxyXG4gICAgICovXHJcbiAgICBWYWxpZGF0aW9uUnVsZXMuZW5zdXJlID0gZnVuY3Rpb24gKHByb3BlcnR5KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGbHVlbnRFbnN1cmUoVmFsaWRhdGlvblJ1bGVzLnBhcnNlcnMpLmVuc3VyZShwcm9wZXJ0eSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUYXJnZXRzIGFuIG9iamVjdCB3aXRoIHZhbGlkYXRpb24gcnVsZXMuXHJcbiAgICAgKi9cclxuICAgIFZhbGlkYXRpb25SdWxlcy5lbnN1cmVPYmplY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGbHVlbnRFbnN1cmUoVmFsaWRhdGlvblJ1bGVzLnBhcnNlcnMpLmVuc3VyZU9iamVjdCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRGVmaW5lcyBhIGN1c3RvbSBydWxlLlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIGN1c3RvbSBydWxlLiBBbHNvIHNlcnZlcyBhcyB0aGUgbWVzc2FnZSBrZXkuXHJcbiAgICAgKiBAcGFyYW0gY29uZGl0aW9uIFRoZSBydWxlIGZ1bmN0aW9uLlxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgVGhlIG1lc3NhZ2UgZXhwcmVzc2lvblxyXG4gICAgICogQHBhcmFtIGFyZ3NUb0NvbmZpZyBBIGZ1bmN0aW9uIHRoYXQgbWFwcyB0aGUgcnVsZSdzIGFyZ3VtZW50cyB0byBhIFwiY29uZmlnXCJcclxuICAgICAqIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHdoZW4gZXZhbHVhdGluZyB0aGUgbWVzc2FnZSBleHByZXNzaW9uLlxyXG4gICAgICovXHJcbiAgICBWYWxpZGF0aW9uUnVsZXMuY3VzdG9tUnVsZSA9IGZ1bmN0aW9uIChuYW1lLCBjb25kaXRpb24sIG1lc3NhZ2UsIGFyZ3NUb0NvbmZpZykge1xyXG4gICAgICAgIHZhbGlkYXRpb25NZXNzYWdlc1tuYW1lXSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgRmx1ZW50UnVsZXMuY3VzdG9tUnVsZXNbbmFtZV0gPSB7IGNvbmRpdGlvbjogY29uZGl0aW9uLCBhcmdzVG9Db25maWc6IGFyZ3NUb0NvbmZpZyB9O1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBydWxlcyB3aXRoIHRoZSBtYXRjaGluZyB0YWcuXHJcbiAgICAgKiBAcGFyYW0gcnVsZXMgVGhlIHJ1bGVzIHRvIHNlYXJjaC5cclxuICAgICAqIEBwYXJhbSB0YWcgVGhlIHRhZyB0byBzZWFyY2ggZm9yLlxyXG4gICAgICovXHJcbiAgICBWYWxpZGF0aW9uUnVsZXMudGFnZ2VkUnVsZXMgPSBmdW5jdGlvbiAocnVsZXMsIHRhZykge1xyXG4gICAgICAgIHJldHVybiBydWxlcy5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnRhZyA9PT0gdGFnOyB9KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHJ1bGVzIHRoYXQgaGF2ZSBubyB0YWcuXHJcbiAgICAgKiBAcGFyYW0gcnVsZXMgVGhlIHJ1bGVzIHRvIHNlYXJjaC5cclxuICAgICAqL1xyXG4gICAgVmFsaWRhdGlvblJ1bGVzLnVudGFnZ2VkUnVsZXMgPSBmdW5jdGlvbiAocnVsZXMpIHtcclxuICAgICAgICByZXR1cm4gcnVsZXMubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gci50YWcgPT09IHVuZGVmaW5lZDsgfSk7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyB0aGUgcnVsZXMgZnJvbSBhIGNsYXNzIG9yIG9iamVjdC5cclxuICAgICAqIEBwYXJhbSB0YXJnZXQgQSBjbGFzcyBvciBvYmplY3QuXHJcbiAgICAgKi9cclxuICAgIFZhbGlkYXRpb25SdWxlcy5vZmYgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgUnVsZXMudW5zZXQodGFyZ2V0KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVmFsaWRhdGlvblJ1bGVzO1xyXG59KCkpO1xuXG4vLyBFeHBvcnRzXHJcbi8qKlxyXG4gKiBDb25maWd1cmVzIHRoZSBwbHVnaW4uXHJcbiAqL1xyXG5mdW5jdGlvbiBjb25maWd1cmUoXHJcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpiYW4tdHlwZXNcclxuZnJhbWV3b3JrQ29uZmlnLCBjYWxsYmFjaykge1xyXG4gICAgLy8gdGhlIGZsdWVudCBydWxlIGRlZmluaXRpb24gQVBJIG5lZWRzIHRoZSBwYXJzZXIgdG8gdHJhbnNsYXRlIG1lc3NhZ2VzXHJcbiAgICAvLyB0byBpbnRlcnBvbGF0aW9uIGV4cHJlc3Npb25zLlxyXG4gICAgdmFyIG1lc3NhZ2VQYXJzZXIgPSBmcmFtZXdvcmtDb25maWcuY29udGFpbmVyLmdldChWYWxpZGF0aW9uTWVzc2FnZVBhcnNlcik7XHJcbiAgICB2YXIgcHJvcGVydHlQYXJzZXIgPSBmcmFtZXdvcmtDb25maWcuY29udGFpbmVyLmdldChQcm9wZXJ0eUFjY2Vzc29yUGFyc2VyKTtcclxuICAgIFZhbGlkYXRpb25SdWxlcy5pbml0aWFsaXplKG1lc3NhZ2VQYXJzZXIsIHByb3BlcnR5UGFyc2VyKTtcclxuICAgIC8vIGNvbmZpZ3VyZS4uLlxyXG4gICAgdmFyIGNvbmZpZyA9IG5ldyBHbG9iYWxWYWxpZGF0aW9uQ29uZmlndXJhdGlvbigpO1xyXG4gICAgaWYgKGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICBjYWxsYmFjayhjb25maWcpO1xyXG4gICAgfVxyXG4gICAgY29uZmlnLmFwcGx5KGZyYW1ld29ya0NvbmZpZy5jb250YWluZXIpO1xyXG4gICAgLy8gZ2xvYmFsaXplIHRoZSBiZWhhdmlvcnMuXHJcbiAgICBpZiAoZnJhbWV3b3JrQ29uZmlnLmdsb2JhbFJlc291cmNlcykge1xyXG4gICAgICAgIGZyYW1ld29ya0NvbmZpZy5nbG9iYWxSZXNvdXJjZXMoVmFsaWRhdGVCaW5kaW5nQmVoYXZpb3IsIFZhbGlkYXRlTWFudWFsbHlCaW5kaW5nQmVoYXZpb3IsIFZhbGlkYXRlT25CbHVyQmluZGluZ0JlaGF2aW9yLCBWYWxpZGF0ZU9uRm9jdXNvdXRCaW5kaW5nQmVoYXZpb3IsIFZhbGlkYXRlT25DaGFuZ2VCaW5kaW5nQmVoYXZpb3IsIFZhbGlkYXRlT25DaGFuZ2VPckJsdXJCaW5kaW5nQmVoYXZpb3IsIFZhbGlkYXRlT25DaGFuZ2VPckZvY3Vzb3V0QmluZGluZ0JlaGF2aW9yLCBWYWxpZGF0aW9uRXJyb3JzQ3VzdG9tQXR0cmlidXRlLCBWYWxpZGF0aW9uUmVuZGVyZXJDdXN0b21BdHRyaWJ1dGUpO1xyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IGNvbmZpZ3VyZSwgR2xvYmFsVmFsaWRhdGlvbkNvbmZpZ3VyYXRpb24sIGdldFRhcmdldERPTUVsZW1lbnQsIGdldFByb3BlcnR5SW5mbywgUHJvcGVydHlBY2Nlc3NvclBhcnNlciwgZ2V0QWNjZXNzb3JFeHByZXNzaW9uLCBWYWxpZGF0ZUJpbmRpbmdCZWhhdmlvciwgVmFsaWRhdGVNYW51YWxseUJpbmRpbmdCZWhhdmlvciwgVmFsaWRhdGVPbkJsdXJCaW5kaW5nQmVoYXZpb3IsIFZhbGlkYXRlT25DaGFuZ2VCaW5kaW5nQmVoYXZpb3IsIFZhbGlkYXRlT25DaGFuZ2VPckJsdXJCaW5kaW5nQmVoYXZpb3IsIFZhbGlkYXRlT25Gb2N1c291dEJpbmRpbmdCZWhhdmlvciwgVmFsaWRhdGVPbkNoYW5nZU9yRm9jdXNvdXRCaW5kaW5nQmVoYXZpb3IsIFZhbGlkYXRlRXZlbnQsIFZhbGlkYXRlUmVzdWx0LCB2YWxpZGF0ZVRyaWdnZXIsIFZhbGlkYXRpb25Db250cm9sbGVyLCBWYWxpZGF0aW9uQ29udHJvbGxlckZhY3RvcnksIFZhbGlkYXRpb25FcnJvcnNDdXN0b21BdHRyaWJ1dGUsIFZhbGlkYXRpb25SZW5kZXJlckN1c3RvbUF0dHJpYnV0ZSwgVmFsaWRhdG9yLCBSdWxlcywgU3RhbmRhcmRWYWxpZGF0b3IsIHZhbGlkYXRpb25NZXNzYWdlcywgVmFsaWRhdGlvbk1lc3NhZ2VQcm92aWRlciwgVmFsaWRhdGlvbk1lc3NhZ2VQYXJzZXIsIE1lc3NhZ2VFeHByZXNzaW9uVmFsaWRhdG9yLCBGbHVlbnRSdWxlQ3VzdG9taXplciwgRmx1ZW50UnVsZXMsIEZsdWVudEVuc3VyZSwgVmFsaWRhdGlvblJ1bGVzIH07XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///aurelia-validation\n");

/***/ }),

/***/ "bsLm":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/aurelia-validatejs/node_modules/aurelia-validation/dist/native-modules/validate-binding-behavior.js ***!
  \**************************************************************************************************************************/
/*! exports provided: ValidateBindingBehavior */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidateBindingBehavior\", function() { return ValidateBindingBehavior; });\n/* harmony import */ var aurelia_dependency_injection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia-dependency-injection */ \"3U8n\");\n/* harmony import */ var aurelia_task_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! aurelia-task-queue */ \"K/SW\");\n/* harmony import */ var _validation_controller__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./validation-controller */ \"hbvq\");\n/* harmony import */ var _validate_trigger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./validate-trigger */ \"muZg\");\nvar _dec, _class;\n\n\n\n\n\n\n\n\nvar ValidateBindingBehavior = (_dec = Object(aurelia_dependency_injection__WEBPACK_IMPORTED_MODULE_0__[\"inject\"])(aurelia_task_queue__WEBPACK_IMPORTED_MODULE_1__[\"TaskQueue\"]), _dec(_class = function () {\n  function ValidateBindingBehavior(taskQueue) {\n    \n\n    this.taskQueue = taskQueue;\n  }\n\n  ValidateBindingBehavior.prototype.getTarget = function getTarget(binding, view) {\n    var target = binding.target;\n    if (target instanceof Element) {\n      return target;\n    }\n    var controller = void 0;\n    for (var id in view.controllers) {\n      controller = view.controllers[id];\n      if (controller.viewModel === target) {\n        break;\n      }\n    }\n    return controller.view.firstChild.parentNode;\n  };\n\n  ValidateBindingBehavior.prototype.bind = function bind(binding, source, rules) {\n    var _this = this;\n\n    var target = this.getTarget(binding, source);\n\n    var controller = source.container.get(aurelia_dependency_injection__WEBPACK_IMPORTED_MODULE_0__[\"Optional\"].of(_validation_controller__WEBPACK_IMPORTED_MODULE_2__[\"ValidationController\"], true));\n    if (controller === null) {\n      throw new Error('A ValidationController has not been registered.');\n    }\n    controller.registerBinding(binding, target, rules);\n    binding.validationController = controller;\n\n    if (controller.validateTrigger === _validate_trigger__WEBPACK_IMPORTED_MODULE_3__[\"validateTrigger\"].change) {\n      binding.standardUpdateSource = binding.updateSource;\n      binding.updateSource = function (value) {\n        this.standardUpdateSource(value);\n        this.validationController._validateBinding(this);\n      };\n    } else if (controller.validateTrigger === _validate_trigger__WEBPACK_IMPORTED_MODULE_3__[\"validateTrigger\"].blur) {\n      binding.validateBlurHandler = function () {\n        _this.taskQueue.queueMicroTask(function () {\n          return controller._validateBinding(binding);\n        });\n      };\n      binding.validateTarget = target;\n      target.addEventListener('blur', binding.validateBlurHandler);\n    }\n\n    if (controller.validateTrigger !== _validate_trigger__WEBPACK_IMPORTED_MODULE_3__[\"validateTrigger\"].manual) {\n      binding.standardUpdateTarget = binding.updateTarget;\n      binding.updateTarget = function (value) {\n        this.standardUpdateTarget(value);\n        this.validationController._resetBinding(this);\n      };\n    }\n  };\n\n  ValidateBindingBehavior.prototype.unbind = function unbind(binding, source) {\n    if (binding.standardUpdateSource) {\n      binding.updateSource = binding.standardUpdateSource;\n      binding.standardUpdateSource = null;\n    }\n    if (binding.standardUpdateTarget) {\n      binding.updateTarget = binding.standardUpdateTarget;\n      binding.standardUpdateTarget = null;\n    }\n    if (binding.validateBlurHandler) {\n      binding.validateTarget.removeEventListener('blur', binding.validateBlurHandler);\n      binding.validateBlurHandler = null;\n      binding.validateTarget = null;\n    }\n    binding.validationController.unregisterBinding(binding);\n    binding.validationController = null;\n  };\n\n  return ValidateBindingBehavior;\n}()) || _class);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnNMbS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhLXZhbGlkYXRlanMvbm9kZV9tb2R1bGVzL2F1cmVsaWEtdmFsaWRhdGlvbi9kaXN0L25hdGl2ZS1tb2R1bGVzL3ZhbGlkYXRlLWJpbmRpbmctYmVoYXZpb3IuanM/NmVjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX2RlYywgX2NsYXNzO1xuXG5cblxuaW1wb3J0IHsgaW5qZWN0LCBPcHRpb25hbCB9IGZyb20gJ2F1cmVsaWEtZGVwZW5kZW5jeS1pbmplY3Rpb24nO1xuaW1wb3J0IHsgVGFza1F1ZXVlIH0gZnJvbSAnYXVyZWxpYS10YXNrLXF1ZXVlJztcbmltcG9ydCB7IFZhbGlkYXRpb25Db250cm9sbGVyIH0gZnJvbSAnLi92YWxpZGF0aW9uLWNvbnRyb2xsZXInO1xuaW1wb3J0IHsgdmFsaWRhdGVUcmlnZ2VyIH0gZnJvbSAnLi92YWxpZGF0ZS10cmlnZ2VyJztcblxuZXhwb3J0IHZhciBWYWxpZGF0ZUJpbmRpbmdCZWhhdmlvciA9IChfZGVjID0gaW5qZWN0KFRhc2tRdWV1ZSksIF9kZWMoX2NsYXNzID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBWYWxpZGF0ZUJpbmRpbmdCZWhhdmlvcih0YXNrUXVldWUpIHtcbiAgICBcblxuICAgIHRoaXMudGFza1F1ZXVlID0gdGFza1F1ZXVlO1xuICB9XG5cbiAgVmFsaWRhdGVCaW5kaW5nQmVoYXZpb3IucHJvdG90eXBlLmdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldChiaW5kaW5nLCB2aWV3KSB7XG4gICAgdmFyIHRhcmdldCA9IGJpbmRpbmcudGFyZ2V0O1xuICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbiAgICB2YXIgY29udHJvbGxlciA9IHZvaWQgMDtcbiAgICBmb3IgKHZhciBpZCBpbiB2aWV3LmNvbnRyb2xsZXJzKSB7XG4gICAgICBjb250cm9sbGVyID0gdmlldy5jb250cm9sbGVyc1tpZF07XG4gICAgICBpZiAoY29udHJvbGxlci52aWV3TW9kZWwgPT09IHRhcmdldCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbnRyb2xsZXIudmlldy5maXJzdENoaWxkLnBhcmVudE5vZGU7XG4gIH07XG5cbiAgVmFsaWRhdGVCaW5kaW5nQmVoYXZpb3IucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiBiaW5kKGJpbmRpbmcsIHNvdXJjZSwgcnVsZXMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIHRhcmdldCA9IHRoaXMuZ2V0VGFyZ2V0KGJpbmRpbmcsIHNvdXJjZSk7XG5cbiAgICB2YXIgY29udHJvbGxlciA9IHNvdXJjZS5jb250YWluZXIuZ2V0KE9wdGlvbmFsLm9mKFZhbGlkYXRpb25Db250cm9sbGVyLCB0cnVlKSk7XG4gICAgaWYgKGNvbnRyb2xsZXIgPT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQSBWYWxpZGF0aW9uQ29udHJvbGxlciBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZC4nKTtcbiAgICB9XG4gICAgY29udHJvbGxlci5yZWdpc3RlckJpbmRpbmcoYmluZGluZywgdGFyZ2V0LCBydWxlcyk7XG4gICAgYmluZGluZy52YWxpZGF0aW9uQ29udHJvbGxlciA9IGNvbnRyb2xsZXI7XG5cbiAgICBpZiAoY29udHJvbGxlci52YWxpZGF0ZVRyaWdnZXIgPT09IHZhbGlkYXRlVHJpZ2dlci5jaGFuZ2UpIHtcbiAgICAgIGJpbmRpbmcuc3RhbmRhcmRVcGRhdGVTb3VyY2UgPSBiaW5kaW5nLnVwZGF0ZVNvdXJjZTtcbiAgICAgIGJpbmRpbmcudXBkYXRlU291cmNlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc3RhbmRhcmRVcGRhdGVTb3VyY2UodmFsdWUpO1xuICAgICAgICB0aGlzLnZhbGlkYXRpb25Db250cm9sbGVyLl92YWxpZGF0ZUJpbmRpbmcodGhpcyk7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoY29udHJvbGxlci52YWxpZGF0ZVRyaWdnZXIgPT09IHZhbGlkYXRlVHJpZ2dlci5ibHVyKSB7XG4gICAgICBiaW5kaW5nLnZhbGlkYXRlQmx1ckhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLnRhc2tRdWV1ZS5xdWV1ZU1pY3JvVGFzayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIuX3ZhbGlkYXRlQmluZGluZyhiaW5kaW5nKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgYmluZGluZy52YWxpZGF0ZVRhcmdldCA9IHRhcmdldDtcbiAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgYmluZGluZy52YWxpZGF0ZUJsdXJIYW5kbGVyKTtcbiAgICB9XG5cbiAgICBpZiAoY29udHJvbGxlci52YWxpZGF0ZVRyaWdnZXIgIT09IHZhbGlkYXRlVHJpZ2dlci5tYW51YWwpIHtcbiAgICAgIGJpbmRpbmcuc3RhbmRhcmRVcGRhdGVUYXJnZXQgPSBiaW5kaW5nLnVwZGF0ZVRhcmdldDtcbiAgICAgIGJpbmRpbmcudXBkYXRlVGFyZ2V0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc3RhbmRhcmRVcGRhdGVUYXJnZXQodmFsdWUpO1xuICAgICAgICB0aGlzLnZhbGlkYXRpb25Db250cm9sbGVyLl9yZXNldEJpbmRpbmcodGhpcyk7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcblxuICBWYWxpZGF0ZUJpbmRpbmdCZWhhdmlvci5wcm90b3R5cGUudW5iaW5kID0gZnVuY3Rpb24gdW5iaW5kKGJpbmRpbmcsIHNvdXJjZSkge1xuICAgIGlmIChiaW5kaW5nLnN0YW5kYXJkVXBkYXRlU291cmNlKSB7XG4gICAgICBiaW5kaW5nLnVwZGF0ZVNvdXJjZSA9IGJpbmRpbmcuc3RhbmRhcmRVcGRhdGVTb3VyY2U7XG4gICAgICBiaW5kaW5nLnN0YW5kYXJkVXBkYXRlU291cmNlID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGJpbmRpbmcuc3RhbmRhcmRVcGRhdGVUYXJnZXQpIHtcbiAgICAgIGJpbmRpbmcudXBkYXRlVGFyZ2V0ID0gYmluZGluZy5zdGFuZGFyZFVwZGF0ZVRhcmdldDtcbiAgICAgIGJpbmRpbmcuc3RhbmRhcmRVcGRhdGVUYXJnZXQgPSBudWxsO1xuICAgIH1cbiAgICBpZiAoYmluZGluZy52YWxpZGF0ZUJsdXJIYW5kbGVyKSB7XG4gICAgICBiaW5kaW5nLnZhbGlkYXRlVGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBiaW5kaW5nLnZhbGlkYXRlQmx1ckhhbmRsZXIpO1xuICAgICAgYmluZGluZy52YWxpZGF0ZUJsdXJIYW5kbGVyID0gbnVsbDtcbiAgICAgIGJpbmRpbmcudmFsaWRhdGVUYXJnZXQgPSBudWxsO1xuICAgIH1cbiAgICBiaW5kaW5nLnZhbGlkYXRpb25Db250cm9sbGVyLnVucmVnaXN0ZXJCaW5kaW5nKGJpbmRpbmcpO1xuICAgIGJpbmRpbmcudmFsaWRhdGlvbkNvbnRyb2xsZXIgPSBudWxsO1xuICB9O1xuXG4gIHJldHVybiBWYWxpZGF0ZUJpbmRpbmdCZWhhdmlvcjtcbn0oKSkgfHwgX2NsYXNzKTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///bsLm\n");

/***/ }),

/***/ "h2QJ":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/aurelia-validatejs/node_modules/aurelia-validation/dist/native-modules/validation-renderer.js ***!
  \********************************************************************************************************************/
/*! exports provided: validationRenderer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validationRenderer\", function() { return validationRenderer; });\n/* harmony import */ var aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia-metadata */ \"qrcG\");\n/* harmony import */ var _validation_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./validation-error */ \"DcMl\");\n\n\n\nvar validationRenderer = aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"protocol\"].create('aurelia:validation-renderer', function (target) {\n  if (!(typeof target.render === 'function')) {\n    return 'Validation renderers must implement: render(error: ValidationError, target: Element): void';\n  }\n\n  if (!(typeof target.unrender === 'function')) {\n    return 'Validation renderers must implement: unrender(error: ValidationError, target: Element): void';\n  }\n\n  return true;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaDJRSi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhLXZhbGlkYXRlanMvbm9kZV9tb2R1bGVzL2F1cmVsaWEtdmFsaWRhdGlvbi9kaXN0L25hdGl2ZS1tb2R1bGVzL3ZhbGlkYXRpb24tcmVuZGVyZXIuanM/ODc2NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcm90b2NvbCB9IGZyb20gJ2F1cmVsaWEtbWV0YWRhdGEnO1xuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAnLi92YWxpZGF0aW9uLWVycm9yJztcblxuZXhwb3J0IHZhciB2YWxpZGF0aW9uUmVuZGVyZXIgPSBwcm90b2NvbC5jcmVhdGUoJ2F1cmVsaWE6dmFsaWRhdGlvbi1yZW5kZXJlcicsIGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgaWYgKCEodHlwZW9mIHRhcmdldC5yZW5kZXIgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgcmV0dXJuICdWYWxpZGF0aW9uIHJlbmRlcmVycyBtdXN0IGltcGxlbWVudDogcmVuZGVyKGVycm9yOiBWYWxpZGF0aW9uRXJyb3IsIHRhcmdldDogRWxlbWVudCk6IHZvaWQnO1xuICB9XG5cbiAgaWYgKCEodHlwZW9mIHRhcmdldC51bnJlbmRlciA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICByZXR1cm4gJ1ZhbGlkYXRpb24gcmVuZGVyZXJzIG11c3QgaW1wbGVtZW50OiB1bnJlbmRlcihlcnJvcjogVmFsaWRhdGlvbkVycm9yLCB0YXJnZXQ6IEVsZW1lbnQpOiB2b2lkJztcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufSk7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///h2QJ\n");

/***/ }),

/***/ "hbvq":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/aurelia-validatejs/node_modules/aurelia-validation/dist/native-modules/validation-controller.js ***!
  \**********************************************************************************************************************/
/*! exports provided: ValidationController */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidationController\", function() { return ValidationController; });\n/* harmony import */ var aurelia_dependency_injection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia-dependency-injection */ \"3U8n\");\n/* harmony import */ var _validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./validator */ \"M2bY\");\n/* harmony import */ var _validate_trigger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./validate-trigger */ \"muZg\");\n/* harmony import */ var _property_info__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./property-info */ \"KgOP\");\nvar _dec, _class;\n\n\n\n\n\n\n\n\nvar ValidationController = (_dec = Object(aurelia_dependency_injection__WEBPACK_IMPORTED_MODULE_0__[\"inject\"])(_validator__WEBPACK_IMPORTED_MODULE_1__[\"Validator\"]), _dec(_class = function () {\n  function ValidationController(validator) {\n    \n\n    this.bindings = new Map();\n    this.renderers = [];\n    this.validateTrigger = _validate_trigger__WEBPACK_IMPORTED_MODULE_2__[\"validateTrigger\"].blur;\n\n    this.validator = validator;\n  }\n\n  ValidationController.prototype.addRenderer = function addRenderer(renderer) {\n    for (var _iterator = this.bindings.values(), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var _ref2 = _ref;\n      var target = _ref2.target;\n      var errors = _ref2.errors;\n\n      for (var i = 0, ii = errors.length; i < ii; i++) {\n        renderer.render(errors[i], target);\n      }\n    }\n    this.renderers.push(renderer);\n  };\n\n  ValidationController.prototype.removeRenderer = function removeRenderer(renderer) {\n    for (var _iterator2 = this.bindings.values(), _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n      var _ref3;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref3 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref3 = _i2.value;\n      }\n\n      var _ref4 = _ref3;\n      var target = _ref4.target;\n      var errors = _ref4.errors;\n\n      for (var i = 0, ii = errors.length; i < ii; i++) {\n        renderer.unrender(errors[i], target);\n      }\n    }\n    this.renderers.splice(this.renderers.indexOf(renderer), 1);\n  };\n\n  ValidationController.prototype.registerBinding = function registerBinding(binding, target) {\n    var rules = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\n    var errors = [];\n    this.bindings.set(binding, { target: target, rules: rules, errors: errors });\n  };\n\n  ValidationController.prototype.unregisterBinding = function unregisterBinding(binding) {\n    this._resetBinding(binding);\n    this.bindings.delete(binding);\n  };\n\n  ValidationController.prototype.validate = function validate() {\n    var errors = [];\n    for (var _iterator3 = this.bindings.keys(), _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n      var _ref5;\n\n      if (_isArray3) {\n        if (_i3 >= _iterator3.length) break;\n        _ref5 = _iterator3[_i3++];\n      } else {\n        _i3 = _iterator3.next();\n        if (_i3.done) break;\n        _ref5 = _i3.value;\n      }\n\n      var binding = _ref5;\n\n      errors.splice.apply(errors, [errors.length, 0].concat(this._validateBinding(binding)));\n    }\n    return errors;\n  };\n\n  ValidationController.prototype.reset = function reset() {\n    for (var _iterator4 = this.bindings.keys(), _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {\n      var _ref6;\n\n      if (_isArray4) {\n        if (_i4 >= _iterator4.length) break;\n        _ref6 = _iterator4[_i4++];\n      } else {\n        _i4 = _iterator4.next();\n        if (_i4.done) break;\n        _ref6 = _i4.value;\n      }\n\n      var binding = _ref6;\n\n      this._resetBinding(binding);\n    }\n  };\n\n  ValidationController.prototype._renderError = function _renderError(error, target) {\n    var renderers = this.renderers;\n    var i = renderers.length;\n    while (i--) {\n      renderers[i].render(error, target);\n    }\n  };\n\n  ValidationController.prototype._unrenderError = function _unrenderError(error, target) {\n    var renderers = this.renderers;\n    var i = renderers.length;\n    while (i--) {\n      renderers[i].unrender(error, target);\n    }\n  };\n\n  ValidationController.prototype._updateErrors = function _updateErrors(errors, newErrors, target) {\n    var error = void 0;\n    while (error = errors.pop()) {\n      this._unrenderError(error, target);\n    }\n    for (var i = 0, ii = newErrors.length; i < ii; i++) {\n      error = newErrors[i];\n      errors.push(error);\n      this._renderError(error, target);\n    }\n  };\n\n  ValidationController.prototype._validateBinding = function _validateBinding(binding) {\n    var _bindings$get = this.bindings.get(binding);\n\n    var target = _bindings$get.target;\n    var rules = _bindings$get.rules;\n    var errors = _bindings$get.errors;\n\n    var _getPropertyInfo = Object(_property_info__WEBPACK_IMPORTED_MODULE_3__[\"getPropertyInfo\"])(binding.sourceExpression, binding.source);\n\n    var object = _getPropertyInfo.object;\n    var property = _getPropertyInfo.property;\n\n    var newErrors = this.validator.validateProperty(object, property, rules);\n    this._updateErrors(errors, newErrors, target);\n    return errors;\n  };\n\n  ValidationController.prototype._resetBinding = function _resetBinding(binding) {\n    var _bindings$get2 = this.bindings.get(binding);\n\n    var target = _bindings$get2.target;\n    var errors = _bindings$get2.errors;\n\n    this._updateErrors(errors, [], target);\n  };\n\n  return ValidationController;\n}()) || _class);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGJ2cS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhLXZhbGlkYXRlanMvbm9kZV9tb2R1bGVzL2F1cmVsaWEtdmFsaWRhdGlvbi9kaXN0L25hdGl2ZS1tb2R1bGVzL3ZhbGlkYXRpb24tY29udHJvbGxlci5qcz84NWJiIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfZGVjLCBfY2xhc3M7XG5cblxuXG5pbXBvcnQgeyBpbmplY3QgfSBmcm9tICdhdXJlbGlhLWRlcGVuZGVuY3ktaW5qZWN0aW9uJztcbmltcG9ydCB7IFZhbGlkYXRvciB9IGZyb20gJy4vdmFsaWRhdG9yJztcbmltcG9ydCB7IHZhbGlkYXRlVHJpZ2dlciB9IGZyb20gJy4vdmFsaWRhdGUtdHJpZ2dlcic7XG5pbXBvcnQgeyBnZXRQcm9wZXJ0eUluZm8gfSBmcm9tICcuL3Byb3BlcnR5LWluZm8nO1xuXG5leHBvcnQgdmFyIFZhbGlkYXRpb25Db250cm9sbGVyID0gKF9kZWMgPSBpbmplY3QoVmFsaWRhdG9yKSwgX2RlYyhfY2xhc3MgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFZhbGlkYXRpb25Db250cm9sbGVyKHZhbGlkYXRvcikge1xuICAgIFxuXG4gICAgdGhpcy5iaW5kaW5ncyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLnJlbmRlcmVycyA9IFtdO1xuICAgIHRoaXMudmFsaWRhdGVUcmlnZ2VyID0gdmFsaWRhdGVUcmlnZ2VyLmJsdXI7XG5cbiAgICB0aGlzLnZhbGlkYXRvciA9IHZhbGlkYXRvcjtcbiAgfVxuXG4gIFZhbGlkYXRpb25Db250cm9sbGVyLnByb3RvdHlwZS5hZGRSZW5kZXJlciA9IGZ1bmN0aW9uIGFkZFJlbmRlcmVyKHJlbmRlcmVyKSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gdGhpcy5iaW5kaW5ncy52YWx1ZXMoKSwgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5KF9pdGVyYXRvciksIF9pID0gMCwgX2l0ZXJhdG9yID0gX2lzQXJyYXkgPyBfaXRlcmF0b3IgOiBfaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcbiAgICAgIHZhciBfcmVmO1xuXG4gICAgICBpZiAoX2lzQXJyYXkpIHtcbiAgICAgICAgaWYgKF9pID49IF9pdGVyYXRvci5sZW5ndGgpIGJyZWFrO1xuICAgICAgICBfcmVmID0gX2l0ZXJhdG9yW19pKytdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX2kgPSBfaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICBpZiAoX2kuZG9uZSkgYnJlYWs7XG4gICAgICAgIF9yZWYgPSBfaS52YWx1ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIF9yZWYyID0gX3JlZjtcbiAgICAgIHZhciB0YXJnZXQgPSBfcmVmMi50YXJnZXQ7XG4gICAgICB2YXIgZXJyb3JzID0gX3JlZjIuZXJyb3JzO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlcnJvcnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICByZW5kZXJlci5yZW5kZXIoZXJyb3JzW2ldLCB0YXJnZXQpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcmVycy5wdXNoKHJlbmRlcmVyKTtcbiAgfTtcblxuICBWYWxpZGF0aW9uQ29udHJvbGxlci5wcm90b3R5cGUucmVtb3ZlUmVuZGVyZXIgPSBmdW5jdGlvbiByZW1vdmVSZW5kZXJlcihyZW5kZXJlcikge1xuICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSB0aGlzLmJpbmRpbmdzLnZhbHVlcygpLCBfaXNBcnJheTIgPSBBcnJheS5pc0FycmF5KF9pdGVyYXRvcjIpLCBfaTIgPSAwLCBfaXRlcmF0b3IyID0gX2lzQXJyYXkyID8gX2l0ZXJhdG9yMiA6IF9pdGVyYXRvcjJbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcbiAgICAgIHZhciBfcmVmMztcblxuICAgICAgaWYgKF9pc0FycmF5Mikge1xuICAgICAgICBpZiAoX2kyID49IF9pdGVyYXRvcjIubGVuZ3RoKSBicmVhaztcbiAgICAgICAgX3JlZjMgPSBfaXRlcmF0b3IyW19pMisrXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9pMiA9IF9pdGVyYXRvcjIubmV4dCgpO1xuICAgICAgICBpZiAoX2kyLmRvbmUpIGJyZWFrO1xuICAgICAgICBfcmVmMyA9IF9pMi52YWx1ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIF9yZWY0ID0gX3JlZjM7XG4gICAgICB2YXIgdGFyZ2V0ID0gX3JlZjQudGFyZ2V0O1xuICAgICAgdmFyIGVycm9ycyA9IF9yZWY0LmVycm9ycztcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZXJyb3JzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgcmVuZGVyZXIudW5yZW5kZXIoZXJyb3JzW2ldLCB0YXJnZXQpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcmVycy5zcGxpY2UodGhpcy5yZW5kZXJlcnMuaW5kZXhPZihyZW5kZXJlciksIDEpO1xuICB9O1xuXG4gIFZhbGlkYXRpb25Db250cm9sbGVyLnByb3RvdHlwZS5yZWdpc3RlckJpbmRpbmcgPSBmdW5jdGlvbiByZWdpc3RlckJpbmRpbmcoYmluZGluZywgdGFyZ2V0KSB7XG4gICAgdmFyIHJ1bGVzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGFyZ3VtZW50c1syXTtcblxuICAgIHZhciBlcnJvcnMgPSBbXTtcbiAgICB0aGlzLmJpbmRpbmdzLnNldChiaW5kaW5nLCB7IHRhcmdldDogdGFyZ2V0LCBydWxlczogcnVsZXMsIGVycm9yczogZXJyb3JzIH0pO1xuICB9O1xuXG4gIFZhbGlkYXRpb25Db250cm9sbGVyLnByb3RvdHlwZS51bnJlZ2lzdGVyQmluZGluZyA9IGZ1bmN0aW9uIHVucmVnaXN0ZXJCaW5kaW5nKGJpbmRpbmcpIHtcbiAgICB0aGlzLl9yZXNldEJpbmRpbmcoYmluZGluZyk7XG4gICAgdGhpcy5iaW5kaW5ncy5kZWxldGUoYmluZGluZyk7XG4gIH07XG5cbiAgVmFsaWRhdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gdmFsaWRhdGUoKSB7XG4gICAgdmFyIGVycm9ycyA9IFtdO1xuICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSB0aGlzLmJpbmRpbmdzLmtleXMoKSwgX2lzQXJyYXkzID0gQXJyYXkuaXNBcnJheShfaXRlcmF0b3IzKSwgX2kzID0gMCwgX2l0ZXJhdG9yMyA9IF9pc0FycmF5MyA/IF9pdGVyYXRvcjMgOiBfaXRlcmF0b3IzW1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XG4gICAgICB2YXIgX3JlZjU7XG5cbiAgICAgIGlmIChfaXNBcnJheTMpIHtcbiAgICAgICAgaWYgKF9pMyA+PSBfaXRlcmF0b3IzLmxlbmd0aCkgYnJlYWs7XG4gICAgICAgIF9yZWY1ID0gX2l0ZXJhdG9yM1tfaTMrK107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfaTMgPSBfaXRlcmF0b3IzLm5leHQoKTtcbiAgICAgICAgaWYgKF9pMy5kb25lKSBicmVhaztcbiAgICAgICAgX3JlZjUgPSBfaTMudmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBiaW5kaW5nID0gX3JlZjU7XG5cbiAgICAgIGVycm9ycy5zcGxpY2UuYXBwbHkoZXJyb3JzLCBbZXJyb3JzLmxlbmd0aCwgMF0uY29uY2F0KHRoaXMuX3ZhbGlkYXRlQmluZGluZyhiaW5kaW5nKSkpO1xuICAgIH1cbiAgICByZXR1cm4gZXJyb3JzO1xuICB9O1xuXG4gIFZhbGlkYXRpb25Db250cm9sbGVyLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIGZvciAodmFyIF9pdGVyYXRvcjQgPSB0aGlzLmJpbmRpbmdzLmtleXMoKSwgX2lzQXJyYXk0ID0gQXJyYXkuaXNBcnJheShfaXRlcmF0b3I0KSwgX2k0ID0gMCwgX2l0ZXJhdG9yNCA9IF9pc0FycmF5NCA/IF9pdGVyYXRvcjQgOiBfaXRlcmF0b3I0W1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XG4gICAgICB2YXIgX3JlZjY7XG5cbiAgICAgIGlmIChfaXNBcnJheTQpIHtcbiAgICAgICAgaWYgKF9pNCA+PSBfaXRlcmF0b3I0Lmxlbmd0aCkgYnJlYWs7XG4gICAgICAgIF9yZWY2ID0gX2l0ZXJhdG9yNFtfaTQrK107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfaTQgPSBfaXRlcmF0b3I0Lm5leHQoKTtcbiAgICAgICAgaWYgKF9pNC5kb25lKSBicmVhaztcbiAgICAgICAgX3JlZjYgPSBfaTQudmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBiaW5kaW5nID0gX3JlZjY7XG5cbiAgICAgIHRoaXMuX3Jlc2V0QmluZGluZyhiaW5kaW5nKTtcbiAgICB9XG4gIH07XG5cbiAgVmFsaWRhdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlLl9yZW5kZXJFcnJvciA9IGZ1bmN0aW9uIF9yZW5kZXJFcnJvcihlcnJvciwgdGFyZ2V0KSB7XG4gICAgdmFyIHJlbmRlcmVycyA9IHRoaXMucmVuZGVyZXJzO1xuICAgIHZhciBpID0gcmVuZGVyZXJzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICByZW5kZXJlcnNbaV0ucmVuZGVyKGVycm9yLCB0YXJnZXQpO1xuICAgIH1cbiAgfTtcblxuICBWYWxpZGF0aW9uQ29udHJvbGxlci5wcm90b3R5cGUuX3VucmVuZGVyRXJyb3IgPSBmdW5jdGlvbiBfdW5yZW5kZXJFcnJvcihlcnJvciwgdGFyZ2V0KSB7XG4gICAgdmFyIHJlbmRlcmVycyA9IHRoaXMucmVuZGVyZXJzO1xuICAgIHZhciBpID0gcmVuZGVyZXJzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICByZW5kZXJlcnNbaV0udW5yZW5kZXIoZXJyb3IsIHRhcmdldCk7XG4gICAgfVxuICB9O1xuXG4gIFZhbGlkYXRpb25Db250cm9sbGVyLnByb3RvdHlwZS5fdXBkYXRlRXJyb3JzID0gZnVuY3Rpb24gX3VwZGF0ZUVycm9ycyhlcnJvcnMsIG5ld0Vycm9ycywgdGFyZ2V0KSB7XG4gICAgdmFyIGVycm9yID0gdm9pZCAwO1xuICAgIHdoaWxlIChlcnJvciA9IGVycm9ycy5wb3AoKSkge1xuICAgICAgdGhpcy5fdW5yZW5kZXJFcnJvcihlcnJvciwgdGFyZ2V0KTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbmV3RXJyb3JzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIGVycm9yID0gbmV3RXJyb3JzW2ldO1xuICAgICAgZXJyb3JzLnB1c2goZXJyb3IpO1xuICAgICAgdGhpcy5fcmVuZGVyRXJyb3IoZXJyb3IsIHRhcmdldCk7XG4gICAgfVxuICB9O1xuXG4gIFZhbGlkYXRpb25Db250cm9sbGVyLnByb3RvdHlwZS5fdmFsaWRhdGVCaW5kaW5nID0gZnVuY3Rpb24gX3ZhbGlkYXRlQmluZGluZyhiaW5kaW5nKSB7XG4gICAgdmFyIF9iaW5kaW5ncyRnZXQgPSB0aGlzLmJpbmRpbmdzLmdldChiaW5kaW5nKTtcblxuICAgIHZhciB0YXJnZXQgPSBfYmluZGluZ3MkZ2V0LnRhcmdldDtcbiAgICB2YXIgcnVsZXMgPSBfYmluZGluZ3MkZ2V0LnJ1bGVzO1xuICAgIHZhciBlcnJvcnMgPSBfYmluZGluZ3MkZ2V0LmVycm9ycztcblxuICAgIHZhciBfZ2V0UHJvcGVydHlJbmZvID0gZ2V0UHJvcGVydHlJbmZvKGJpbmRpbmcuc291cmNlRXhwcmVzc2lvbiwgYmluZGluZy5zb3VyY2UpO1xuXG4gICAgdmFyIG9iamVjdCA9IF9nZXRQcm9wZXJ0eUluZm8ub2JqZWN0O1xuICAgIHZhciBwcm9wZXJ0eSA9IF9nZXRQcm9wZXJ0eUluZm8ucHJvcGVydHk7XG5cbiAgICB2YXIgbmV3RXJyb3JzID0gdGhpcy52YWxpZGF0b3IudmFsaWRhdGVQcm9wZXJ0eShvYmplY3QsIHByb3BlcnR5LCBydWxlcyk7XG4gICAgdGhpcy5fdXBkYXRlRXJyb3JzKGVycm9ycywgbmV3RXJyb3JzLCB0YXJnZXQpO1xuICAgIHJldHVybiBlcnJvcnM7XG4gIH07XG5cbiAgVmFsaWRhdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlLl9yZXNldEJpbmRpbmcgPSBmdW5jdGlvbiBfcmVzZXRCaW5kaW5nKGJpbmRpbmcpIHtcbiAgICB2YXIgX2JpbmRpbmdzJGdldDIgPSB0aGlzLmJpbmRpbmdzLmdldChiaW5kaW5nKTtcblxuICAgIHZhciB0YXJnZXQgPSBfYmluZGluZ3MkZ2V0Mi50YXJnZXQ7XG4gICAgdmFyIGVycm9ycyA9IF9iaW5kaW5ncyRnZXQyLmVycm9ycztcblxuICAgIHRoaXMuX3VwZGF0ZUVycm9ycyhlcnJvcnMsIFtdLCB0YXJnZXQpO1xuICB9O1xuXG4gIHJldHVybiBWYWxpZGF0aW9uQ29udHJvbGxlcjtcbn0oKSkgfHwgX2NsYXNzKTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///hbvq\n");

/***/ }),

/***/ "muZg":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/aurelia-validatejs/node_modules/aurelia-validation/dist/native-modules/validate-trigger.js ***!
  \*****************************************************************************************************************/
/*! exports provided: validateTrigger */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validateTrigger\", function() { return validateTrigger; });\n\nvar validateTrigger = {\n  blur: 'blur',\n\n  change: 'change',\n\n  manual: 'manual'\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXVaZy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhLXZhbGlkYXRlanMvbm9kZV9tb2R1bGVzL2F1cmVsaWEtdmFsaWRhdGlvbi9kaXN0L25hdGl2ZS1tb2R1bGVzL3ZhbGlkYXRlLXRyaWdnZXIuanM/OWFlNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCB2YXIgdmFsaWRhdGVUcmlnZ2VyID0ge1xuICBibHVyOiAnYmx1cicsXG5cbiAgY2hhbmdlOiAnY2hhbmdlJyxcblxuICBtYW51YWw6ICdtYW51YWwnXG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///muZg\n");

/***/ }),

/***/ "oXW4":
/*!***********************************************************************************************************************************!*\
  !*** ./node_modules/aurelia-validatejs/node_modules/aurelia-validation/dist/native-modules/validation-errors-custom-attribute.js ***!
  \***********************************************************************************************************************************/
/*! exports provided: ValidationErrorsCustomAttribute */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValidationErrorsCustomAttribute\", function() { return ValidationErrorsCustomAttribute; });\n/* harmony import */ var aurelia_binding__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia-binding */ \"X5gX\");\n/* harmony import */ var aurelia_dependency_injection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! aurelia-dependency-injection */ \"3U8n\");\n/* harmony import */ var aurelia_templating__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! aurelia-templating */ \"hij8\");\n/* harmony import */ var _validation_controller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./validation-controller */ \"hbvq\");\n/* harmony import */ var _validation_renderer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./validation-renderer */ \"h2QJ\");\nvar _dec, _dec2, _class;\n\n\n\n\n\n\n\n\n\nvar ValidationErrorsCustomAttribute = (_dec = Object(aurelia_templating__WEBPACK_IMPORTED_MODULE_2__[\"customAttribute\"])('validation-errors', aurelia_binding__WEBPACK_IMPORTED_MODULE_0__[\"bindingMode\"].twoWay), _dec2 = Object(aurelia_dependency_injection__WEBPACK_IMPORTED_MODULE_1__[\"inject\"])(Element, aurelia_dependency_injection__WEBPACK_IMPORTED_MODULE_1__[\"Lazy\"].of(_validation_controller__WEBPACK_IMPORTED_MODULE_3__[\"ValidationController\"])), _dec(_class = _dec2(_class = Object(_validation_renderer__WEBPACK_IMPORTED_MODULE_4__[\"validationRenderer\"])(_class = function () {\n  function ValidationErrorsCustomAttribute(boundaryElement, controllerAccessor) {\n    \n\n    this.errors = [];\n\n    this.boundaryElement = boundaryElement;\n    this.controllerAccessor = controllerAccessor;\n  }\n\n  ValidationErrorsCustomAttribute.prototype.sort = function sort() {\n    this.errors.sort(function (a, b) {\n      if (a.target === b.target) {\n        return 0;\n      }\n      return a.target.compareDocumentPosition(b.target) & 2 ? 1 : -1;\n    });\n  };\n\n  ValidationErrorsCustomAttribute.prototype.render = function render(error, target) {\n    if (!target || !(this.boundaryElement === target || this.boundaryElement.contains(target))) {\n      return;\n    }\n\n    this.errors.push({ error: error, target: target });\n    this.sort();\n    this.value = this.errors;\n  };\n\n  ValidationErrorsCustomAttribute.prototype.unrender = function unrender(error, target) {\n    var index = this.errors.findIndex(function (x) {\n      return x.error === error;\n    });\n    if (index === -1) {\n      return;\n    }\n    this.errors.splice(index, 1);\n    this.value = this.errors;\n  };\n\n  ValidationErrorsCustomAttribute.prototype.bind = function bind() {\n    this.controllerAccessor().addRenderer(this);\n    this.value = this.errors;\n  };\n\n  ValidationErrorsCustomAttribute.prototype.unbind = function unbind() {\n    this.controllerAccessor().removeRenderer(this);\n  };\n\n  return ValidationErrorsCustomAttribute;\n}()) || _class) || _class) || _class);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib1hXNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhLXZhbGlkYXRlanMvbm9kZV9tb2R1bGVzL2F1cmVsaWEtdmFsaWRhdGlvbi9kaXN0L25hdGl2ZS1tb2R1bGVzL3ZhbGlkYXRpb24tZXJyb3JzLWN1c3RvbS1hdHRyaWJ1dGUuanM/YTE3NSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX2RlYywgX2RlYzIsIF9jbGFzcztcblxuXG5cbmltcG9ydCB7IGJpbmRpbmdNb2RlIH0gZnJvbSAnYXVyZWxpYS1iaW5kaW5nJztcbmltcG9ydCB7IGluamVjdCwgTGF6eSB9IGZyb20gJ2F1cmVsaWEtZGVwZW5kZW5jeS1pbmplY3Rpb24nO1xuaW1wb3J0IHsgY3VzdG9tQXR0cmlidXRlIH0gZnJvbSAnYXVyZWxpYS10ZW1wbGF0aW5nJztcbmltcG9ydCB7IFZhbGlkYXRpb25Db250cm9sbGVyIH0gZnJvbSAnLi92YWxpZGF0aW9uLWNvbnRyb2xsZXInO1xuaW1wb3J0IHsgdmFsaWRhdGlvblJlbmRlcmVyIH0gZnJvbSAnLi92YWxpZGF0aW9uLXJlbmRlcmVyJztcblxuZXhwb3J0IHZhciBWYWxpZGF0aW9uRXJyb3JzQ3VzdG9tQXR0cmlidXRlID0gKF9kZWMgPSBjdXN0b21BdHRyaWJ1dGUoJ3ZhbGlkYXRpb24tZXJyb3JzJywgYmluZGluZ01vZGUudHdvV2F5KSwgX2RlYzIgPSBpbmplY3QoRWxlbWVudCwgTGF6eS5vZihWYWxpZGF0aW9uQ29udHJvbGxlcikpLCBfZGVjKF9jbGFzcyA9IF9kZWMyKF9jbGFzcyA9IHZhbGlkYXRpb25SZW5kZXJlcihfY2xhc3MgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFZhbGlkYXRpb25FcnJvcnNDdXN0b21BdHRyaWJ1dGUoYm91bmRhcnlFbGVtZW50LCBjb250cm9sbGVyQWNjZXNzb3IpIHtcbiAgICBcblxuICAgIHRoaXMuZXJyb3JzID0gW107XG5cbiAgICB0aGlzLmJvdW5kYXJ5RWxlbWVudCA9IGJvdW5kYXJ5RWxlbWVudDtcbiAgICB0aGlzLmNvbnRyb2xsZXJBY2Nlc3NvciA9IGNvbnRyb2xsZXJBY2Nlc3NvcjtcbiAgfVxuXG4gIFZhbGlkYXRpb25FcnJvcnNDdXN0b21BdHRyaWJ1dGUucHJvdG90eXBlLnNvcnQgPSBmdW5jdGlvbiBzb3J0KCkge1xuICAgIHRoaXMuZXJyb3JzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIGlmIChhLnRhcmdldCA9PT0gYi50YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gYS50YXJnZXQuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYi50YXJnZXQpICYgMiA/IDEgOiAtMTtcbiAgICB9KTtcbiAgfTtcblxuICBWYWxpZGF0aW9uRXJyb3JzQ3VzdG9tQXR0cmlidXRlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoZXJyb3IsIHRhcmdldCkge1xuICAgIGlmICghdGFyZ2V0IHx8ICEodGhpcy5ib3VuZGFyeUVsZW1lbnQgPT09IHRhcmdldCB8fCB0aGlzLmJvdW5kYXJ5RWxlbWVudC5jb250YWlucyh0YXJnZXQpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZXJyb3JzLnB1c2goeyBlcnJvcjogZXJyb3IsIHRhcmdldDogdGFyZ2V0IH0pO1xuICAgIHRoaXMuc29ydCgpO1xuICAgIHRoaXMudmFsdWUgPSB0aGlzLmVycm9ycztcbiAgfTtcblxuICBWYWxpZGF0aW9uRXJyb3JzQ3VzdG9tQXR0cmlidXRlLnByb3RvdHlwZS51bnJlbmRlciA9IGZ1bmN0aW9uIHVucmVuZGVyKGVycm9yLCB0YXJnZXQpIHtcbiAgICB2YXIgaW5kZXggPSB0aGlzLmVycm9ycy5maW5kSW5kZXgoZnVuY3Rpb24gKHgpIHtcbiAgICAgIHJldHVybiB4LmVycm9yID09PSBlcnJvcjtcbiAgICB9KTtcbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZXJyb3JzLnNwbGljZShpbmRleCwgMSk7XG4gICAgdGhpcy52YWx1ZSA9IHRoaXMuZXJyb3JzO1xuICB9O1xuXG4gIFZhbGlkYXRpb25FcnJvcnNDdXN0b21BdHRyaWJ1dGUucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHRoaXMuY29udHJvbGxlckFjY2Vzc29yKCkuYWRkUmVuZGVyZXIodGhpcyk7XG4gICAgdGhpcy52YWx1ZSA9IHRoaXMuZXJyb3JzO1xuICB9O1xuXG4gIFZhbGlkYXRpb25FcnJvcnNDdXN0b21BdHRyaWJ1dGUucHJvdG90eXBlLnVuYmluZCA9IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB0aGlzLmNvbnRyb2xsZXJBY2Nlc3NvcigpLnJlbW92ZVJlbmRlcmVyKHRoaXMpO1xuICB9O1xuXG4gIHJldHVybiBWYWxpZGF0aW9uRXJyb3JzQ3VzdG9tQXR0cmlidXRlO1xufSgpKSB8fCBfY2xhc3MpIHx8IF9jbGFzcykgfHwgX2NsYXNzKTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///oXW4\n");

/***/ })

}]);