<template>
    <compose view="../../../../resources/elements/table-nav-bar.html"></compose>
    <table class="table table-striped"
        aurelia-table="data.bind: filteredArray; display-data.bind: $displayData; filters.bind: filters; current-page.bind: currentPage; page-size.bind: pageSize; total-items.bind: totalItems;">
        <thead class="cf">
            <tr>
                <compose view='./bulkEmailTableToolbar.html'></compose>
            </tr>
            <tr>
                <td colspan='7'>
                    <span click.delegate="downloadInstExcel()" class="smallMarginRight" bootstrap-tooltip
                        data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Export to Excel"><i
                            class="fa fa-download" aria-hidden="true"></i></span>
                </td>
            </tr>
            <tr>
                <th style="width:15rem;" aut-sort="key: lastName">Name </th>
                <th style="width:15rem;" aut-sort="key: institutionId.name">Institution</th>
                <th style="width:10rem;">Institution<br>Status</th>
                <th style="width:10rem;">City</th>
                <th style="width:10rem;">Region</th>
                <th style="width:10rem;">Country</th>
                <th style="width:20rem;" aut-sort="key: email">Email</th>
                <th style="width:20rem;">Role</th>
                <th style="width:15rem;">Person Status</th>
            </tr>
        </thead>
        <tbody>
            <tr repeat.for="person of $displayData">
                <td style="width:20rem;">${person.fullName}</td>
                <td style="width:30rem;">${person.institutionId._id |
                    lookupValue:people.institutionsArray:"_id":"name"}</td>
                <td style="width:15rem;">${person.institutionId.institutionStatus |
                    lookupValue:is4ua.institutonStatusArray:"code":"description"}</td>
                <td style="width:15rem;">${person.institutionId.city}</td>
                <td style="width:15rem;">${person.institutionId.region}</td>
                <td style="width:15rem;">${person.institutionId.country}</td>
                <td style="width:20rem;">${person.email}</td>
                <td style="width:20rem;">${person.roles}</td>
                <td style="width:15rem;">${person.personStatus |
                    lookupValue:is4ua.personStatusArray:"code":"description"}</td>
            </tr>
        </tbody>
    </table>
    </div>
</template>