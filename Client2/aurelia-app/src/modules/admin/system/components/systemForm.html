<template>
    <div class="col-lg-12">

        <div class="bottomMargin list-group-item leftMargin rightMargin">
            <span click.delegate="back()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Back"><i class="fa fa-arrow-left fa-lg fa-border" aria-hidden="true"></i></span>
            <span click.delegate="save()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Save"><i class="fa fa-floppy-o fa-lg fa-border" aria-hidden="true"></i></span>
            <span click.delegate="cancel()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Cancel Changes"><i class="fa fa-ban fa-lg fa-border" aria-hidden="true"></i></span>
            <span show.bind="!newSystem" click.delegate="delete()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Delete"><i class="fa fa-trash fa-lg fa-border text-danger" aria-hidden="true"></i></span>
        </div>  

            <!-- Edit Form -->
            <div class=" col-lg-6 topMargin">
                <div class="col-sm-12 col-lg-12">
                    <div class="form-group topMargin">
                        <label for="editSid" class="col-sm-3 form-control-label">SID</label>
                        <div class="col-sm-8">
                            <input value.bind="systems.selectedSystem.sid | toUppercase" id="editSid" class="form-control" placeholder="SID" type="text" />
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-lg-12">
                    <div class="form-group">
                        <label class="col-sm-3 form-control-label hideOnPhone">Status</label>
                        <div class="col-sm-8">
                            <div class="checkbox">
                                <label class="pull-left">
                                    <input checked.bind="systems.selectedSystem.active" id="activeCheckBox" type="checkbox" data-toggle="checkbox"> Active
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-lg-12">
                    <div class="form-group">
                        <label for="editDesc" class="col-sm-3 form-control-label">Description</label>
                        <div class="col-sm-8">
                            <input value.bind="systems.selectedSystem.description" id="editDesc" class="form-control input-md" placeholder="Description"
                            type="text" />
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-lg-12">
                    <div class="form-group">
                        <label for="editServer" class="col-sm-3 form-control-label topMargin">Server</label>
                        <div class="col-sm-8">
                            <input value.bind="systems.selectedSystem.server | toUppercase" id="editServer" class="topMargin form-control input-md" placeholder="Server"
                            type="text" />
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-lg-12">
                    <div class="form-group">
                        <label for="editInst" class="col-sm-3 form-control-label topMargin">Instance</label>
                        <div class="col-sm-8">
                            <input value.bind="systems.selectedSystem.instance" id="editInst" class="topMargin form-control input-md" placeholder="Instance"
                            type="text" maxLength="2"/>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-lg-12">
                    <div class="form-group">
                        <label for="editIts" class="col-sm-3 form-control-label topMargin">ITS</label>
                        <div class="col-sm-8">
                            <input value.bind="systems.selectedSystem.its" id="editIts" class="topMargin form-control input-md" placeholder="ITS"
                            type="text" />
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-lg-12">
                    <div class="form-group">
                        
                        <label for="editTerms" class="col-sm-3 form-control-label topMargin">Terms</label>
                        <div class="col-sm-8">
                            <select multiple value.bind="systems.selectedSystem.sessions" class="form-control topMargin">
                                <option value="${session.session}"  repeat.for="session of config.SESSION_PARAMS">${session.session}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-lg-12 bottomMargin">
                    <div class="form-group">
                        <label for="editIdsAvailable" class="col-sm-3 form-control-label topMargin">IDS Available</label>
                        <div class="col-sm-8">
                            <input value.bind="systems.selectedSystem.idsAvailable" id="editIdsAvailable" class="topMargin form-control input-md"
                            placeholder="IDS Available" type="text" />
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-lg-12 bottomMargin">
                    <div class="form-group">
                        <label for="editProduct" class="col-sm-3 form-control-label topMargin">Products</label>
                        <div class="col-sm-8">
                            <ul class="list-group">
                                <li class="list-group-item" repeat.for="product of systems.selectedSystem.productId">${product | productName:products.productsArray}</li>
                            </ul>
                            <!--
                            <select readonly multiple value.bind="systems.selectedSystem.productId" class="form-control topMargin">
                                <option value="${product}" repeat.for="product of systems.selectedSystem.productId">${product | productName:products.productsArray}</option>
                            </select>
                            
                            <input readonly value.bind="systems.selectedSystem.productId | productName:products.productsArray" id="editProductId" class="topMargin form-control input-md"
                            placeholder="Product" type="text" />
                            -->
                        </div>
                    </div>
                </div>
            </div>
             <div class=" col-lg-6 topMargin">
                <div if.bind="interfaceUpdate" class="col-sm-12 col-lg-12">
                    <edit-client client-obj.bind="systems.selectedClient" show-session-select.bind=true sid.bind="systems.selectedSystem.sid"
                    show-form.two-way="interfaceUpdate" session-array.bind="sessions.sessionsArray" action1.call="deleteClient()"
                    action2.call="saveClient()">
                    </edit-client>
                </div>

                <div show.bind="!interfaceUpdate">
                    <div class="row">
                        <div class="bottomMargin list-group-item col-sm-9">
                            <span click.delegate="generateClients()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Add Clients"><i class="fa fa-plus fa-lg fa-border" aria-hidden="true"></i></span>
                            <span click.delegate="refreshClients()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Refresh Clients"><i class="fa fa-refresh fa-lg fa-border text-danger" aria-hidden="true"></i></span>
                            <span click.delegate="deleteClients()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Delete Clients"><i class="fa fa-trash-o fa-lg fa-border text-danger" aria-hidden="true"></i></span>
                        </div>  
                    </div>
                    
                    <div class="row topMargin bottomMargin">
                        <div class="form-group col-sm-2 ">
                            <input value.bind="editFirstClient" style="width:75px;margin-right:10px;" id="editFirstClient" placeholder="Start" class="form-control input-sm"
                            type="number" />
                        </div>
                        <div class="form-group col-sm-2 ">
                            <input value.bind="editLastClient" style="width:75px;margin-right:10px;" id="editLastClient" placeholder="End" class="form-control input-sm"
                            type="number" />
                        </div>
                        <div class="form-group col-sm-2 ">
                            <input value.bind="systems.selectedSystem.idsAvailable" style="width:75px;margin-right:10px;" id="editClientIdsAvailable"
                            placeholder="IDS Available" class="form-control input-sm" type="number" />
                        </div>
                        <div class="fom-group col-sm-3 ">
                            <select value.bind="editClientStatus" class="form-control" data-title="Single Select" data-style="btn-default btn-block"
                            data-menu-style="dropdown-blue">
                                <option repeat.for="status of config.CLIENT_STATUSES" value="${status.code}">${status.description}
                                    <option>
                            </select>
                        </div>
                         <h6>Client interval: ${config.CLIENT_INTERVAL}</h6>
                    </div>

                        <div show.bind="systems.selectedSystem.clients.length > 0" class=" col-sm-9">
                                                <div class="fom-group col-sm-3 ">
                       
                    </div>
                            <div class="panel panel-default" >
                                <div class="panel-body">
                                    <table class="table" style="display: block;height: 400px;overflow-y: scroll;width: 500px;">
                                        <thead>
                                            <tr>
                                                <th style="width:150px;">Client</th>
                                                <th style="width:200px;">Status</th>
                                                <th style="width:200px;">IDS Available</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr click.trigger="editAClient(client, $index, $event)" repeat.for="client of systems.selectedSystem.clients | sortArray:'client':'ASC'">
                                                <td>${client.client}</td>
                                                <td>${client.clientStatus | lookupDescription:config.CLIENT_STATUSES}</td>
                                                <td>${client.idsAvailable}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
             </div>
        </div>


        </div>
</template>
