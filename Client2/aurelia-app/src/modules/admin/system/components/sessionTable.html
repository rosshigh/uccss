<template>
    <div class='row'>
        <div class='col-lg-10 col-lg-offset-1 bottomMargin'>
            <compose view="../../../../resources/elements/table-navigation-bar.html"></compose>
            <div id="no-more-tables">
                <table id="sessionsTable" class="table table-striped table-hover cf">
                    <thead class="cf">
                        <tr>
                            <td colspan='6'>
                                <div class="checkbox">
                                    <label>
                                    <input checked.bind="isChecked" change.trigger="filterOutClosed()" type="checkbox"> Hide inactive sessions
                                </label>
                                </div>
                            </td>
                            <tr>
                                <td colspan='6'>
                                    <span click.delegate="refresh()" class="smallMarginRight"><i class="fa fa-refresh" aria-hidden="true"></i></span>
                                    <span click.delegate="new()"><i class="smallMarginRight fa fa-plus" aria-hidden="true"></i></span>
                                    <span click.delegate="editSessionConfig()"><i class="fa fa-pencil" aria-hidden="true"></i></span>
                                    <span class="pull-right" id="spinner" innerhtml.bind="spinnerHTML"></span>
                                </td>
                            </tr>
                            <tr>
                                <th>Session <span click.trigger="dataTable.sortArray('session')"><i class="fa fa-sort"></i></span></th>
                                <th>Start Date <span click.trigger="dataTable.sortArray('startDate')"><i class="fa fa-sort"></i></span></th>
                                <th>End Date <span click.trigger="dataTable.sortArray('endDate')"><i class="fa fa-sort"></i></span></th>
                                <th>Requests Open <span click.trigger="dataTable.sortArray('requestsOpenDate')"><i class="fa fa-sort"></i></span></th>
                                <th>Status</th>
                                <th></th>
                            </tr>
                    </thead>
                    <tbody>
                        <tr repeat.for="session of dataTable.displayArray">
                            <td data-title="Session" click.trigger="edit($index, $event)">${session.session}</td>
                            <td data-title="StartDate" click.trigger="edit($index, $event)">
                                <div style="width: 100px">${session.startDate | dateFormat:config.DATE_FORMAT_TABLE}</div>
                            </td>
                            <td data-title="EndDate" click.trigger="edit($index, $event)">
                                <div style="width: 100px">${session.endDate | dateFormat:config.DATE_FORMAT_TABLE}</div>
                            </td>
                            <td data-title="RequestsOpen" click.trigger="edit($index, $event)">
                                <div style="width: 100px">${session.requestsOpenDate | dateFormat:config.DATE_FORMAT_TABLE}</div>
                            </td>
                            <td data-title="createdDate" click.trigger="edit($index, $event)">${session.sessionStatus}</td>
                            <td data-title="Update">
                                <div style="width: 100px">
                                    <button click.trigger="updateStatus($index, session, $event)" class='btn btn-primary btn-fill btn-sm' show.bind="session.sessionStatus === 'Active'"
                                        value="Close">Close</button>
                                    <button click.trigger="updateStatus($index, session, $event)" class='btn btn-primary btn-fill btn-sm' show.bind="session.sessionStatus === 'Requests'"
                                        value="Activate">Activate</button>
                                    <button click.trigger="updateStatus($index, session, $event)" class='btn btn-primary btn-fill btn-sm' show.bind="session.sessionStatus === 'Next'"
                                        value="Open">Open</button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    </div>
</template>