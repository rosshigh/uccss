<template>
 <div class="col-lg-12">
	<div class="bottomMargin list-group-item leftMargin rightMargin">
		<span click.delegate="save()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip" data-placement="bottom" title=""
			data-original-title="Save"><i class="fa fa-floppy-o fa-lg fa-border" aria-hidden="true"></i></span>
		<span click.delegate="_clearFilters()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip" data-placement="bottom"
		 	title="" data-original-title="Clear Filters"><i class="fa fa-filter" aria-hidden="true"></i></span>
		<span click.delegate="composeEmail()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip" data-placement="bottom"
			title="" data-original-title="Send"><i class="fa fa-paper-plane fa-lg fa-border" aria-hidden="true"></i></span>
	</div>

	<div show.bind="composeEmailPanel" class="panel panel-info leftMargin rightMargin topMargin bottomMargin">
      <div class="panel-body">
	   <div class="list-group-item col-md-12 topMargin">
			<span click.delegate="send()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Send Email"><i class="fa fa-floppy-o fa-lg fa-border" aria-hidden="true" ></i></span>
			<span click.delegate="cancel()" class="smallMarginRight" bootstrap-tooltip data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Cancel"><i class="fa fa-ban fa-lg fa-border" aria-hidden="true"></i></span>
		</div>
		<div class="col-lg-10 col-lg-offset-1 topMargin">
			<input value.bind="email.subject" class="form-control" placeholder="Subject"/>
			<div class="topMargin">
				<editor value.bind="email.emailMessage" height="250" toolbar.bind="toolbar" ></editor>
			</div>
		</div>
	  </div>
	</div>

	<div class="panel panel-info leftMargin rightMargin">
      <div class="panel-body">
	  	<div class="col-lg-3">
			<label class="control-labelhideOnPhone">Status</label>
			<select value.bind="activeFilterValue" change.delegate="filterActive()" class="form-control " id="personStatus">
				<option value=""></option>
				<option repeat.for='item of is4ua.personStatusArray' value='${item.code}'>${item.description}</option>
			</select>
		</div>
		<div class="col-lg-3">
			<label class="control-label hideOnPhone">Institution Type</label>
			<select value.bind="institutionTypeFilterValue" input.delegate="dataTable.filterListExp($event, { type: 'value',  filter: 'institutionTypesFilter', lookupArray: people.institutionsArray, lookupProperty: 'institutionType', collectionProperty: 'institutionId.institutionType', displayProperty: 'institutionId.name', matchProperty:'institutionType', compare:'lookup'} )" class="form-control " ref="institutionTypeFilter" id="institutionType">
				<option value=""></option>
				<option repeat.for='item of is4ua.institutionTypes' value='${item.code}'>${item.description}</option>
			</select>
		</div>
		<div class="col-lg-3">
			<label class="control-label hideOnPhone">Member Type</label>
			<select value.bind="memberTypeFilterValue" input.delegate="dataTable.filterListExp($event, { type: 'value',  filter: 'memberTypesFilter', lookupArray: people.institutionsArray, lookupProperty: 'memberType', collectionProperty: 'institutionId.memberType', displayProperty: 'institutionId.name', matchProperty:'memberType', compare:'lookup'} )" class="form-control " ref="memberTypeFilter">
				<option value=""></option>
				<option repeat.for='item of is4ua.memberTypes' value='${item.code}'>${item.description}</option>
			</select>
		</div>
		<div class="col-lg-3">
			<label class="control-label hideOnPhone">Institution</label>
			<input value.bind="institutionFilterValue" input.delegate="dataTable.filterListExp($event, { type: 'text',  filter: 'institutionFilter', lookupArray: people.institutionsArray, lookupProperty: '_id', collectionProperty: 'institutionId._id', displayProperty: 'institutionId.name', matchProperty:'name', compare:'lookup'} )"  class="form-control" ref="institutionFilter"/>
		</div>
		<div class="col-lg-3 topMargin">
			<label class="control-label hideOnPhone">Region</label>
			<input value.bind="regionFilterValue" input.delegate="dataTable.filterListExp($event, { type: 'text',  filter: 'regionFilter', lookupArray: people.institutionsArray, lookupProperty: '_id', collectionProperty: 'institutionId._id', displayProperty: 'institutionId.region', matchProperty:'region', compare:'lookup'} )"   class="form-control" ref="regionFilter"/>
		</div>
		<div class="col-lg-3 topMargin">
			<label class="control-label hideOnPhone">City</label>
			<input value.bind="cityFilterValue" input.delegate="dataTable.filterListExp($event, { type: 'text',  filter: 'cityFilter', lookupArray: people.institutionsArray, lookupProperty: '_id', collectionProperty: 'institutionId._id', displayProperty: 'institutionId.city', matchProperty:'city', compare:'lookup'} )"   class="form-control" ref="cityFilter"/>
		</div>
		<div class="col-lg-3 topMargin">
			<label class="control-label hideOnPhone">Country</label>
			<input value.bind="countryFilterValue" input.delegate="dataTable.filterListExp($event, { type: 'text',  filter: 'countryFilter', lookupArray: people.institutionsArray, lookupProperty: '_id', collectionProperty: 'institutionId._id', displayProperty: 'institutionId.country', matchProperty:'country', compare:'lookup'} )"   class="form-control" ref="countryFilter"/>
		</div>
		<div class="col-lg-3 topMargin">
			<label>Roles</label><br/>
			<select value.bind="roleFilterValue" ref="select" class="form-control" 
				input.delegate="dataTable.filterListExp($event, { type: 'array-or',  filter: 'roleFilter', lookupArray: config.ROLES, lookupProperty: 'role', collectionProperty: 'roles', displayProperty: 'roles', matchProperty:'code', compare:'array-or'} )">
				<option repeat.for="option of config.ROLES" value.bind="option.role">${option.label}</option>
			</select>
		</div>
	  </div>
	</div>

</div>
</template>
